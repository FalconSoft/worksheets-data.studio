"use strict";(self.webpackChunkworksheets_app_runtime=self.webpackChunkworksheets_app_runtime||[]).push([[2193],{58051:(nt,pe,p)=>{p.d(pe,{oz:()=>Ir,P0:()=>Pr,Pi:()=>Fr});var ae={};p.r(ae),p.d(ae,{ArgumentOutOfRangeError:()=>Mt,AsyncSubject:()=>Ve,BehaviorSubject:()=>It.X,ConnectableObservable:()=>Ae.c,EMPTY:()=>_e.E,EmptyError:()=>Qt.K,NEVER:()=>m,NotFoundError:()=>$t,Notification:()=>Ke,NotificationKind:()=>xt,ObjectUnsubscribedError:()=>hn.N,Observable:()=>K.y,ReplaySubject:()=>Ue,Scheduler:()=>ln.b,SequenceError:()=>Ct,Subject:()=>de.x,Subscriber:()=>Wt.Lv,Subscription:()=>rt.w0,TimeoutError:()=>Ht,UnsubscriptionError:()=>Rt.B,VirtualAction:()=>We,VirtualTimeScheduler:()=>qe,animationFrame:()=>Kt.r,animationFrameScheduler:()=>Kt.Z,animationFrames:()=>je,asap:()=>ee.e,asapScheduler:()=>ee.E,async:()=>Ze.P,asyncScheduler:()=>Ze.z,audit:()=>Ne.U,auditTime:()=>Le.e,bindCallback:()=>dn,bindNodeCallback:()=>en,buffer:()=>Me,bufferCount:()=>_,bufferTime:()=>k,bufferToggle:()=>Oe,bufferWhen:()=>ie,catchError:()=>Se.K,combineAll:()=>$e,combineLatest:()=>Dt.a,combineLatestAll:()=>Be,combineLatestWith:()=>ue,concat:()=>zt.z,concatAll:()=>be.u,concatMap:()=>he.b,concatMapTo:()=>se,concatWith:()=>le,config:()=>fe.config,connect:()=>tt,connectable:()=>pn,count:()=>D,debounce:()=>Pe,debounceTime:()=>ze.b,defaultIfEmpty:()=>st.d,defer:()=>gt.P,delay:()=>it,delayWhen:()=>et,dematerialize:()=>ct,distinct:()=>wt,distinctUntilChanged:()=>oe.x,distinctUntilKeyChanged:()=>Ye,elementAt:()=>ft,empty:()=>_e.c,endWith:()=>tn,every:()=>nn,exhaust:()=>Ut,exhaustAll:()=>At,exhaustMap:()=>bt,expand:()=>rn,filter:()=>Et.h,finalize:()=>on.x,find:()=>B,findIndex:()=>an,first:()=>Bt.P,firstValueFrom:()=>fn.z,flatMap:()=>Pn,forkJoin:()=>n.D,from:()=>e.D,fromEvent:()=>t.R,fromEventPattern:()=>s.R,generate:()=>u,groupBy:()=>xn,identity:()=>Ge.y,ignoreElements:()=>lt,iif:()=>h,interval:()=>d.F,isEmpty:()=>jn,isObservable:()=>un.b,last:()=>Ln.Z,lastValueFrom:()=>cn.n,map:()=>Nt.U,mapTo:()=>ut.h,materialize:()=>On,max:()=>Bn,merge:()=>y.T,mergeAll:()=>yn.J,mergeMap:()=>te.z,mergeMapTo:()=>In,mergeScan:()=>Fn,mergeWith:()=>Tn,min:()=>Mn,multicast:()=>mn,never:()=>N,noop:()=>me.Z,observable:()=>Fe.L,observeOn:()=>_t.Q,of:()=>Te.of,onErrorResumeNext:()=>S,onErrorResumeNextWith:()=>Cn,pairs:()=>L,pairwise:()=>Rn.G,partition:()=>M.u,pipe:()=>Tt.z,pluck:()=>Dn,publish:()=>zn,publishBehavior:()=>Un,publishLast:()=>Vn,publishReplay:()=>Zn,queue:()=>sn,queueScheduler:()=>St,race:()=>O,raceWith:()=>Jn,range:()=>Z,reduce:()=>$.u,refCount:()=>$n.x,repeat:()=>Xn,repeatWhen:()=>Kn,retry:()=>Gn,retryWhen:()=>Qn,sample:()=>gn,sampleTime:()=>Yn,scan:()=>Hn.R,scheduled:()=>ce.x,sequenceEqual:()=>kn,share:()=>En.B,shareReplay:()=>qn,single:()=>_n,skip:()=>er.T,skipLast:()=>tr,skipUntil:()=>nr,skipWhile:()=>rr,startWith:()=>ir.O,subscribeOn:()=>qt.R,switchAll:()=>or,switchMap:()=>Zt.w,switchMapTo:()=>ar,switchScan:()=>sr,take:()=>Ie.q,takeLast:()=>lr.h,takeUntil:()=>ur.R,takeWhile:()=>cr,tap:()=>fr.b,throttle:()=>bn,throttleTime:()=>hr,throwError:()=>q._,throwIfEmpty:()=>Ot.T,timeInterval:()=>dr,timeout:()=>pt,timeoutWith:()=>pr,timer:()=>ye.H,timestamp:()=>mr,toArray:()=>Ce.q,using:()=>we,window:()=>yr,windowCount:()=>gr,windowTime:()=>wr,windowToggle:()=>Er,windowWhen:()=>Nr,withLatestFrom:()=>br,zip:()=>Ee,zipAll:()=>Ar,zipWith:()=>xr});var F=p(61794),V=p(38325),C=p(61862),R=p(3202),H=p(46681),K=p(65592),Ae=p(93168),Fe=p(14850);const at={now:()=>(at.delegate||performance).now(),delegate:void 0};var ke=p(34722);function je(i){return i?U(i):Xt}function U(i){return new K.y(r=>{const o=i||at,a=o.now();let c=0;const f=()=>{r.closed||(c=ke.l.requestAnimationFrame(v=>{c=0;const w=o.now();r.next({timestamp:i?w:v,elapsed:w-a}),f()}))};return f(),()=>{c&&ke.l.cancelAnimationFrame(c)}})}const Xt=U();var de=p(32013),It=p(65619),Ft=p(84552);class Ue extends de.x{constructor(r=1/0,o=1/0,a=Ft.l){super(),this._bufferSize=r,this._windowTime=o,this._timestampProvider=a,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=o===1/0,this._bufferSize=Math.max(1,r),this._windowTime=Math.max(1,o)}next(r){const{isStopped:o,_buffer:a,_infiniteTimeWindow:c,_timestampProvider:f,_windowTime:v}=this;o||(a.push(r),!c&&a.push(f.now()+v)),this._trimBuffer(),super.next(r)}_subscribe(r){this._throwIfClosed(),this._trimBuffer();const o=this._innerSubscribe(r),{_infiniteTimeWindow:a,_buffer:c}=this,f=c.slice();for(let v=0;v<f.length&&!r.closed;v+=a?1:2)r.next(f[v]);return this._checkFinalizedStatuses(r),o}_trimBuffer(){const{_bufferSize:r,_timestampProvider:o,_buffer:a,_infiniteTimeWindow:c}=this,f=(c?1:2)*r;if(r<1/0&&f<a.length&&a.splice(0,a.length-f),!c){const v=o.now();let w=0;for(let g=1;g<a.length&&a[g]<=v;g+=2)w=g;w&&a.splice(0,w+1)}}}class Ve extends de.x{constructor(){super(...arguments),this._value=null,this._hasValue=!1,this._isComplete=!1}_checkFinalizedStatuses(r){const{hasError:o,_hasValue:a,_value:c,thrownError:f,isStopped:v,_isComplete:w}=this;o?r.error(f):(v||w)&&(a&&r.next(c),r.complete())}next(r){this.isStopped||(this._value=r,this._hasValue=!0)}complete(){const{_hasValue:r,_value:o,_isComplete:a}=this;a||(this._isComplete=!0,r&&super.next(o),super.complete())}}var ee=p(76410),Ze=p(16321),Je=p(41954),Q=p(75817);const St=new class dt extends Q.v{}(class E extends Je.o{constructor(r,o){super(r,o),this.scheduler=r,this.work=o}schedule(r,o=0){return o>0?super.schedule(r,o):(this.delay=o,this.state=r,this.scheduler.flush(this),this)}execute(r,o){return o>0||this.closed?super.execute(r,o):this._execute(r,o)}requestAsyncId(r,o,a=0){return null!=a&&a>0||null==a&&this.delay>0?super.requestAsyncId(r,o,a):(r.flush(this),0)}}),sn=St;var Kt=p(41614),rt=p(55113);let qe=(()=>{class i extends Q.v{constructor(o=We,a=1/0){super(o,()=>this.frame),this.maxFrames=a,this.frame=0,this.index=-1}flush(){const{actions:o,maxFrames:a}=this;let c,f;for(;(f=o[0])&&f.delay<=a&&(o.shift(),this.frame=f.delay,!(c=f.execute(f.state,f.delay))););if(c){for(;f=o.shift();)f.unsubscribe();throw c}}}return i.frameTimeFactor=10,i})();class We extends Je.o{constructor(r,o,a=(r.index+=1)){super(r,o),this.scheduler=r,this.work=o,this.index=a,this.active=!0,this.index=r.index=a}schedule(r,o=0){if(Number.isFinite(o)){if(!this.id)return super.schedule(r,o);this.active=!1;const a=new We(this.scheduler,this.work);return this.add(a),a.schedule(r,o)}return rt.w0.EMPTY}requestAsyncId(r,o,a=0){this.delay=r.frame+a;const{actions:c}=r;return c.push(this),c.sort(We.sortActions),1}recycleAsyncId(r,o,a=0){}_execute(r,o){if(!0===this.active)return super._execute(r,o)}static sortActions(r,o){return r.delay===o.delay?r.index===o.index?0:r.index>o.index?1:-1:r.delay>o.delay?1:-1}}var ln=p(36850),Wt=p(80305),_e=p(36232),Te=p(22096),q=p(58504),Xe=p(84674),xt=function(i){return i.NEXT="N",i.ERROR="E",i.COMPLETE="C",i}(xt||{});class Ke{constructor(r,o,a){this.kind=r,this.value=o,this.error=a,this.hasValue="N"===r}observe(r){return Gt(this,r)}do(r,o,a){const{kind:c,value:f,error:v}=this;return"N"===c?r?.(f):"E"===c?o?.(v):a?.()}accept(r,o,a){var c;return(0,Xe.m)(null===(c=r)||void 0===c?void 0:c.next)?this.observe(r):this.do(r,o,a)}toObservable(){const{kind:r,value:o,error:a}=this,c="N"===r?(0,Te.of)(o):"E"===r?(0,q._)(()=>a):"C"===r?_e.E:0;if(!c)throw new TypeError(`Unexpected notification kind ${r}`);return c}static createNext(r){return new Ke("N",r)}static createError(r){return new Ke("E",void 0,r)}static createComplete(){return Ke.completeNotification}}function Gt(i,r){var o,a,c;const{kind:f,value:v,error:w}=i;if("string"!=typeof f)throw new TypeError('Invalid notification, missing "kind"');"N"===f?null===(o=r.next)||void 0===o||o.call(r,v):"E"===f?null===(a=r.error)||void 0===a||a.call(r,w):null===(c=r.complete)||void 0===c||c.call(r)}Ke.completeNotification=new Ke("C");var Tt=p(88407),me=p(72420),Ge=p(42737),un=p(2664),cn=p(10708),fn=p(24036),jt=p(82306);const Mt=(0,jt.d)(i=>function(){i(this),this.name="ArgumentOutOfRangeError",this.message="argument out of range"});var Qt=p(46973);const $t=(0,jt.d)(i=>function(o){i(this),this.name="NotFoundError",this.message=o});var hn=p(66149);const Ct=(0,jt.d)(i=>function(o){i(this),this.name="SequenceError",this.message=o});var Yt=p(70093),I=p(79360),ne=p(54829),b=p(8251),vt=p(27103);const Ht=(0,jt.d)(i=>function(o=null){i(this),this.message="Timeout has occurred",this.name="TimeoutError",this.info=o});function pt(i,r){const{first:o,each:a,with:c=kt,scheduler:f=r??Ze.z,meta:v=null}=(0,Yt.q)(i)?{first:i}:"number"==typeof i?{each:i}:i;if(null==o&&null==a)throw new TypeError("No timeout provided.");return(0,I.e)((w,g)=>{let x,P,X=null,Y=0;const ge=T=>{P=(0,vt.f)(g,f,()=>{try{x.unsubscribe(),(0,ne.Xf)(c({meta:v,lastValue:X,seen:Y})).subscribe(g)}catch(z){g.error(z)}},T)};x=w.subscribe((0,b.x)(g,T=>{P?.unsubscribe(),Y++,g.next(X=T),a>0&&ge(a)},void 0,void 0,()=>{P?.closed||P?.unsubscribe(),X=null})),!Y&&ge(null!=o?"number"==typeof o?o:+o-f.now():a)})}function kt(i){throw new Ht(i)}var Rt=p(59732),mt=p(50671),qt=p(85137),Lt=p(97400),_t=p(43093);function yt(i,r,o,a){if(o){if(!(0,mt.K)(o))return function(...c){return yt(i,r,a).apply(this,c).pipe((0,Lt.Z)(o))};a=o}return a?function(...c){return yt(i,r).apply(this,c).pipe((0,qt.R)(a),(0,_t.Q)(a))}:function(...c){const f=new Ve;let v=!0;return new K.y(w=>{const g=f.subscribe(w);if(v){v=!1;let x=!1,P=!1;r.apply(this,[...c,(...X)=>{if(i){const Y=X.shift();if(null!=Y)return void f.error(Y)}f.next(1<X.length?X:X[0]),P=!0,x&&f.complete()}]),P&&f.complete(),x=!0}return g})}}function dn(i,r,o){return yt(!1,i,r,o)}function en(i,r,o){return yt(!0,i,r,o)}var Dt=p(52572),zt=p(30034),gt=p(74911);const vn={connector:()=>new de.x,resetOnDisconnect:!0};function pn(i,r=vn){let o=null;const{connector:a,resetOnDisconnect:c=!0}=r;let f=a();const v=new K.y(w=>f.subscribe(w));return v.connect=()=>((!o||o.closed)&&(o=(0,gt.P)(()=>i).subscribe(f),c&&o.add(()=>f=a())),o),v}var n=p(9315),e=p(72664),t=p(92438),s=p(20081),l=p(59476);function u(i,r,o,a,c){let f,v;function*w(){for(let g=v;!r||r(g);g=o(g))yield f(g)}return 1===arguments.length?({initialState:v,condition:r,iterate:o,resultSelector:f=Ge.y,scheduler:c}=i):(v=i,!a||(0,mt.K)(a)?(f=Ge.y,c=a):f=a),(0,gt.P)(c?()=>(0,l.Q)(w(),c):w)}function h(i,r,o){return(0,gt.P)(()=>i()?r:o)}var d=p(91687),y=p(63019);const m=new K.y(me.Z);function N(){return m}const{isArray:A}=Array;function j(i){return 1===i.length&&A(i[0])?i[0]:i}function S(...i){const r=j(i);return new K.y(o=>{let a=0;const c=()=>{if(a<r.length){let f;try{f=(0,ne.Xf)(r[a++])}catch{return void c()}const v=new b.Q(o,void 0,me.Z,me.Z);f.subscribe(v),v.add(c)}else o.complete()};c()})}function L(i,r){return(0,e.D)(Object.entries(i),r)}var M=p(23889);function O(...i){return 1===(i=j(i)).length?(0,ne.Xf)(i[0]):new K.y(W(i))}function W(i){return r=>{let o=[];for(let a=0;o&&!r.closed&&a<i.length;a++)o.push((0,ne.Xf)(i[a]).subscribe((0,b.x)(r,c=>{if(o){for(let f=0;f<o.length;f++)f!==a&&o[f].unsubscribe();o=null}r.next(c)})))}}function Z(i,r,o){if(null==r&&(r=i,i=0),r<=0)return _e.E;const a=r+i;return new K.y(o?c=>{let f=i;return o.schedule(function(){f<a?(c.next(f++),this.schedule()):c.complete()})}:c=>{let f=i;for(;f<a&&!c.closed;)c.next(f++);c.complete()})}var ye=p(99080);function we(i,r){return new K.y(o=>{const a=i(),c=r(a);return(c?(0,ne.Xf)(c):_e.E).subscribe(o),()=>{a&&a.unsubscribe()}})}var J=p(79940);function Ee(...i){const r=(0,J.jO)(i),o=j(i);return o.length?new K.y(a=>{let c=o.map(()=>[]),f=o.map(()=>!1);a.add(()=>{c=f=null});for(let v=0;!a.closed&&v<o.length;v++)(0,ne.Xf)(o[v]).subscribe((0,b.x)(a,w=>{if(c[v].push(w),c.every(g=>g.length)){const g=c.map(x=>x.shift());a.next(r?r(...g):g),c.some((x,P)=>!x.length&&f[P])&&a.complete()}},()=>{f[v]=!0,!c[v].length&&a.complete()}));return()=>{c=f=null}}):_e.E}var ce=p(20252),fe=p(82653),Ne=p(26301),Le=p(70671);function Me(i){return(0,I.e)((r,o)=>{let a=[];return r.subscribe((0,b.x)(o,c=>a.push(c),()=>{o.next(a),o.complete()})),i.subscribe((0,b.x)(o,()=>{const c=a;a=[],o.next(c)},me.Z)),()=>{a=null}})}var re=p(49039);function _(i,r=null){return r=r??i,(0,I.e)((o,a)=>{let c=[],f=0;o.subscribe((0,b.x)(a,v=>{let w=null;f++%r==0&&c.push([]);for(const g of c)g.push(v),i<=g.length&&(w=w??[],w.push(g));if(w)for(const g of w)(0,re.P)(c,g),a.next(g)},()=>{for(const v of c)a.next(v);a.complete()},void 0,()=>{c=null}))})}function k(i,...r){var o,a;const c=null!==(o=(0,J.yG)(r))&&void 0!==o?o:Ze.z,f=null!==(a=r[0])&&void 0!==a?a:null,v=r[1]||1/0;return(0,I.e)((w,g)=>{let x=[],P=!1;const X=T=>{const{buffer:z,subs:G}=T;G.unsubscribe(),(0,re.P)(x,T),g.next(z),P&&Y()},Y=()=>{if(x){const T=new rt.w0;g.add(T);const G={buffer:[],subs:T};x.push(G),(0,vt.f)(T,c,()=>X(G),i)}};null!==f&&f>=0?(0,vt.f)(g,c,Y,f,!0):P=!0,Y();const ge=(0,b.x)(g,T=>{const z=x.slice();for(const G of z){const{buffer:He}=G;He.push(T),v<=He.length&&X(G)}},()=>{for(;x?.length;)g.next(x.shift().buffer);ge?.unsubscribe(),g.complete(),g.unsubscribe()},void 0,()=>x=null);w.subscribe(ge)})}function Oe(i,r){return(0,I.e)((o,a)=>{const c=[];(0,ne.Xf)(i).subscribe((0,b.x)(a,f=>{const v=[];c.push(v);const w=new rt.w0;w.add((0,ne.Xf)(r(f)).subscribe((0,b.x)(a,()=>{(0,re.P)(c,v),a.next(v),w.unsubscribe()},me.Z)))},me.Z)),o.subscribe((0,b.x)(a,f=>{for(const v of c)v.push(f)},()=>{for(;c.length>0;)a.next(c.shift());a.complete()}))})}function ie(i){return(0,I.e)((r,o)=>{let a=null,c=null;const f=()=>{c?.unsubscribe();const v=a;a=[],v&&o.next(v),(0,ne.Xf)(i()).subscribe(c=(0,b.x)(o,f,me.Z))};f(),r.subscribe((0,b.x)(o,v=>a?.push(v),()=>{a&&o.next(a),o.complete()},void 0,()=>a=c=null))})}var Se=p(26306),te=p(9769),Ce=p(81791);function Qe(i,r){return(0,Tt.z)((0,Ce.q)(),(0,te.z)(o=>i(o)),r?(0,Lt.Z)(r):Ge.y)}function Be(i){return Qe(Dt.a,i)}const $e=Be;function xe(...i){const r=(0,J.jO)(i);return r?(0,Tt.z)(xe(...i),(0,Lt.Z)(r)):(0,I.e)((o,a)=>{(0,Dt.l)([o,...j(i)])(a)})}function ue(...i){return xe(...i)}var be=p(1948),he=p(76328);function se(i,r){return(0,Xe.m)(r)?(0,he.b)(()=>i,r):(0,he.b)(()=>i)}function le(...i){return function Re(...i){const r=(0,J.yG)(i);return(0,I.e)((o,a)=>{(0,be.u)()((0,e.D)([o,...i],r)).subscribe(a)})}(...i)}const ve={connector:()=>new de.x};function tt(i,r=ve){const{connector:o}=r;return(0,I.e)((a,c)=>{const f=o();(0,ne.Xf)(i(function De(i){return new K.y(r=>i.subscribe(r))}(f))).subscribe(c),c.add(a.subscribe(f))})}var $=p(43801);function D(i){return(0,$.u)((r,o,a)=>!i||i(o,a)?r+1:r,0)}function Pe(i){return(0,I.e)((r,o)=>{let a=!1,c=null,f=null;const v=()=>{if(f?.unsubscribe(),f=null,a){a=!1;const w=c;c=null,o.next(w)}};r.subscribe((0,b.x)(o,w=>{f?.unsubscribe(),a=!0,c=w,f=(0,b.x)(o,v,me.Z),(0,ne.Xf)(i(w)).subscribe(f)},()=>{v(),o.complete()},void 0,()=>{c=f=null}))})}var ze=p(83620),st=p(43572),Ie=p(48180);function lt(){return(0,I.e)((i,r)=>{i.subscribe((0,b.x)(r,me.Z))})}var ut=p(21441);function et(i,r){return r?o=>(0,zt.z)(r.pipe((0,Ie.q)(1),lt()),o.pipe(et(i))):(0,te.z)((o,a)=>i(o,a).pipe((0,Ie.q)(1),(0,ut.h)(o)))}function it(i,r=Ze.z){const o=(0,ye.H)(i,r);return et(()=>o)}function ct(){return(0,I.e)((i,r)=>{i.subscribe((0,b.x)(r,o=>Gt(o,r)))})}function wt(i,r){return(0,I.e)((o,a)=>{const c=new Set;o.subscribe((0,b.x)(a,f=>{const v=i?i(f):f;c.has(v)||(c.add(v),a.next(f))})),r?.subscribe((0,b.x)(a,()=>c.clear(),me.Z))})}var oe=p(93997);function Ye(i,r){return(0,oe.x)((o,a)=>r?r(o[i],a[i]):o[i]===a[i])}var Et=p(32181),Ot=p(3026);function ft(i,r){if(i<0)throw new Mt;const o=arguments.length>=2;return a=>a.pipe((0,Et.h)((c,f)=>f===i),(0,Ie.q)(1),o?(0,st.d)(r):(0,Ot.T)(()=>new Mt))}function tn(...i){return r=>(0,zt.z)(r,(0,Te.of)(...i))}function nn(i,r){return(0,I.e)((o,a)=>{let c=0;o.subscribe((0,b.x)(a,f=>{i.call(r,f,c++,o)||(a.next(!1),a.complete())},()=>{a.next(!0),a.complete()}))})}var Nt=p(37398);function bt(i,r){return r?o=>o.pipe(bt((a,c)=>(0,ne.Xf)(i(a,c)).pipe((0,Nt.U)((f,v)=>r(a,f,c,v))))):(0,I.e)((o,a)=>{let c=0,f=null,v=!1;o.subscribe((0,b.x)(a,w=>{f||(f=(0,b.x)(a,void 0,()=>{f=null,v&&a.complete()}),(0,ne.Xf)(i(w,c++)).subscribe(f))},()=>{v=!0,!f&&a.complete()}))})}function At(){return bt(Ge.y)}const Ut=At;var ht=p(80564);function rn(i,r=1/0,o){return r=(r||0)<1?1/0:r,(0,I.e)((a,c)=>(0,ht.p)(a,c,i,r,void 0,!0,o))}var on=p(64716);function B(i,r){return(0,I.e)(Vt(i,r,"value"))}function Vt(i,r,o){const a="index"===o;return(c,f)=>{let v=0;c.subscribe((0,b.x)(f,w=>{const g=v++;i.call(r,w,g,c)&&(f.next(a?g:w),f.complete())},()=>{f.next(a?-1:void 0),f.complete()}))}}function an(i,r){return(0,I.e)(Vt(i,r,"index"))}var Bt=p(81374);function xn(i,r,o,a){return(0,I.e)((c,f)=>{let v;r&&"function"!=typeof r?({duration:o,element:v,connector:a}=r):v=r;const w=new Map,g=T=>{w.forEach(T),T(f)},x=T=>g(z=>z.error(T));let P=0,X=!1;const Y=new b.Q(f,T=>{try{const z=i(T);let G=w.get(z);if(!G){w.set(z,G=a?a():new de.x);const He=function ge(T,z){const G=new K.y(He=>{P++;const Pt=z.subscribe(He);return()=>{Pt.unsubscribe(),0==--P&&X&&Y.unsubscribe()}});return G.key=T,G}(z,G);if(f.next(He),o){const Pt=(0,b.x)(G,()=>{G.complete(),Pt?.unsubscribe()},void 0,void 0,()=>w.delete(z));Y.add((0,ne.Xf)(o(He)).subscribe(Pt))}}G.next(v?v(T):T)}catch(z){x(z)}},()=>g(T=>T.complete()),x,()=>w.clear(),()=>(X=!0,0===P));c.subscribe(Y)})}function jn(){return(0,I.e)((i,r)=>{i.subscribe((0,b.x)(r,()=>{r.next(!1),r.complete()},()=>{r.next(!0),r.complete()}))})}var Ln=p(12032);function On(){return(0,I.e)((i,r)=>{i.subscribe((0,b.x)(r,o=>{r.next(Ke.createNext(o))},()=>{r.next(Ke.createComplete()),r.complete()},o=>{r.next(Ke.createError(o)),r.complete()}))})}function Bn(i){return(0,$.u)((0,Xe.m)(i)?(r,o)=>i(r,o)>0?r:o:(r,o)=>r>o?r:o)}var yn=p(57537);const Pn=te.z;function In(i,r,o=1/0){return(0,Xe.m)(r)?(0,te.z)(()=>i,r,o):("number"==typeof r&&(o=r),(0,te.z)(()=>i,o))}function Fn(i,r,o=1/0){return(0,I.e)((a,c)=>{let f=r;return(0,ht.p)(a,c,(v,w)=>i(f,v,w),o,v=>{f=v},!1,void 0,()=>f=null)})}function Tn(...i){return function Wn(...i){const r=(0,J.yG)(i),o=(0,J._6)(i,1/0);return i=j(i),(0,I.e)((a,c)=>{(0,yn.J)(o)((0,e.D)([a,...i],r)).subscribe(c)})}(...i)}function Mn(i){return(0,$.u)((0,Xe.m)(i)?(r,o)=>i(r,o)<0?r:o:(r,o)=>r<o?r:o)}function mn(i,r){const o=(0,Xe.m)(i)?i:()=>i;return(0,Xe.m)(r)?tt(r,{connector:o}):a=>new Ae.c(a,o)}function Cn(...i){const r=j(i);return o=>S(o,...r)}var Rn=p(69384);function Dn(...i){const r=i.length;if(0===r)throw new Error("list of properties cannot be empty.");return(0,Nt.U)(o=>{let a=o;for(let c=0;c<r;c++){const f=a?.[i[c]];if(!(typeof f<"u"))return;a=f}return a})}function zn(i){return i?r=>tt(i)(r):r=>mn(new de.x)(r)}function Un(i){return r=>{const o=new It.X(i);return new Ae.c(r,()=>o)}}function Vn(){return i=>{const r=new Ve;return new Ae.c(i,()=>r)}}function Zn(i,r,o,a){o&&!(0,Xe.m)(o)&&(a=o);const c=(0,Xe.m)(o)?o:void 0;return f=>mn(new Ue(i,r,a),c)(f)}function Jn(...i){return i.length?(0,I.e)((r,o)=>{W([r,...i])(o)}):Ge.y}function Xn(i){let o,r=1/0;return null!=i&&("object"==typeof i?({count:r=1/0,delay:o}=i):r=i),r<=0?()=>_e.E:(0,I.e)((a,c)=>{let v,f=0;const w=()=>{if(v?.unsubscribe(),v=null,null!=o){const x="number"==typeof o?(0,ye.H)(o):(0,ne.Xf)(o(f)),P=(0,b.x)(c,()=>{P.unsubscribe(),g()});x.subscribe(P)}else g()},g=()=>{let x=!1;v=a.subscribe((0,b.x)(c,void 0,()=>{++f<r?v?w():x=!0:c.complete()})),x&&w()};g()})}function Kn(i){return(0,I.e)((r,o)=>{let a,f,c=!1,v=!1,w=!1;const g=()=>w&&v&&(o.complete(),!0),P=()=>{w=!1,a=r.subscribe((0,b.x)(o,void 0,()=>{w=!0,!g()&&(f||(f=new de.x,i(f).subscribe((0,b.x)(o,()=>{a?P():c=!0},()=>{v=!0,g()}))),f).next()})),c&&(a.unsubscribe(),a=null,c=!1,P())};P()})}function Gn(i=1/0){let r;r=i&&"object"==typeof i?i:{count:i};const{count:o=1/0,delay:a,resetOnSuccess:c=!1}=r;return o<=0?Ge.y:(0,I.e)((f,v)=>{let g,w=0;const x=()=>{let P=!1;g=f.subscribe((0,b.x)(v,X=>{c&&(w=0),v.next(X)},void 0,X=>{if(w++<o){const Y=()=>{g?(g.unsubscribe(),g=null,x()):P=!0};if(null!=a){const ge="number"==typeof a?(0,ye.H)(a):(0,ne.Xf)(a(X,w)),T=(0,b.x)(v,()=>{T.unsubscribe(),Y()},()=>{v.complete()});ge.subscribe(T)}else Y()}else v.error(X)})),P&&(g.unsubscribe(),g=null,x())};x()})}function Qn(i){return(0,I.e)((r,o)=>{let a,f,c=!1;const v=()=>{a=r.subscribe((0,b.x)(o,void 0,void 0,w=>{f||(f=new de.x,i(f).subscribe((0,b.x)(o,()=>a?v():c=!0))),f&&f.next(w)})),c&&(a.unsubscribe(),a=null,c=!1,v())};v()})}var $n=p(66196);function gn(i){return(0,I.e)((r,o)=>{let a=!1,c=null;r.subscribe((0,b.x)(o,f=>{a=!0,c=f})),i.subscribe((0,b.x)(o,()=>{if(a){a=!1;const f=c;c=null,o.next(f)}},me.Z))})}function Yn(i,r=Ze.z){return gn((0,d.F)(i,r))}var Hn=p(36424);function kn(i,r=((o,a)=>o===a)){return(0,I.e)((o,a)=>{const c={buffer:[],complete:!1},f={buffer:[],complete:!1},v=g=>{a.next(g),a.complete()},w=(g,x)=>{const P=(0,b.x)(a,X=>{const{buffer:Y,complete:ge}=x;0===Y.length?ge?v(!1):g.buffer.push(X):!r(X,Y.shift())&&v(!1)},()=>{g.complete=!0;const{complete:X,buffer:Y}=x;X&&v(0===Y.length),P?.unsubscribe()});return P};o.subscribe(w(c,f)),i.subscribe(w(f,c))})}var En=p(63020);function qn(i,r,o){let a,c=!1;return i&&"object"==typeof i?({bufferSize:a=1/0,windowTime:r=1/0,refCount:c=!1,scheduler:o}=i):a=i??1/0,(0,En.B)({connector:()=>new Ue(a,r,o),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:c})}function _n(i){return(0,I.e)((r,o)=>{let c,a=!1,f=!1,v=0;r.subscribe((0,b.x)(o,w=>{f=!0,(!i||i(w,v++,r))&&(a&&o.error(new Ct("Too many matching values")),a=!0,c=w)},()=>{a?(o.next(c),o.complete()):o.error(f?new $t("No matching values"):new Qt.K)}))})}var er=p(836);function tr(i){return i<=0?Ge.y:(0,I.e)((r,o)=>{let a=new Array(i),c=0;return r.subscribe((0,b.x)(o,f=>{const v=c++;if(v<i)a[v]=f;else{const w=v%i,g=a[w];a[w]=f,o.next(g)}})),()=>{a=null}})}function nr(i){return(0,I.e)((r,o)=>{let a=!1;const c=(0,b.x)(o,()=>{c?.unsubscribe(),a=!0},me.Z);(0,ne.Xf)(i).subscribe(c),r.subscribe((0,b.x)(o,f=>a&&o.next(f)))})}function rr(i){return(0,I.e)((r,o)=>{let a=!1,c=0;r.subscribe((0,b.x)(o,f=>(a||(a=!i(f,c++)))&&o.next(f)))})}var ir=p(27921),Zt=p(94664);function or(){return(0,Zt.w)(Ge.y)}function ar(i,r){return(0,Xe.m)(r)?(0,Zt.w)(()=>i,r):(0,Zt.w)(()=>i)}function sr(i,r){return(0,I.e)((o,a)=>{let c=r;return(0,Zt.w)((f,v)=>i(c,f,v),(f,v)=>(c=v,v))(o).subscribe(a),()=>{c=null}})}var lr=p(94418),ur=p(59773);function cr(i,r=!1){return(0,I.e)((o,a)=>{let c=0;o.subscribe((0,b.x)(a,f=>{const v=i(f,c++);(v||r)&&a.next(f),!v&&a.complete()}))})}var fr=p(99397);const Nn={leading:!0,trailing:!1};function bn(i,r=Nn){return(0,I.e)((o,a)=>{const{leading:c,trailing:f}=r;let v=!1,w=null,g=null,x=!1;const P=()=>{g?.unsubscribe(),g=null,f&&(ge(),x&&a.complete())},X=()=>{g=null,x&&a.complete()},Y=T=>g=(0,ne.Xf)(i(T)).subscribe((0,b.x)(a,P,X)),ge=()=>{if(v){v=!1;const T=w;w=null,a.next(T),!x&&Y(T)}};o.subscribe((0,b.x)(a,T=>{v=!0,w=T,(!g||g.closed)&&(c?ge():Y(T))},()=>{x=!0,(!(f&&v&&g)||g.closed)&&a.complete()}))})}function hr(i,r=Ze.z,o=Nn){const a=(0,ye.H)(i,r);return bn(()=>a,o)}function dr(i=Ze.z){return(0,I.e)((r,o)=>{let a=i.now();r.subscribe((0,b.x)(o,c=>{const f=i.now(),v=f-a;a=f,o.next(new vr(c,v))}))})}class vr{constructor(r,o){this.value=r,this.interval=o}}function pr(i,r,o){let a,c,f;if(o=o??Ze.P,(0,Yt.q)(i)?a=i:"number"==typeof i&&(c=i),!r)throw new TypeError("No observable provided to switch to");if(f=()=>r,null==a&&null==c)throw new TypeError("No timeout provided.");return pt({first:a,each:c,scheduler:o,with:f})}function mr(i=Ft.l){return(0,Nt.U)(r=>({value:r,timestamp:i.now()}))}function yr(i){return(0,I.e)((r,o)=>{let a=new de.x;o.next(a.asObservable());const c=f=>{a.error(f),o.error(f)};return r.subscribe((0,b.x)(o,f=>a?.next(f),()=>{a.complete(),o.complete()},c)),i.subscribe((0,b.x)(o,()=>{a.complete(),o.next(a=new de.x)},me.Z,c)),()=>{a?.unsubscribe(),a=null}})}function gr(i,r=0){const o=r>0?r:i;return(0,I.e)((a,c)=>{let f=[new de.x],v=[],w=0;c.next(f[0].asObservable()),a.subscribe((0,b.x)(c,g=>{for(const P of f)P.next(g);const x=w-i+1;if(x>=0&&x%o==0&&f.shift().complete(),++w%o==0){const P=new de.x;f.push(P),c.next(P.asObservable())}},()=>{for(;f.length>0;)f.shift().complete();c.complete()},g=>{for(;f.length>0;)f.shift().error(g);c.error(g)},()=>{v=null,f=null}))})}function wr(i,...r){var o,a;const c=null!==(o=(0,J.yG)(r))&&void 0!==o?o:Ze.z,f=null!==(a=r[0])&&void 0!==a?a:null,v=r[1]||1/0;return(0,I.e)((w,g)=>{let x=[],P=!1;const X=z=>{const{window:G,subs:He}=z;G.complete(),He.unsubscribe(),(0,re.P)(x,z),P&&Y()},Y=()=>{if(x){const z=new rt.w0;g.add(z);const G=new de.x,He={window:G,subs:z,seen:0};x.push(He),g.next(G.asObservable()),(0,vt.f)(z,c,()=>X(He),i)}};null!==f&&f>=0?(0,vt.f)(g,c,Y,f,!0):P=!0,Y();const ge=z=>x.slice().forEach(z),T=z=>{ge(({window:G})=>z(G)),z(g),g.unsubscribe()};return w.subscribe((0,b.x)(g,z=>{ge(G=>{G.window.next(z),v<=++G.seen&&X(G)})},()=>T(z=>z.complete()),z=>T(G=>G.error(z)))),()=>{x=null}})}function Er(i,r){return(0,I.e)((o,a)=>{const c=[],f=v=>{for(;0<c.length;)c.shift().error(v);a.error(v)};(0,ne.Xf)(i).subscribe((0,b.x)(a,v=>{const w=new de.x;c.push(w);const g=new rt.w0;let P;try{P=(0,ne.Xf)(r(v))}catch(X){return void f(X)}a.next(w.asObservable()),g.add(P.subscribe((0,b.x)(a,()=>{(0,re.P)(c,w),w.complete(),g.unsubscribe()},me.Z,f)))},me.Z)),o.subscribe((0,b.x)(a,v=>{const w=c.slice();for(const g of w)g.next(v)},()=>{for(;0<c.length;)c.shift().complete();a.complete()},f,()=>{for(;0<c.length;)c.shift().unsubscribe()}))})}function Nr(i){return(0,I.e)((r,o)=>{let a,c;const f=w=>{a.error(w),o.error(w)},v=()=>{let w;c?.unsubscribe(),a?.complete(),a=new de.x,o.next(a.asObservable());try{w=(0,ne.Xf)(i())}catch(g){return void f(g)}w.subscribe(c=(0,b.x)(o,v,v,f))};v(),r.subscribe((0,b.x)(o,w=>a.next(w),()=>{a.complete(),o.complete()},f,()=>{c?.unsubscribe(),a=null}))})}function br(...i){const r=(0,J.jO)(i);return(0,I.e)((o,a)=>{const c=i.length,f=new Array(c);let v=i.map(()=>!1),w=!1;for(let g=0;g<c;g++)(0,ne.Xf)(i[g]).subscribe((0,b.x)(a,x=>{f[g]=x,!w&&!v[g]&&(v[g]=!0,(w=v.every(Ge.y))&&(v=null))},me.Z));o.subscribe((0,b.x)(a,g=>{if(w){const x=[g,...f];a.next(r?r(...x):x)}}))})}function Ar(i){return Qe(Ee,i)}function xr(...i){return function Sr(...i){return(0,I.e)((r,o)=>{Ee(r,...i).subscribe(o)})}(...i)}var An=p(99796),jr=p(21473),Lr=p(1238),Or=p(13509),Sn=p(76690);const ot=p(60364);ot.setBaseUrl(Lr.Z.worksheetsApi);const Jt={"datapipe-js":V,"datapipe-js/utils":R,"datapipe-js/array":H,"datapipe-js/string":C,"sql-data-api":ot,JSV:{parse:i=>Sn.R.parse(i),stringify:i=>Sn.R.stringify(i)},rxjs:ae,"rxjs/factory":{createSubject:()=>new de.x,createAsyncSubject:()=>new Ve,createBehaviorSubject:i=>new It.X(i),createReplaySubject:i=>new Ue(i)}},Br=new Map([["typeof",i=>typeof i],["delay",i=>new Promise(r=>setTimeout(r,i||1e3))],["httpGet",(i,r)=>ot.httpGet(i,{...r})],["httpGetText",(i,r)=>ot.httpGetText(i,r)],["httpRequest",(i,r,o,a)=>ot.httpRequest(i,r,o,a)],["httpRequest$",(i,r,o,a)=>(0,e.D)(ot.httpRequest(i,r,o,a))],["httpPost",(i,r,o)=>ot.httpPost(i,r,{...o})],["httpPut",(i,r,o)=>ot.httpPut(i,r,{...o})],["httpDelete",(i,r)=>ot.httpDelete(i,void 0,{...r})],["fetch",(i,r)=>fetch(i,r)],["parseInt",parseInt],["parseFloat",parseFloat],["dateTime",(i,r)=>R.parseDatetimeOrNull(i,r)||new Date],["format",(i,r="")=>(0,An.WU)(i,r)],["getQueryParams",(i,r)=>(0,An.vl)(i,r)],["setQueryParameters",i=>{const r=location.pathname+(i.startsWith("?")?i:`?${i}`);window.history.pushState({},"",r)}],["openFile",i=>(new Or.j5).importAppContents()]]);function Pr(){return Object.keys(Jt)}function Ir(i){return Jt[i]}function Fr(i=(r=>Promise.resolve(""))){const r=(0,F.R)().registerPackagesLoader(Tr).registerModuleLoader(i).assignGlobalContext({session:jr.LO.contextVariables,localStorage,__env:{args:{},entryFunction:"",entryModule:""}});return function Wr(i){Br.forEach((r,o)=>{r.interpreter=i,i.addFunction(o,r)})}(r),r}function Tr(i){if(!Jt.hasOwnProperty(i))throw Error(`Package '${i}' is not available.`);return Jt[i]}},24036:(nt,pe,p)=>{p.d(pe,{z:()=>V});var ae=p(46973),F=p(80305);function V(C,R){const H="object"==typeof R;return new Promise((K,Ae)=>{const Fe=new F.Hp({next:at=>{K(at),Fe.unsubscribe()},error:Ae,complete:()=>{H?K(R.defaultValue):Ae(new ae.K)}});C.subscribe(Fe)})}},20081:(nt,pe,p)=>{p.d(pe,{R:()=>C});var ae=p(65592),F=p(84674),V=p(97400);function C(R,H,K){return K?C(R,H).pipe((0,V.Z)(K)):new ae.y(Ae=>{const Fe=(...ke)=>Ae.next(1===ke.length?ke[0]:ke),at=R(Fe);return(0,F.m)(H)?()=>H(Fe,at):void 0})}},23889:(nt,pe,p)=>{function ae(R,H){return(K,Ae)=>!R.call(H,K,Ae)}p.d(pe,{u:()=>C});var F=p(32181),V=p(54829);function C(R,H,K){return[(0,F.h)(H,K)((0,V.Xf)(R)),(0,F.h)(ae(H,K))((0,V.Xf)(R))]}},69384:(nt,pe,p)=>{p.d(pe,{G:()=>V});var ae=p(79360),F=p(8251);function V(){return(0,ae.e)((C,R)=>{let H,K=!1;C.subscribe((0,F.x)(R,Ae=>{const Fe=H;H=Ae,K&&R.next([Fe,Ae]),K=!0}))})}},61794:(nt,pe,p)=>{p.d(pe,{R:()=>vn});var ae=function(n,e){return(ae=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var l in s)Object.prototype.hasOwnProperty.call(s,l)&&(t[l]=s[l])})(n,e)};function F(n,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function t(){this.constructor=n}ae(n,e),n.prototype=null===e?Object.create(e):(t.prototype=e.prototype,new t)}var V=function(){return V=Object.assign||function(e){for(var t,s=1,l=arguments.length;s<l;s++)for(var u in t=arguments[s])Object.prototype.hasOwnProperty.call(t,u)&&(e[u]=t[u]);return e},V.apply(this,arguments)};function C(n,e,t,s){return new(t||(t=Promise))(function(u,h){function d(N){try{m(s.next(N))}catch(A){h(A)}}function y(N){try{m(s.throw(N))}catch(A){h(A)}}function m(N){N.done?u(N.value):function l(u){return u instanceof t?u:new t(function(h){h(u)})}(N.value).then(d,y)}m((s=s.apply(n,e||[])).next())})}function R(n,e){var s,l,u,h,t={label:0,sent:function(){if(1&u[0])throw u[1];return u[1]},trys:[],ops:[]};return h={next:d(0),throw:d(1),return:d(2)},"function"==typeof Symbol&&(h[Symbol.iterator]=function(){return this}),h;function d(m){return function(N){return function y(m){if(s)throw new TypeError("Generator is already executing.");for(;h&&(h=0,m[0]&&(t=0)),t;)try{if(s=1,l&&(u=2&m[0]?l.return:m[0]?l.throw||((u=l.return)&&u.call(l),0):l.next)&&!(u=u.call(l,m[1])).done)return u;switch(l=0,u&&(m=[2&m[0],u.value]),m[0]){case 0:case 1:u=m;break;case 4:return t.label++,{value:m[1],done:!1};case 5:t.label++,l=m[1],m=[0];continue;case 7:m=t.ops.pop(),t.trys.pop();continue;default:if(!(u=(u=t.trys).length>0&&u[u.length-1])&&(6===m[0]||2===m[0])){t=0;continue}if(3===m[0]&&(!u||m[1]>u[0]&&m[1]<u[3])){t.label=m[1];break}if(6===m[0]&&t.label<u[1]){t.label=u[1],u=m;break}if(u&&t.label<u[2]){t.label=u[2],t.ops.push(m);break}u[2]&&t.ops.pop(),t.trys.pop();continue}m=e.call(n,t)}catch(N){m=[6,N],l=0}finally{s=u=0}if(5&m[0])throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}([m,N])}}}function H(n,e,t){if(t||2===arguments.length)for(var u,s=0,l=e.length;s<l;s++)(u||!(s in e))&&(u||(u=Array.prototype.slice.call(e,0,s)),u[s]=e[s]);return n.concat(u||Array.prototype.slice.call(e))}function Ae(n){return n.startsWith("/")||n.startsWith("./")?n.endsWith(".json")?"json":"jspyModule":"jsPackage"}function Fe(n,e,t,s,l){return"".concat(n,": ").concat(e,"(").concat(t,",").concat(s,"): ").concat(l)}!function(n){F(function e(t,s,l,u){var h=n.call(this)||this;return h.module=t,h.line=s,h.column=l,h.message=u,h.message=Fe("JspyTokenizerError",t,s,l,u),Object.setPrototypeOf(h,e.prototype),h},n)}(Error);var at=function(n){function e(t,s,l,u){var h=n.call(this)||this;return h.module=t,h.line=s,h.column=l,h.message=u,h.message=Fe("JspyParserError",t,s,l,u),Object.setPrototypeOf(h,e.prototype),h}return F(e,n),e}(Error),ke=function(n){function e(t,s,l,u){var h=n.call(this)||this;return h.module=t,h.line=s,h.column=l,h.message=u,h.message=Fe("JspyEvalError",t,s,l,u),Object.setPrototypeOf(h,e.prototype),h}return F(e,n),e}(Error),je=function(n){function e(t,s,l,u,h){var d=n.call(this)||this;return d.module=t,d.line=s,d.column=l,d.name=u,d.message=h,d.message=Fe("JspyError",t||"name.jspy",s,l,h),Object.setPrototypeOf(d,e.prototype),d}return F(e,n),e}(Error),U=function(n){return n[n.Arithmetic=0]="Arithmetic",n[n.Assignment=1]="Assignment",n[n.Comparison=2]="Comparison",n[n.Logical=3]="Logical",n[n.Membership=4]="Membership",n}(U||{}),Xt=new Map([["+",U.Arithmetic],["-",U.Arithmetic],["*",U.Arithmetic],["/",U.Arithmetic],["%",U.Arithmetic],["**",U.Arithmetic],["//",U.Arithmetic],[">",U.Comparison],[">=",U.Comparison],["==",U.Comparison],["!=",U.Comparison],["<>",U.Comparison],["<",U.Comparison],["<=",U.Comparison],["and",U.Logical],["or",U.Logical],["in",U.Membership],["=",U.Assignment],["+=",U.Assignment],["-=",U.Assignment],["*=",U.Assignment],["/=",U.Assignment],["++",U.Assignment],["--",U.Assignment]]),de=new Map([["+",function(n,e){return Ve(n,e,"+")}],["-",function(n,e){return Ve(n,e,"-")}],["/",function(n,e){return Ve(n,e,"/")}],["*",function(n,e){return Ve(n,e,"*")}],["%",function(n,e){return Ve(n,e,"%")}],["**",function(n,e){return Ve(n,e,"**")}],["//",function(n,e){return Ve(n,e,"//")}],[">",function(n,e){return Ue(n,e,">")}],[">=",function(n,e){return Ue(n,e,">=")}],["<",function(n,e){return Ue(n,e,"<")}],["<=",function(n,e){return Ue(n,e,"<=")}],["==",function(n,e){return Ue(n,e,"==")}],["!=",function(n,e){return Ue(n,e,"!=")}],["<>",function(n,e){return Ue(n,e,"<>")}],["and",function(n,e){return Ft(n,e,"and")}],["or",function(n,e){return Ft(n,e,"or")}],["in",function(n,e){return function It(n,e,t){if("string"==typeof n)return n.includes(String(e));if(Array.isArray(n))return n.includes(e);throw new Error("Unknown operation '".concat(t,"'"))}(n,e,"in")}]]);function Ft(n,e,t){switch(t){case"and":return n&&e;case"or":return n||e}throw new Error("Unknown operation '".concat(t,"'"))}function Ue(n,e,t){switch(t){case"==":return n===e;case"!=":case"<>":return n!==e;case">":return n>e;case"<":return n<e;case">=":return n>=e;case"<=":return n<=e}throw new Error("Unknown operation '".concat(t,"'"))}function Ve(n,e,t){switch(t){case"+":return n+e;case"-":return n-e;case"*":return n*e;case"/":return n/e;case"%":return n%e;case"**":return Math.pow(n,e)}throw new Error("Unknown operation '".concat(t,"'"))}var ee=function(n){return n[n.Identifier=0]="Identifier",n[n.Keyword=1]="Keyword",n[n.Separator=2]="Separator",n[n.Operator=3]="Operator",n[n.LiteralNumber=4]="LiteralNumber",n[n.LiteralBool=5]="LiteralBool",n[n.LiteralString=6]="LiteralString",n[n.LiteralNull=7]="LiteralNull",n[n.Comment=8]="Comment",n}(ee||{});function Je(n){return n[1][0]}function E(n){return n?n[0]:null}function Q(n){return n[1].subarray(1)}function dt(n){return n[1][1]}function St(n){return n[1][2]}function rt(n,e){var t=[];if(!n.length)return[];for(var s=0,l=0;l<e.length;l++){var u=e[l];"["===E(n[s-1])&&(s-=1),t.push(n.slice(s,u)),s=u+1}return"["===E(n[s-1])&&(s-=1),t.push(n.slice(s,n.length)),t}function qe(n,e){return n.length?rt(n,Wt(n,function(s){return s===e})):[]}function We(n,e,t){void 0===t&&(t=0);for(var s=t;s<n.length;s++)if(Je(n[s])!==ee.LiteralString)if("("===E(n[s]))s=Te(n,s,"(",")");else if("["===E(n[s]))s=Te(n,s,"[","]");else if("{"===E(n[s]))s=Te(n,s,"{","}");else if(e(E(n[s])))return s;return-1}function Wt(n,e){for(var t=[],s=0;s<n.length;s++){var l=E(n[s]);Je(n[s])!==ee.LiteralString&&("("===l?s=Te(n,s,"(",")"):"["===l?s=Te(n,s,"[","]"):"{"===l?s=Te(n,s,"{","}"):e(l)&&t.push(s))}return t}function _e(n,e){return void 0===e&&(e=null),Wt(n,e?function(t){return Xt.get(t)===e}:function(t){return Xt.has(t)})}function Te(n,e,t,s){for(var l=0;E(n[++e])!==s||0!==l;){if(e+1>=n.length)throw new Error("Closing '".concat(s,"' is missing"));var u=E(n[e]);u===t&&l++,u===s&&l--}return e}var q=function n(e){this.type=e,this.loc=void 0},Xe=function(n){function e(t,s,l){var u=n.call(this,"assign")||this;return u.target=t,u.source=s,u.loc=l,u.loc=l,u}return F(e,n),e}(q),xt=function(n){function e(t){var s=n.call(this,"const")||this;return s.value=E(t),s.loc=Q(t),s}return F(e,n),e}(q),Ke=function(n){function e(t,s){var l=n.call(this,"comment")||this;return l.comment=t,l.loc=s,l.loc=s,l}return F(e,n),e}(q),Gt=function(n){function e(t,s){void 0===t&&(t=void 0);var l=n.call(this,"return")||this;return l.returnValue=t,l.loc=s,l.loc=s,l}return F(e,n),e}(q),Tt=function(n){function e(t,s,l){var u=n.call(this,"raise")||this;return u.errorName=t,u.errorMessageAst=s,u.loc=l,u.loc=l,u}return F(e,n),e}(q),me=function(n){function e(){return n.call(this,"continue")||this}return F(e,n),e}(q),Ge=function(n){function e(){return n.call(this,"break")||this}return F(e,n),e}(q);!function(n){F(function e(t){var s=n.call(this,"setSingleVar")||this;return s.name=t[0],s.loc=Q(t),s},n)}(q);var un=function(n){function e(t,s,l){var u=n.call(this,"funcCall")||this;return u.name=t,u.paramNodes=s,u.loc=l,u.nullCoelsing=void 0,u.loc=l,u}return F(e,n),e}(q),cn=function(n){function e(t,s,l,u){var h=n.call(this,"funcDef")||this;return h.funcAst=t,h.params=s,h.isAsync=l,h.loc=u,h.loc=u,h}return F(e,n),e}(q),fn=function(n){function e(t,s,l){var u=n.call(this,"arrowFuncDef")||this;return u.funcAst=t,u.params=s,u.loc=l,u.loc=l,u}return F(e,n),e}(q),jt=function(n){function e(t,s,l){var u=n.call(this,"elif")||this;return u.conditionNode=t,u.elifBody=s,u.loc=l,u.loc=l,u}return F(e,n),e}(q),Mt=function(n){function e(t,s,l,u,h){void 0===l&&(l=void 0),void 0===u&&(u=void 0);var d=n.call(this,"if")||this;return d.conditionNode=t,d.ifBody=s,d.elifs=l,d.elseBody=u,d.loc=h,d.loc=h,d}return F(e,n),e}(q),Qt=function(n){function e(t,s,l,u,h){var d=n.call(this,"tryExcept")||this;return d.tryBody=t,d.exepts=s,d.elseBody=l,d.finallyBody=u,d.loc=h,d.loc=h,d}return F(e,n),e}(q),$t=function(n){function e(t,s,l,u){var h=n.call(this,"for")||this;return h.sourceArray=t,h.itemVarName=s,h.body=l,h.loc=u,h.loc=u,h}return F(e,n),e}(q),hn=function(n){function e(t,s,l){var u=n.call(this,"while")||this;return u.condition=t,u.body=s,u.loc=l,u.loc=l,u}return F(e,n),e}(q),Ct=function(n){function e(t,s,l,u){void 0===l&&(l=void 0);var h=n.call(this,"import")||this;return h.module=t,h.body=s,h.parts=l,h.loc=u,h.loc=u,h}return F(e,n),e}(q),Yt=function(n){function e(t,s){void 0===s&&(s=void 0);var l=n.call(this,"getSingleVar")||this;return l.nullCoelsing=void 0,l.name=t[0],l.nullCoelsing=s,l.loc=Q(t),l}return F(e,n),e}(q),I=function(n){function e(t,s){var l=n.call(this,"chainingCalls")||this;return l.innerNodes=t,l.loc=s,l.loc=s,l}return F(e,n),e}(q),ne=function(n){function e(t,s){var l=n.call(this,"createObject")||this;return l.props=t,l.loc=s,l.loc=s,l}return F(e,n),e}(q),b=function(n){function e(t,s){var l=n.call(this,"createArray")||this;return l.items=t,l.loc=s,l.loc=s,l}return F(e,n),e}(q),vt=function(n){function e(t,s,l){void 0===s&&(s=void 0);var u=n.call(this,"chainingObjectAccess")||this;return u.indexerBody=t,u.nullCoelsing=s,u.loc=l,u.loc=l,u}return F(e,n),e}(q),Ht=function(n){function e(t,s){var l=n.call(this,"logicalOp")||this;return l.items=t,l.loc=s,l.loc=s,l}return F(e,n),e}(q),pt=function(n){function e(t,s,l,u){var h=n.call(this,"binOp")||this;return h.left=t,h.op=s,h.right=l,h.loc=u,h.loc=u,h}return F(e,n),e}(q);function kt(n){return{moduleName:n.moduleName,blockScope:n.blockScope.clone(),cancellationToken:n.cancellationToken}}var Rt=function(){function n(e){this.scope={},this.scope=V({},e)}return n.prototype.getScope=function(){return this.scope},n.prototype.clone=function(){return new n(this.scope)},n.prototype.set=function(e,t){this.scope[e]=t},n.prototype.get=function(e){return this.scope[e]},n}(),mt=function(){function n(){}return n.prototype.evalBlock=function(e,t){for(var s=this,l=null,u=function(j){var S=j;t.blockScope.set(S.funcAst.name,function(){for(var M=[],O=0;O<arguments.length;O++)M[O]=arguments[O];return s.jspyFuncInvoker.apply(s,H([S,t],M,!1))})},h=0,d=e?.funcs||[];h<d.length;h++)u(y=d[h]);for(var m=0;m<e.body.length;m++){var y=e.body[m];if(t.cancellationToken.cancel){var N=y.loc||[];return t.cancellationToken.message||(t.cancellationToken.message="Cancelled. ".concat(t.moduleName,": ").concat(N[0],", ").concat(N[1])),t.cancellationToken.message}if("comment"!==y.type){if("import"===y.type)throw new Error("Import is not support with 'eval'. Use method 'evalAsync' instead");try{if(l=this.evalNode(y,t),t.returnCalled){var A=t.returnObject;return("func"==e.type||"module"==e.type)&&(t.returnCalled=!1,t.returnObject=null),A}if(t.continueCalled||t.breakCalled)break}catch(S){throw N=y.loc?y.loc:[0,0],S instanceof je||S instanceof ke?S:new ke(t.moduleName,N[0],N[1],S.message||S)}}}return l},n.prototype.jspyFuncInvoker=function(e,t){for(var s,l=[],u=2;u<arguments.length;u++)l[u-2]=arguments[u];var h=Object.assign({},e.funcAst);h.type="func";for(var d=kt(t),y=0;y<(null===(s=e.params)||void 0===s?void 0:s.length);y++)d.blockScope.set(e.params[y],l?.length>y?l[y]:null);return this.evalBlock(h,d)},n.prototype.invokeFunction=function(e,t,s){return e.apply(void 0,t)},n.prototype.evalNode=function(e,t){var l,u,h,d,y,m,N,s=this;if("import"===e.type||"comment"===e.type)return null;if("if"!==e.type){if("raise"===e.type){var M=e,O=this.evalNode(M.errorMessageAst,t);throw new je(t.moduleName,M.loc[0],M.loc[1],M.errorName,O)}if("tryExcept"!==e.type){if("return"===e.type){var Me=e;return t.returnCalled=!0,t.returnObject=Me.returnValue?this.evalNode(Me.returnValue,t):null,t.returnObject}if("continue"!==e.type)if("break"!==e.type)if("for"!==e.type)if("while"!==e.type){if("const"===e.type)return e.value;if("getSingleVar"===e.type){var ie=e.name,Se=t.blockScope.get(e.name);if(void 0===Se)throw";"===ie.charAt(ie.length-1)?new Error("Unexpected ';' in the end."):new Error("Variable '".concat(ie,"' is not defined."));return Se}if("binOp"===e.type){var te=e,Ce=this.evalNode(te.left,t),Qe=this.evalNode(te.right,t);if("function"==typeof(Be=de.get(te.op)))return Be(Ce,Qe);throw new Error("Unknown binary oprastion")}if("logicalOp"===e.type){for(var $e=e,xe=0,ue=!0;xe<$e.items.length;){var be=$e.items[xe++];if(ue=this.evalNode(be.node,t),"and"===be.op&&!ue)return!1;if("or"===be.op&&ue)return ue}return ue}if("arrowFuncDef"===e.type){var he=e;return function(){for(var oe=[],Ye=0;Ye<arguments.length;Ye++)oe[Ye]=arguments[Ye];return s.jspyFuncInvoker.apply(s,H([he,t],oe,!1))}}if("funcCall"===e.type){var Be,se=e;if("function"!=typeof(Be=t.blockScope.get(se.name)))throw Error("'".concat(se.name,"' is not a function or not defined."));var Re=(null===(N=se.paramNodes)||void 0===N?void 0:N.map(function(Ye){return s.evalNode(Ye,t)}))||[];return this.invokeFunction(Be,Re,{moduleName:t.moduleName,line:se.loc[0],column:se.loc[1]})}if("assign"===e.type){var le=e;if("getSingleVar"===le.target.type)t.blockScope.set(le.target.name,this.evalNode(le.source,t));else if("chainingCalls"===le.target.type){var ve=le.target,tt=new I(ve.innerNodes.slice(0,ve.innerNodes.length-1),ve.loc),$=this.evalNode(tt,t),D=ve.innerNodes[ve.innerNodes.length-1],Pe="";if("getSingleVar"===D.type)Pe=D.name;else{if("chainingObjectAccess"!==D.type)throw Error("Not implemented Assign operation with chaining calls");Pe=this.evalNode(D.indexerBody,t)}$[Pe]=this.evalNode(le.source,t)}return null}if("chainingCalls"===e.type)return this.resolveChainingCallsNode(e,t);if("createObject"===e.type){for(var st={},Ie=0,lt=e.props;Ie<lt.length;Ie++){var ut=lt[Ie];st[this.evalNode(ut.name,t)]=this.evalNode(ut.value,t)}return st}if("createArray"===e.type){for(var it=[],ct=0,wt=e.items;ct<wt.length;ct++)it.push(this.evalNode(wt[ct],t));return it}}else{for(var Oe=e;this.evalNode(Oe.condition,t)&&(this.evalBlock({name:t.moduleName,type:"while",body:Oe.body},t),t.continueCalled&&(t.continueCalled=!1),!t.breakCalled););t.breakCalled&&(t.breakCalled=!1)}else{var re=e,_=this.evalNode(re.sourceArray,t);for(S=0;S<_.length&&(t.blockScope.set(re.itemVarName,_[S]),this.evalBlock({name:t.moduleName,type:"for",body:re.body},t),t.continueCalled&&(t.continueCalled=!1),!t.breakCalled);S++);t.breakCalled&&(t.breakCalled=!1)}else t.breakCalled=!0;else t.continueCalled=!0}else{var Z=e;try{this.evalBlock({name:t.moduleName,type:"trycatch",body:Z.tryBody},t),null!==(u=Z.elseBody)&&void 0!==u&&u.length&&this.evalBlock({name:t.moduleName,type:"trycatch",body:Z.elseBody},t)}catch(oe){var ye=oe instanceof je?oe.name:typeof oe,we=oe instanceof je?oe.message:null!==(h=oe?.message)&&void 0!==h?h:String(oe),fe=Z.exepts[0],Ne=fe.body,Le=t;Le.blockScope.set((null===(d=fe.error)||void 0===d?void 0:d.alias)||"error",{name:ye,message:we,line:oe instanceof je?oe.line:0,column:oe instanceof je?oe.column:0,moduleName:oe instanceof je?oe.module:0}),this.evalBlock({name:t.moduleName,type:"trycatch",body:Ne},Le),Le.blockScope.set((null===(y=fe.error)||void 0===y?void 0:y.alias)||"error",null)}finally{null!==(m=Z.finallyBody)&&void 0!==m&&m.length&&this.evalBlock({name:t.moduleName,type:"trycatch",body:Z.finallyBody},t)}}}else{var A=e,j=!0;if(this.evalNode(A.conditionNode,t))this.evalBlock({name:t.moduleName,type:"if",body:A.ifBody},t),j=!1;else if(null!==(l=A.elifs)&&void 0!==l&&l.length)for(var S=0;S<A.elifs.length;S++){var L=A.elifs[S];if(this.evalNode(L.conditionNode,t)){this.evalBlock({name:t.moduleName,type:"if",body:L.elifBody},t),j=!1;break}}j&&A.elseBody&&this.evalBlock({name:t.moduleName,type:"if",body:A.elseBody},t)}},n.prototype.resolveChainingCallsNode=function(e,t){for(var s=this.evalNode(e.innerNodes[0],t),l=1;l<e.innerNodes.length;l++){var u=e.innerNodes[l];if(e.innerNodes[l-1].nullCoelsing&&!s&&(s={}),"getSingleVar"===u.type)s=s[u.name];else if("chainingObjectAccess"===u.type)s=s[this.evalNode(u.indexerBody,t)];else{if("funcCall"!==u.type)throw Error("Can't resolve chainingCalls node");var d=u,y=s[d.name];if(null==y&&e.innerNodes[l-1].nullCoelsing){s=null;continue}if("function"!=typeof y)throw Error("'".concat(d.name,"' is not a function or not defined."));for(var m=[],N=0,A=d.paramNodes||[];N<A.length;N++)m.push(this.evalNode(A[N],t));s=this.invokeFunction(y.bind(s),m,{moduleName:t.moduleName,line:d.loc[0],column:d.loc[0]})}}return void 0===s?null:s},n}(),qt=function(){function n(){this.moduleParser=function(){return Promise.reject("Module parser is not registered!")},this.jsonFileLoader=function(){return Promise.reject("{}")}}return n.prototype.registerModuleParser=function(e){return this.moduleParser=e,this},n.prototype.registerJsonFileLoader=function(e){return this.jsonFileLoader=e,this},n.prototype.registerBlockContextFactory=function(e){return this.blockContextFactory=e,this},n.prototype.evalBlockAsync=function(e,t){var s,l;return C(this,void 0,void 0,function(){var u,h,d,y,m,N,A,j,S,L,M,O,W,Z,ye,we,J,Ee=this;return R(this,function(ce){switch(ce.label){case 0:for(u=null,h=function(fe){var Ne=fe,Me=Ne.isAsync?function(){for(var re=[],_=0;_<arguments.length;_++)re[_]=arguments[_];return C(Ee,void 0,void 0,function(){return R(this,function(k){switch(k.label){case 0:return[4,this.jspyFuncInvokerAsync.apply(this,H([Ne,t],re,!1))];case 1:return[2,k.sent()]}})})}:function(){for(var re,_=[],k=0;k<arguments.length;k++)_[k]=arguments[k];return(re=new mt).jspyFuncInvoker.apply(re,H([Ne,t],_,!1))};t.blockScope.set(Ne.funcAst.name,Me)},d=0,y=e?.funcs||[];d<y.length;d++)h(N=y[d]);m=0,ce.label=1;case 1:return m<e.body.length?(N=e.body[m],t.cancellationToken.cancel?(J=N.loc||[],t.cancellationToken.message||(t.cancellationToken.message="Cancelled. ".concat(t.moduleName,": ").concat(J[0],", ").concat(J[1])),[2,t.cancellationToken.message]):"comment"===N.type?[3,10]:"import"!==N.type?[3,7]:"json"!==(j=Ae((A=N).module.name))?[3,3]:(M=(L=JSON).parse,[4,this.jsonFileLoader(A.module.name)])):[3,11];case 2:return S=M.apply(L,[ce.sent()]),t.blockScope.set(A.module.alias||this.defaultModuleName(A.module.name),S),[3,10];case 3:if("jspyModule"!==j)return[3,10];ce.label=4;case 4:if("function"!=typeof this.blockContextFactory)throw new Error("blockContextFactory is not initialized");return[4,this.moduleParser(A.module.name)];case 5:return O=ce.sent(),W=this.blockContextFactory(A.module.name,O),[4,this.evalBlockAsync(O,W)];case 6:return ce.sent(),Z=t.blockScope.getScope(),!(null===(s=A.parts)||void 0===s)&&s.length||(Z={},t.blockScope.set(A.module.alias||this.defaultModuleName(A.module.name),Z)),this.assignFunctionsToScope(Z,W,O,null===(l=A.parts)||void 0===l?void 0:l.map(function(fe){return fe.name})),[3,10];case 7:return ce.trys.push([7,9,,10]),[4,this.evalNodeAsync(N,t)];case 8:return u=ce.sent(),t.returnCalled?(ye=t.returnObject,("func"==e.type||"module"==e.type)&&(t.returnCalled=!1,t.returnObject=null),[2,ye]):t.continueCalled||t.breakCalled?[3,11]:[3,10];case 9:throw we=ce.sent(),J=N.loc?N.loc:[0,0],we instanceof je||we instanceof ke?we:new ke(t.moduleName,J[0],J[1],we.message||we);case 10:return m++,[3,1];case 11:return[2,u]}})})},n.prototype.assignFunctionsToScope=function(e,t,s,l){for(var u=this,h=s.funcs.filter(function(m){var N;return!l||l.indexOf(null===(N=m.funcAst)||void 0===N?void 0:N.name)>=0}),d=function(m){var N=h[m],A=N.isAsync?function(){for(var j=[],S=0;S<arguments.length;S++)j[S]=arguments[S];return C(u,void 0,void 0,function(){return R(this,function(L){switch(L.label){case 0:return[4,this.jspyFuncInvokerAsync.apply(this,H([N,t],j,!1))];case 1:return[2,L.sent()]}})})}:function(){for(var j,S=[],L=0;L<arguments.length;L++)S[L]=arguments[L];return(j=new mt).jspyFuncInvoker.apply(j,H([N,t],S,!1))};e[N.funcAst.name]=A},y=0;y<h.length;y++)d(y)},n.prototype.defaultModuleName=function(e){return e.substring(e.lastIndexOf("/")+1,e.lastIndexOf("."))},n.prototype.jspyFuncInvokerAsync=function(e,t){for(var s,l=[],u=2;u<arguments.length;u++)l[u-2]=arguments[u];return C(this,void 0,void 0,function(){var h,d,y;return R(this,function(N){switch(N.label){case 0:for((h=Object.assign({},e.funcAst)).type="func",d=kt(t),y=0;y<(null===(s=e.params)||void 0===s?void 0:s.length);y++)d.blockScope.set(e.params[y],l?.length>y?l[y]:null);return[4,this.evalBlockAsync(h,d)];case 1:return[2,N.sent()]}})})},n.prototype.invokeFunctionAsync=function(e,t,s){return C(this,void 0,void 0,function(){return R(this,function(l){switch(l.label){case 0:return[4,e.apply(void 0,t)];case 1:return[2,l.sent()]}})})},n.prototype.evalNodeAsync=function(e,t){var s,l,u,h,d,y;return C(this,void 0,void 0,function(){var m,N,A,j,S,M,O,W,Z,Ee,ce,fe,Ne,Le,Me,re,_,k,Oe,ie,Se,te,Ce,Qe,Be,$e,xe,ue,be,he,se,Re,le,De,ve,tt,$,Pe,ze,st,Ie,lt,ut,et,it,ct,wt,Ye,Et,Ot,ft,tn,nn,bt,At,Ut,rn,on;return R(this,function(B){switch(B.label){case 0:if("import"===e.type)throw new Error("Import should be defined at the start");return"comment"===e.type?[2,null]:"if"!==e.type?[3,11]:(N=!0,[4,this.evalNodeAsync((m=e).conditionNode,t)]);case 1:return B.sent()?[4,this.evalBlockAsync({name:t.moduleName,type:"if",body:m.ifBody},t)]:[3,3];case 2:return B.sent(),N=!1,[3,8];case 3:if(null===(s=m.elifs)||void 0===s||!s.length)return[3,8];k=0,B.label=4;case 4:return k<m.elifs.length?[4,this.evalNodeAsync((A=m.elifs[k]).conditionNode,t)]:[3,8];case 5:return B.sent()?[4,this.evalBlockAsync({name:t.moduleName,type:"if",body:A.elifBody},t)]:[3,7];case 6:return B.sent(),N=!1,[3,8];case 7:return k++,[3,4];case 8:return N&&m.elseBody?[4,this.evalBlockAsync({name:t.moduleName,type:"if",body:m.elseBody},t)]:[3,10];case 9:B.sent(),B.label=10;case 10:return[2];case 11:return"raise"!==e.type?[3,13]:[4,this.evalNodeAsync((j=e).errorMessageAst,t)];case 12:throw S=B.sent(),new je(t.moduleName,j.loc[0],j.loc[1],j.errorName,S);case 13:if("tryExcept"!==e.type)return[3,24];M=e,B.label=14;case 14:return B.trys.push([14,18,20,23]),[4,this.evalBlockAsync({name:t.moduleName,type:"trycatch",body:M.tryBody},t)];case 15:return B.sent(),null!==(l=M.elseBody)&&void 0!==l&&l.length?[4,this.evalBlockAsync({name:t.moduleName,type:"trycatch",body:M.elseBody},t)]:[3,17];case 16:B.sent(),B.label=17;case 17:return[3,23];case 18:return O=B.sent(),W=O instanceof je?O.name:typeof O,Z=O instanceof je?O.message:null!==(u=O?.message)&&void 0!==u?u:String(O),ce=(Ee=M.exepts[0]).body,(fe=t).blockScope.set((null===(h=Ee.error)||void 0===h?void 0:h.alias)||"error",{name:W,message:Z,line:O instanceof je?O.line:0,column:O instanceof je?O.column:0,moduleName:O instanceof je?O.module:0}),[4,this.evalBlockAsync({name:t.moduleName,type:"trycatch",body:ce},fe)];case 19:return B.sent(),fe.blockScope.set((null===(d=Ee.error)||void 0===d?void 0:d.alias)||"error",null),[3,23];case 20:return null!==(y=M.finallyBody)&&void 0!==y&&y.length?[4,this.evalBlockAsync({name:t.moduleName,type:"trycatch",body:M.finallyBody},t)]:[3,22];case 21:B.sent(),B.label=22;case 22:return[7];case 23:return[2];case 24:return"return"!==e.type?[3,28]:(Ne=e,t.returnCalled=!0,Le=t,Ne.returnValue?[4,this.evalNodeAsync(Ne.returnValue,t)]:[3,26]);case 25:return Me=B.sent(),[3,27];case 26:Me=null,B.label=27;case 27:return Le.returnObject=Me,[2,t.returnObject];case 28:return"continue"===e.type?(t.continueCalled=!0,[2]):"break"===e.type?(t.breakCalled=!0,[2]):"for"!==e.type?[3,34]:[4,this.evalNodeAsync((re=e).sourceArray,t)];case 29:_=B.sent(),k=0,B.label=30;case 30:return k<_.length?(t.blockScope.set(re.itemVarName,_[k]),[4,this.evalBlockAsync({name:t.moduleName,type:"for",body:re.body},t)]):[3,33];case 31:if(B.sent(),t.continueCalled&&(t.continueCalled=!1),t.breakCalled)return[3,33];B.label=32;case 32:return k++,[3,30];case 33:return t.breakCalled&&(t.breakCalled=!1),[2];case 34:if("while"!==e.type)return[3,39];Oe=e,B.label=35;case 35:return[4,this.evalNodeAsync(Oe.condition,t)];case 36:return B.sent()?[4,this.evalBlockAsync({name:t.moduleName,type:"while",body:Oe.body},t)]:[3,38];case 37:return B.sent(),t.continueCalled&&(t.continueCalled=!1),t.breakCalled?[3,38]:[3,35];case 38:return t.breakCalled&&(t.breakCalled=!1),[2];case 39:if("const"===e.type)return[2,e.value];if("getSingleVar"===e.type){if(void 0===(Se=t.blockScope.get(ie=e.name)))throw";"===ie.charAt(ie.length-1)?new Error("Unexpected ';' in the end."):new Error("Variable '".concat(ie,"' is not defined."));return[2,Se]}return"binOp"!==e.type?[3,42]:[4,this.evalNodeAsync((te=e).left,t)];case 40:return Ce=B.sent(),[4,this.evalNodeAsync(te.right,t)];case 41:if(Qe=B.sent(),"function"==typeof(se=de.get(te.op)))return[2,se(Ce,Qe)];throw new Error("Unknown binary oprastion");case 42:if("logicalOp"!==e.type)return[3,46];Be=e,$e=0,xe=!0,B.label=43;case 43:return $e<Be.items.length?(ue=Be.items[$e++],[4,this.evalNodeAsync(ue.node,t)]):[3,45];case 44:return xe=B.sent(),"and"!==ue.op||xe?"or"===ue.op&&xe?[2,xe]:[3,43]:[2,!1];case 45:return[2,xe];case 46:if("arrowFuncDef"===e.type)return be=e,[2,function(){for(var Vt,an=[],Bt=0;Bt<arguments.length;Bt++)an[Bt]=arguments[Bt];return(Vt=new mt).jspyFuncInvoker.apply(Vt,H([be,t],an,!1))}];if("funcCall"!==e.type)return[3,52];if("function"!=typeof(se=t.blockScope.get((he=e).name)))throw Error("'".concat(he.name,"' is not a function or not defined."));Re=[],le=0,De=he.paramNodes||[],B.label=47;case 47:return le<De.length?(tt=(ve=Re).push,[4,this.evalNodeAsync(ft=De[le],t)]):[3,50];case 48:tt.apply(ve,[B.sent()]),B.label=49;case 49:return le++,[3,47];case 50:return[4,this.invokeFunctionAsync(se,Re,{moduleName:t.moduleName,line:he.loc[0],column:he.loc[0]})];case 51:return[2,B.sent()];case 52:return"assign"!==e.type?[3,62]:"getSingleVar"!==($=e).target.type?[3,54]:(ze=(Pe=t.blockScope).set,st=[$.target.name],[4,this.evalNodeAsync($.source,t)]);case 53:return ze.apply(Pe,st.concat([B.sent()])),[3,61];case 54:return"chainingCalls"!==$.target.type?[3,61]:(lt=new I((Ie=$.target).innerNodes.slice(0,Ie.innerNodes.length-1),Ie.loc),[4,this.evalNodeAsync(lt,t)]);case 55:return ut=B.sent(),it="","getSingleVar"!==(et=Ie.innerNodes[Ie.innerNodes.length-1]).type?[3,56]:(it=et.name,[3,59]);case 56:return"chainingObjectAccess"!==et.type?[3,58]:[4,this.evalNodeAsync(et.indexerBody,t)];case 57:return it=B.sent(),[3,59];case 58:throw Error("Not implemented Assign operation with chaining calls");case 59:return ct=ut,wt=it,[4,this.evalNodeAsync($.source,t)];case 60:ct[wt]=B.sent(),B.label=61;case 61:return[2,null];case 62:return"chainingCalls"!==e.type?[3,64]:[4,this.resolveChainingCallsNode(e,t)];case 63:return[2,B.sent()];case 64:if("createObject"!==e.type)return[3,70];Ye={},Et=0,Ot=e.props,B.label=65;case 65:return Et<Ot.length?(tn=Ye,[4,this.evalNodeAsync((ft=Ot[Et]).name,t)]):[3,69];case 66:return nn=B.sent(),[4,this.evalNodeAsync(ft.value,t)];case 67:tn[nn]=B.sent(),B.label=68;case 68:return Et++,[3,65];case 69:return[2,Ye];case 70:if("createArray"!==e.type)return[3,75];bt=[],At=0,Ut=e.items,B.label=71;case 71:return At<Ut.length?(on=(rn=bt).push,[4,this.evalNodeAsync(Ut[At],t)]):[3,74];case 72:on.apply(rn,[B.sent()]),B.label=73;case 73:return At++,[3,71];case 74:return[2,bt];case 75:return[2]}})})},n.prototype.resolveChainingCallsNode=function(e,t){return C(this,void 0,void 0,function(){var s,l,u,d,y,m,N,A,j,L,M;return R(this,function(O){switch(O.label){case 0:return[4,this.evalNodeAsync(e.innerNodes[0],t)];case 1:s=O.sent(),l=1,O.label=2;case 2:return l<e.innerNodes.length?(e.innerNodes[l-1].nullCoelsing&&!s&&(s={}),"getSingleVar"!==(u=e.innerNodes[l]).type?[3,3]:(s=s[u.name],[3,12])):[3,13];case 3:return"chainingObjectAccess"!==u.type?[3,5]:(d=s,[4,this.evalNodeAsync(u.indexerBody,t)]);case 4:return s=d[O.sent()],[3,12];case 5:if("funcCall"!==u.type)return[3,11];if(null==(m=s[(y=u).name])&&e.innerNodes[l-1].nullCoelsing)return s=null,[3,12];if("function"!=typeof m)throw Error("'".concat(y.name,"' is not a function or not defined."));N=[],A=0,j=y.paramNodes||[],O.label=6;case 6:return A<j.length?(M=(L=N).push,[4,this.evalNodeAsync(j[A],t)]):[3,9];case 7:M.apply(L,[O.sent()]),O.label=8;case 8:return A++,[3,6];case 9:return[4,this.invokeFunctionAsync(m.bind(s),N,{moduleName:t.moduleName,line:y.loc[0],column:y.loc[0]})];case 10:return s=O.sent(),[3,12];case 11:throw Error("Can't resolve chainingCalls node");case 12:return l++,[3,2];case 13:return[2,void 0===s?null:s]}})})},n}(),Lt={jsPython:function(){return"JSPython v2.1.10 (c) 2022 FalconSoft Ltd. All rights reserved."},dateTime:function(n){return void 0===n&&(n=null),function K(n){if(!n)return null;if("number"==typeof n)return new Date(n);if(n instanceof Date&&!isNaN(n.valueOf()))return n;if("string"!=typeof n)return null;var e=String(n);if(!e.length)return null;var t=function(y){if(!y||!y.length)return NaN;var m=parseInt(y,10);return isNaN(m)?y.startsWith("jan")?0:y.startsWith("feb")?1:y.startsWith("mar")?2:y.startsWith("apr")?3:y.startsWith("may")?4:y.startsWith("jun")?5:y.startsWith("jul")?6:y.startsWith("aug")?7:y.startsWith("sep")?8:y.startsWith("oct")?9:y.startsWith("nov")?10:y.startsWith("dec")?11:NaN:m-1},s=function(y){return y<100?y<68?y+2e3:y+1900:y},l=function(y,m,N,A,j,S){if(m>11||N>31||A>=60||j>=60||S>=60)return null;var L=new Date(y,m,N,A,j,S,0);return isNaN(L.valueOf())?null:L},u=e.replace("T"," ").toLowerCase().split(/[: /-]/),h=u.map(parseFloat),d=l(h[0],h[1]-1,h[2],h[3]||0,h[4]||0,h[5]||0);return d||(d=l(s(h[2]),t(u[1]),h[0],h[3]||0,h[4]||0,h[5]||0))||(d=l(s(h[2]),t(u[0]),s(h[1]),h[3]||0,h[4]||0,h[5]||0))?d:null}(n)||new Date},range:function _t(n,e,t){void 0===e&&(e=NaN),void 0===t&&(t=1);var s=[],l=isNaN(e);e=l?n:e;for(var u=n=l?0:n;u<e;)s.push(u),u+=t;return s},print:function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];return console.log.apply(console,n),n.length>0?n[0]:null},isNull:function(n,e){return void 0===e&&(e=null),null===e?null===n:n||e},isDate:function(n){return n instanceof Date},isFunction:function(n){return"function"==typeof n},isString:function(n){return"string"==typeof n},deleteProperty:function(n,e){return delete n[e]},Math,Object,Array,JSON,printExecutionContext:function(){},getExecutionContext:function(){return{}}},yt=function(){function n(){this.tokens=[]}return n.prototype.startLine=function(){return dt(this.tokens[0])},n.prototype.startColumn=function(){return St(this.tokens[0])},n.prototype.endLine=function(){return function sn(n){return n[1][3]}(this.tokens[this.tokens.length-1])},n.prototype.endColumn=function(){return function Kt(n){return n[1][4]}(this.tokens[this.tokens.length-1])},n}(),dn=function(){function n(){this._currentToken=null,this._moduleName=""}return n.prototype.parse=function(e,t,s){var l;void 0===t&&(t="main.jspy"),void 0===s&&(s="module"),this._moduleName=t;var u={name:t,type:s,funcs:[],body:[]};if(!e||!e.length)return u;try{var h=this.tokensToInstructionLines(e,1);this.instructionsToNodes(h,u)}catch(m){var d=m,y=null!==(l=this._currentToken)&&void 0!==l?l:{};throw new at(u.name,dt(y),St(y),d.message||String(d))}return u},n.prototype.instructionsToNodes=function(e,t){for(var s=this,l=function($,D){var Pe=s.tokensToInstructionLines($,dt($[D])),ze={name:t.name,body:[],funcs:[]};return s.instructionsToNodes(Pe,ze),ze.body},u=function($,D,Pe){return Pe.splice(0,Pe.length),_e($,D).forEach(function(ze){return Pe.push(ze)}),!!Pe.length},h=0;h<e.length;h++){for(var d=e[h],y=0;y<d.tokens.length;)Je(d.tokens[y])===ee.Comment?d.tokens.splice(y,1):y++;if(d.tokens.length){var m=d.tokens[0],N=d.tokens.length>1?d.tokens[1]:null;this._currentToken=m;var A=[];if(Je(m)===ee.Comment)t.body.push(new Ke(E(m),Q(m)));else if("def"===E(m)||"async"===E(m)&&"def"===E(N)){var S="async"===E(m),L=E(d.tokens[S?2:1]),O=qe(d.tokens.slice(d.tokens.findIndex(function($){return"("===E($)})+1,d.tokens.findIndex(function($){return")"===E($)})),",").map(function($){return E($[0])});if(-1===(W=We(d.tokens,function($){return":"===$})))throw"Can't find : for def";var Z=this.tokensToInstructionLines(d.tokens,dt(d.tokens[W+1])),ye={name:L,body:[],funcs:[]};this.instructionsToNodes(Z,ye),t.funcs.push(new cn(ye,O,S,Q(d.tokens[0])))}else if("if"===E(m)){if(-1===(W=We(d.tokens,function(D){return":"===D})))throw"Can't find : for if";for(var we=l(d.tokens,W+1),Ee=u(J=d.tokens.slice(1,W),U.Logical,A)?this.groupLogicalOperations(A,J):this.createExpressionNode(J),ce=[];e.length>h+1&&"elif"===E(e[h+1].tokens[0]);){var fe=e[++h],Ne=We(fe.tokens,function(D){return":"===D}),Le=fe.tokens.slice(1,W),Me=u(Le,U.Logical,A)?this.groupLogicalOperations(A,Le):this.createExpressionNode(Le),re=l(fe.tokens,Ne+1);ce.push(new jt(Me,re,Q(fe.tokens[0])))}var _=void 0;e.length>h+1&&"else"===E(e[h+1].tokens[0])&&":"===E(e[h+1].tokens[1])&&(_=l(e[h+1].tokens,2),h++),t.body.push(new Mt(Ee,we,ce,_,Q(m)))}else if("try"===E(m)){if(":"!==E(d.tokens[1]))throw"'try' statement should be followed by ':'";for(var k=l(d.tokens,2),Oe=[],ie=void(_=void 0);e.length>h+1&&("else"===E(e[h+1].tokens[0])||"except"===E(e[h+1].tokens[0])||"finally"===E(e[h+1].tokens[0]));){if("else"===E(e[h+1].tokens[0])){if(_)throw new Error("Only one 'else' is allowed in a 'try'");_=l(e[h+1].tokens,2)}if("finally"===E(e[h+1].tokens[0])){if(ie)throw new Error("Only one 'else' is allowed in a 'try'");ie=l(e[h+1].tokens,2)}if("except"===E(e[h+1].tokens[0])){var Se=We(e[h+1].tokens,function(D){return":"===D}),te={};if(2===Se)te.error={name:E(e[h+1].tokens[1])};else if(3===Se)te.error={name:E(e[h+1].tokens[1]),alias:E(e[h+1].tokens[2])};else if(4===Se)te.error={name:E(e[h+1].tokens[1]),alias:E(e[h+1].tokens[3])};else if(1!==Se)throw new Error("Incorrect 'except:' statement. Valid stats: (except: or except Error: or except Error as e:)");te.body=l(e[h+1].tokens,Se+1),Oe.push(te)}h++}if(!Oe.length)throw new Error("Except: is missing");t.body.push(new Qt(k,Oe,_,ie,Q(m)))}else if("continue"===E(m))t.body.push(new me);else if("break"===E(m))t.body.push(new Ge);else if("return"===E(m))t.body.push(new Gt(d.tokens.length>1?this.createExpressionNode(d.tokens.slice(1)):void 0,Q(m)));else if("raise"===E(m)){if(1===d.tokens.length)throw new Error("Incorrect 'raise' usage. Please specify error name and message ");var Ce=E(d.tokens[1]),Qe=this.createExpressionNode(d.tokens.slice(1));t.body.push(new Tt(Ce,Qe,Q(m)))}else if("for"===E(m)){if(-1===(W=We(d.tokens,function(D){return":"===D})))throw"Can't find : for if";var Be=E(d.tokens[1]),$e=this.createExpressionNode(d.tokens.slice(3,W)),xe=l(d.tokens,W+1);t.body.push(new $t($e,Be,xe,Q(m)))}else if("while"===E(m)){var W;if(-1===(W=We(d.tokens,function(ze){return":"===ze})))throw"Can't find : for [while]";Ee=u(J=d.tokens.slice(1,W),U.Logical,A)?this.groupLogicalOperations(A,J):this.createExpressionNode(J);var J,ue=l(d.tokens,W+1);t.body.push(new hn(Ee,ue,Q(m)))}else if("import"===E(m)){var be=We(d.tokens,function(D){return"as"===D});be<0&&(be=d.tokens.length);var he={name:d.tokens.slice(1,be).map(function(D){return E(D)}).join(""),alias:d.tokens.slice(be+1).map(function(D){return E(D)}).join("")||void 0};t.body.push(new Ct(he,ue={},void 0,Q(m)))}else if("from"===E(m)){var se=We(d.tokens,function(D){return"import"===D});if(se<0)throw Error("'import' must follow 'from'");var Re={name:d.tokens.slice(1,se).map(function(D){return E(D)}).join("")},le=qe(d.tokens.slice(se+1),",").map(function(D){return{name:E(D[0]),alias:3===D.length?E(D[2]):void 0}});t.body.push(new Ct(Re,ue={},le,Q(m)))}else if(u(d.tokens,U.Assignment,[])){var De=qe(d.tokens,"="),ve=this.createExpressionNode(De[0]),tt=this.createExpressionNode(De[1]);t.body.push(new Xe(ve,tt,Q(De[0][0])))}else u(d.tokens,U.Logical,A)?t.body.push(this.groupLogicalOperations(A,d.tokens)):t.body.push(this.createExpressionNode(d.tokens))}}},n.prototype.sliceWithBrackets=function(e,t,s){return"("===E(e[t])&&Je(e[t])!==ee.LiteralString&&(t++,s--),e.slice(t,s)},n.prototype.groupComparisonOperations=function(e,t){for(var l=null,u=0;u<e.length;u++){var h=E(t[e[u]]);l=l||this.createExpressionNode(this.sliceWithBrackets(t,0,e[u]));var y=this.createExpressionNode(this.sliceWithBrackets(t,e[u]+1,u+1<e.length?e[u+1]:t.length));l=new pt(l,h,y,Q(t[0]))}return l},n.prototype.groupLogicalOperations=function(e,t){for(var s=0,l=[],u=0;u<e.length;u++){var h=t[e[u]],d=this.sliceWithBrackets(t,s,e[u]);l.push({node:this.createExpressionNode(d),op:E(h)}),s=e[u]+1}return l.push({node:this.createExpressionNode(this.sliceWithBrackets(t,s,t.length))}),new Ht(l,Q(t[0]))},n.prototype.tokensToInstructionLines=function(e,t){for(var s=[],l=0,u=new yt,h=0;h<e.length;h++){var d=e[h],y=dt(d),m=St(d),N=E(d);if(this._currentToken=d,y>=t&&(l===m&&!")}]".includes(N)&&(s.push(u),u=new yt),u.tokens.push(d),0===l&&(l=m),m<l))break}return u.tokens.length&&s.push(u),s},n.prototype.createExpressionNode=function(e){var t=this;if(0===e.length)throw new Error("Tokens length can't empty.");var s=e[e.length-1];if(";"===E(s)&&Je(s)!==ee.LiteralString)throw new Error("Unexpected symbol ';' in the end");if(this._currentToken=e[0],1===e.length||2===e.length&&"?"===E(e[1])){var l=e[0],u=Je(l);if(function Ze(n){return n===ee.LiteralString||n===ee.LiteralNumber||n===ee.LiteralBool||n===ee.LiteralNull}(u))return new xt(l);if(u===ee.Identifier)return new Yt(l,2===e.length&&"?"===E(e[1])||void 0);throw Error("Unhandled single token: '".concat(JSON.stringify(l),"'"))}var h=qe(e,"=>");if(h.length>1){var y=qe("("===E(h[0][0])?h[0].splice(1,h[0].length-2):h[0],",").map(function(ve){return E(ve[0])}),m=this.tokensToInstructionLines(h[1],0),N={name:this._moduleName,body:[],funcs:[]};return this.instructionsToNodes(m,N),new fn(N,y,Q(e[0]))}var A=_e(e,U.Comparison);if(A.length)return this.groupComparisonOperations(A,e);var j=_e(e);if(j.length){for(var S=null,L=0;L<j.length;L++){var M=j[L],O=E(e[M]),W=L+1<j.length?j[L+1]:null,Z=null!==W?E(e[W]):null;if(null===W||"*"!==Z&&"/"!==Z){Ne=S?[]:this.sliceWithBrackets(e,0,M);var Le=this.sliceWithBrackets(e,M+1,W||e.length),Me=S||this.createExpressionNode(Ne),re=this.createExpressionNode(Le);S=new pt(Me,O,re,Q(e[0]))}else{var ye=null;do{var we=L+2<j.length?j[L+2]:null,J=this.sliceWithBrackets(e,M+1,W),Ee=this.sliceWithBrackets(e,W+1,we||e.length),ce=this.createExpressionNode(J),fe=this.createExpressionNode(Ee);ye=new pt(ce,Z,fe,Q(e[M+1])),Z=null!==(W=1+ ++L<j.length?j[L+1]:null)?E(e[W]):null}while(null!==W&&("*"===Z||"/"===Z));if(null===S){var Ne=this.sliceWithBrackets(e,0,M);S=this.createExpressionNode(Ne)}S=new pt(S,O,ye,Q(e[0]))}}if(null===S)throw Error("Can't create node ...");return S}var _=function ln(n){for(var e=[],t=0;t<n.length;t++){var s=E(n[t]);Je(n[t])!==ee.LiteralString&&("."===s?e.push(t):"("===s?t=Te(n,t,"(",")"):"["===s&&0===t?t=Te(n,t,"[","]"):"["===s&&0!==t?(e.push(t),t=Te(n,t,"[","]")):"{"===s&&(t=Te(n,t,"{","}")))}return e}(e);if(_.length>0){var k=rt(e,_),Oe=[];for(L=0;L<k.length;L++){var ie=k[L];if(0===L||"["!==E(ie[0]))Oe.push(this.createExpressionNode(ie));else{var Se="?"===E(ie[ie.length-1]);Se&&ie.pop();var te=ie.slice(1,ie.length-1),Ce=this.createExpressionNode(te);Oe.push(new vt(Ce,Se,Q(ie[0])))}}return new I(Oe,Q(e[0]))}if(e.length>2&&"("===E(e[1])){var Qe="?"===E(e[e.length-1]);Qe&&e.pop();var Be=E(e[0]),xe=(Ce=qe(te=e.slice(2,e.length-1),",").map(function($){return t.createExpressionNode($)}),new un(Be,Ce,Q(e[0])));return xe.nullCoelsing=Qe||void 0,xe}if("{"===E(e[0])&&"}"===E(e[e.length-1])){var ue=qe(e.splice(1,e.length-2),","),be=[];for(L=0;L<ue.length;L++)if(ue[L].length){var he=qe(ue[L],":");if(1===he.length){var se={name:new xt(he[0][0]),value:this.createExpressionNode(he[0])};be.push(se)}else{if(2!==he.length)throw Error("Incorrect JSON");var Re=null,le=he[0];if(1===le.length)Re=new xt(le[0]);else{if("["!==E(le[0])||"]"!==E(le[le.length-1]))throw new Error("Incorrect JSON. Can't resolve Key field. That should either constant or expression in []");Re=this.createExpressionNode(le.slice(1,le.length-1))}se={name:Re,value:this.createExpressionNode(he[1])},be.push(se)}}return new ne(be,Q(e[0]))}if("["===E(e[0])&&"]"===E(e[e.length-1])){var De=qe(e.splice(1,e.length-2),",").filter(function(ve){return ve?.length}).map(function(ve){return t.createExpressionNode(ve)});return new b(De,Q(e[0]))}throw Error("Undefined node '".concat(E(e[0]),"'."))},n}(),en={"\n":["\n"],"=":["=","==","=>"],"+":["+","++","+="],"-":["-","--","-="],"*":["*","**","*="],"/":["/","//","/="],".":["."],"?":["?"],"!":["!="],":":[":"],",":[","],">":[">",">="],"<":["<","<=","<>"],"(":["("],")":[")"],"{":["{"],"}":["}"],"[":["["],"]":["]"]},Dt=['"',"'","\\"],zt=["async","def","for","while","if","return","in"],gt=function(){function n(){this._startLine=1,this._startColumn=1,this._currentLine=1,this._currentColumn=1,this._tokenText="",this._cursor=0,this._script=""}return Object.defineProperty(n.prototype,"tokenText",{get:function(){return this._tokenText},set:function(e){!this._tokenText&&e&&(this._startLine=this._currentLine,this._startColumn=this._currentColumn),this._tokenText=e},enumerable:!1,configurable:!0}),n.prototype.tokenize=function(e){if(!e||!e.length)return[];e=e.replace(new RegExp("\t","g"),"  ").replace(new RegExp("\r","g"),""),this._script=e,this._cursor=0,this._startLine=1,this._startColumn=1,this._currentLine=1,this._currentColumn=1;for(var t=[],s=!0;"\n"===e[this._cursor];)this.incrementCursor(),s&&(this._currentLine++,s=!1),this._currentColumn=1;do{var l=e[this._cursor];if(" "!=l||0===this.tokenText.length)if(void 0===en[l]||this.isPartOfNumber(l,t))if("#"===l){for(var h=!0;"\n"!==e[this.incrementCursor()]&&(this.tokenText+=e[this._cursor],h&&(h=!1,this._startColumn=this._startColumn-1),!(this._cursor+1>=e.length)););this.tokenText=this.processToken(this.tokenText,t,!0,ee.Comment)}else if('"'===l||"'"===l){var d=l;if(this.tokenText=this.processToken(this.tokenText,t),e[this._cursor+1]===d&&e[this._cursor+2]===d){var y=this._currentLine,m=this._currentColumn;for(this.incrementCursor(2);this.tokenText+=e[this.incrementCursor()],!(this._cursor+3>=e.length||e[this._cursor+1]===d&&e[this._cursor+2]===d&&e[this._cursor+3]===d););this._startLine=y,this._startColumn=m,this.incrementCursor(3)}else{for(;e[this.incrementCursor()]!==d;)if("\\"===e[this._cursor]&&Dt.indexOf(e[this._cursor+1])>=0&&this._cursor++,this.tokenText+=e[this._cursor],this._cursor+1>=e.length)throw new Error("Line ".concat(this._startLine,": End of string missing."));this._startColumn--}0===this.tokenText.length&&(this._startLine=this._currentLine,this._startColumn=this._currentColumn),this.tokenText=this.processToken(this.tokenText,t,!0,ee.LiteralString)}else" "!=l&&(this.tokenText+=l);else{this.tokenText=this.processToken(this.tokenText,t),this.tokenText=l;var u=en[l];if(u.length>=1)for(;u.includes(this.tokenText+e[this._cursor+1]);)this.tokenText+=e[this.incrementCursor()];this.tokenText=this.processToken(this.tokenText,t,!1,ee.Operator)}else this.tokenText=this.processToken(this.tokenText,t)}while(this.incrementCursor()<e.length);return this.processToken(this.tokenText,t),t},n.prototype.incrementCursor=function(e){void 0===e&&(e=1);for(var t=0;t<e;t++)this._cursor=this._cursor+1,"\n"===this._script[this._cursor]?(this._currentLine++,this._currentColumn=0):this._currentColumn++;return this._cursor},n.prototype.recognizeToken=function(e,t){void 0===t&&(t=null);var s=e;return null===t&&("null"===e?(t=ee.LiteralNull,s=null):"true"===e||"false"===e?(t=ee.LiteralBool,s="true"===e):null!==this.parseNumberOrNull(e)?(t=ee.LiteralNumber,s=this.parseNumberOrNull(e)):t=zt.indexOf(e)>=0?ee.Keyword:ee.Identifier),{value:s,type:t}},n.prototype.processToken=function(e,t,s,l){if(void 0===s&&(s=!1),void 0===l&&(l=null),!e.length&&!s||"\n"===e)return"";var u=this.recognizeToken(e,l);return t.push([u.value,Uint16Array.of(u.type,this._startLine,this._startColumn,this._currentLine,this._currentColumn)]),""},n.prototype.parseNumberOrNull=function(e){if("number"==typeof e)return e;if(!e||"string"!=typeof e)return null;for(var t=(e=e.trim()).length-1;t>=0;t--){var s=e.charCodeAt(t);if((s<48||s>57)&&46!==s&&44!==s&&(45!==s||0!==t))return null}var l=parseFloat(e);return isNaN(l)?null:l},n.prototype.isPartOfNumber=function(e,t){if("-"===e&&!this.tokenText.length){var s=0!==t.length?t[t.length-1]:null;return null===s||Je(s)===ee.Operator&&")"!==E(s)}return"."===e&&null!==this.parseNumberOrNull(this.tokenText)},n}();function vn(){return pn.create()}var pn=function(){function n(){this.initialScope=V({},Lt),this._lastExecutionContext=null}return n.create=function(){return new n},Object.defineProperty(n.prototype,"initialExecutionContext",{get:function(){return this.initialScope},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"lastExecutionContext",{get:function(){return this._lastExecutionContext},enumerable:!1,configurable:!0}),n.prototype.cleanUp=function(){this._lastExecutionContext=null},n.prototype.jsPythonInfo=function(){return Lt.jsPython()},n.prototype.tokenize=function(e){return(new gt).tokenize(e)},n.prototype.parse=function(e,t){void 0===t&&(t="main.jspy");var s=new gt;return(new dn).parse(s.tokenize(e),t)},n.prototype.eval=function(e,t,s,l){void 0===t&&(t={}),void 0===s&&(s=""),void 0===l&&(l="main.jspy");var u="string"==typeof e?this.parse(e,l):e,h={moduleName:l,cancellationToken:{cancel:!1},blockScope:new Rt(t)};h.blockScope.set("printExecutionContext",function(){return console.log(h.blockScope.getScope())}),h.blockScope.set("getExecutionContext",function(){return h.blockScope.getScope()}),this._lastExecutionContext=h.blockScope.getScope();var d=(new mt).evalBlock(u,h);if(!s||!s.length)return d;var y=Array.isArray(s)?s[0]:s,m=Array.isArray(s)?s.slice(1):[],N=h.blockScope.get(y);if("function"!=typeof N)throw Error("Function ".concat(s," does not exists or not a function"));return N.apply(void 0,m)},n.prototype.evalAsync=function(e,t,s,l,u){return void 0===t&&(t={}),void 0===s&&(s=""),void 0===l&&(l="main.jspy"),C(this,void 0,void 0,function(){var h,d,y,m,N,A,j,S=this;return R(this,function(L){switch(L.label){case 0:return h="string"==typeof e?this.parse(e,l):e,d=new qt,y={moduleName:l,cancellationToken:{cancel:!1},blockScope:new Rt(t)},"function"==typeof u&&u(y),y.blockScope.set("printExecutionContext",function(){return console.log(y.blockScope.getScope())}),y.blockScope.set("getExecutionContext",function(){return y.blockScope.getScope()}),this._lastExecutionContext=y.blockScope.getScope(),[4,d.registerJsonFileLoader(function(M){return C(S,void 0,void 0,function(){return R(this,function(O){switch(O.label){case 0:return[4,this.moduleLoader?this.moduleLoader(M):Promise.reject("ModuleLoader is not registered")];case 1:return[2,O.sent()]}})})}).registerModuleParser(function(M){return C(S,void 0,void 0,function(){return R(this,function(O){switch(O.label){case 0:return[4,this.moduleParser(M)];case 1:return[2,O.sent()]}})})}).registerBlockContextFactory(function(M,O){var W=S.assignImportContext(O,t),Z={moduleName:M,blockScope:new Rt(W),cancellationToken:y.cancellationToken};return Z.blockScope.set("printExecutionContext",function(){return console.log(Z.blockScope.getScope())}),Z.blockScope.set("getExecutionContext",function(){return Z.blockScope.getScope()}),Z}).evalBlockAsync(h,y)];case 1:return m=L.sent(),s&&s.length?[3,2]:[2,m];case 2:if(N=Array.isArray(s)?s[0]:s,A=Array.isArray(s)?s.slice(1):[],"function"!=typeof(j=y.blockScope.get(N)))throw Error("Function ".concat(s," does not exists or not a function"));return[4,j.apply(void 0,A)];case 3:return[2,L.sent()]}})})},n.prototype.evaluate=function(e,t,s,l,u){return void 0===t&&(t={}),void 0===s&&(s=""),void 0===l&&(l="main.jspy"),C(this,void 0,void 0,function(){var h,d;return R(this,function(y){switch(y.label){case 0:return e&&e.length?(h=this.parse(e,l),t=this.assignImportContext(h,t=t&&"object"==typeof t?t:{}),d=V(V({},this.initialScope),t),[4,this.evalAsync(h,d,s,l,u)]):[2,null];case 1:return[2,y.sent()]}})})},n.prototype.registerPackagesLoader=function(e){if("function"!=typeof e)throw Error("PackagesLoader");return this.packageLoader=e,this},n.prototype.registerModuleLoader=function(e){if("function"!=typeof e)throw Error("ModuleLoader should be a function");return this.moduleLoader=e,this},n.prototype.addFunction=function(e,t){return this.initialScope[e]=t,this},n.prototype.assignGlobalContext=function(e){return Object.assign(this.initialScope,e),this},n.prototype.hasFunction=function(e,t){return void 0===e&&(e=""),e.indexOf("def ".concat(t))>-1},n.prototype.assignImportContext=function(e,t){var u=e.body.filter(function(d){return"import"===d.type}).filter(function(d){return"jsPackage"===Ae(d.module.name)}).map(function(d){return function(d){var y;return{name:d.module.name,as:d.module.alias,properties:null===(y=d.parts)||void 0===y?void 0:y.map(function(m){return{name:m.name,as:m.alias}})}}(d)});if(u.length&&this.packageLoader){var h=this.packageResolver(u);t=V(V({},t),h)}return t},n.prototype.moduleParser=function(e){return C(this,void 0,void 0,function(){var t;return R(this,function(s){switch(s.label){case 0:if(!this.moduleLoader)throw new Error("Module Loader is not registered");return[4,this.moduleLoader(e)];case 1:return t=s.sent(),[2,this.parse(t,e)]}})})},n.prototype.packageResolver=function(e){var t=this;if(!this.packageLoader)throw Error("Package loader not provided.");var s={};return e.forEach(function(l){var u=l.name,h=l.as,d=l.properties,y=t.packageLoader&&t.packageLoader(u)||{};d?.length?d.forEach(function(m){s[m.as||m.name]=y[m.name]}):h?s[h]=y:s[u]=y,h&&(s[h]=y)}),s},n}()},1519:(nt,pe,p)=>{function ae(F,V,C){if(!V.has(F))throw new TypeError("attempted to "+C+" private field on non-instance");return V.get(F)}p.d(pe,{Z:()=>ae})},18916:(nt,pe,p)=>{p.d(pe,{Z:()=>V});var ae=p(26983),F=p(1519);function V(C,R){var H=(0,F.Z)(C,R,"get");return(0,ae.Z)(C,H)}},85926:(nt,pe,p)=>{function F(V,C,R){(function ae(V,C){if(C.has(V))throw new TypeError("Cannot initialize the same private elements twice on an object")})(V,C),C.set(V,R)}p.d(pe,{Z:()=>F})},42793:(nt,pe,p)=>{p.d(pe,{Z:()=>V});var ae=p(86011),F=p(1519);function V(C,R,H){var K=(0,F.Z)(C,R,"set");return(0,ae.Z)(C,K,H),H}}}]);