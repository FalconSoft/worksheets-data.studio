"use strict";(self.webpackChunkworksheets_app_runtime=self.webpackChunkworksheets_app_runtime||[]).push([[2881],{60674:(ot,Ne,m)=>{m.d(Ne,{oz:()=>Ir,P0:()=>Pr,Pi:()=>Fr});var le={};m.r(le),m.d(le,{ArgumentOutOfRangeError:()=>Ct,AsyncSubject:()=>Ue,BehaviorSubject:()=>Ft.X,ConnectableObservable:()=>Ie.c,EMPTY:()=>_e.E,EmptyError:()=>Mt.K,NEVER:()=>p,NotFoundError:()=>$t,Notification:()=>Xe,NotificationKind:()=>jt,ObjectUnsubscribedError:()=>hn.N,Observable:()=>H.y,ReplaySubject:()=>ze,Scheduler:()=>ln.b,SequenceError:()=>Rt,Subject:()=>de.x,Subscriber:()=>xt.Lv,Subscription:()=>nt.w0,TimeoutError:()=>Ht,UnsubscriptionError:()=>Dt.B,VirtualAction:()=>Fe,VirtualTimeScheduler:()=>qe,animationFrame:()=>Gt.r,animationFrameScheduler:()=>Gt.Z,animationFrames:()=>Se,asap:()=>ee.e,asapScheduler:()=>ee.E,async:()=>Ve.P,asyncScheduler:()=>Ve.z,audit:()=>we.U,auditTime:()=>xe.e,bindCallback:()=>dn,bindNodeCallback:()=>en,buffer:()=>Te,bufferCount:()=>_,bufferTime:()=>Y,bufferToggle:()=>je,bufferWhen:()=>ie,catchError:()=>be.K,combineAll:()=>Qe,combineLatest:()=>zt.a,combineLatestAll:()=>Le,combineLatestWith:()=>fe,concat:()=>Ut.z,concatAll:()=>Ee.u,concatMap:()=>he.b,concatMapTo:()=>ae,concatWith:()=>se,config:()=>ce.config,connect:()=>tt,connectable:()=>pn,count:()=>C,debounce:()=>Be,debounceTime:()=>De.b,defaultIfEmpty:()=>at.d,defer:()=>yt.P,delay:()=>rt,delayWhen:()=>et,dematerialize:()=>ut,distinct:()=>gt,distinctUntilChanged:()=>oe.x,distinctUntilKeyChanged:()=>$e,elementAt:()=>ct,empty:()=>_e.c,endWith:()=>tn,every:()=>nn,exhaust:()=>Vt,exhaustAll:()=>bt,exhaustMap:()=>Nt,expand:()=>rn,filter:()=>wt.h,finalize:()=>on.x,find:()=>B,findIndex:()=>an,first:()=>Pt.P,firstValueFrom:()=>fn,flatMap:()=>Pn,forkJoin:()=>n.D,from:()=>e.D,fromEvent:()=>t.R,fromEventPattern:()=>s.R,generate:()=>u,groupBy:()=>xn,identity:()=>Ke.y,ignoreElements:()=>st,iif:()=>h,interval:()=>d.F,isEmpty:()=>jn,isObservable:()=>un.b,last:()=>Ln.Z,lastValueFrom:()=>cn.n,map:()=>Et.U,mapTo:()=>lt.h,materialize:()=>On,max:()=>Bn,merge:()=>y.T,mergeAll:()=>yn.J,mergeMap:()=>te.z,mergeMapTo:()=>In,mergeScan:()=>Fn,mergeWith:()=>Tn,min:()=>Mn,multicast:()=>mn,never:()=>N,noop:()=>ve.Z,observable:()=>He.L,observeOn:()=>_t.Q,of:()=>We.of,onErrorResumeNext:()=>S,onErrorResumeNextWith:()=>Cn,pairs:()=>L,pairwise:()=>Rn.G,partition:()=>M.u,pipe:()=>Tt.z,pluck:()=>Dn,publish:()=>zn,publishBehavior:()=>Un,publishLast:()=>Vn,publishReplay:()=>Zn,queue:()=>sn,queueScheduler:()=>St,race:()=>O,raceWith:()=>Jn,range:()=>V,reduce:()=>Q.u,refCount:()=>$n.x,repeat:()=>Xn,repeatWhen:()=>Kn,retry:()=>Gn,retryWhen:()=>Qn,sample:()=>gn,sampleTime:()=>Yn,scan:()=>Hn.R,scheduled:()=>ue.x,sequenceEqual:()=>kn,share:()=>En.B,shareReplay:()=>qn,single:()=>_n,skip:()=>er.T,skipLast:()=>tr,skipUntil:()=>nr,skipWhile:()=>rr,startWith:()=>ir.O,subscribeOn:()=>qt.R,switchAll:()=>or,switchMap:()=>Jt.w,switchMapTo:()=>ar,switchScan:()=>sr,take:()=>Pe.q,takeLast:()=>lr.h,takeUntil:()=>ur.R,takeWhile:()=>cr,tap:()=>fr.b,throttle:()=>bn,throttleTime:()=>hr,throwError:()=>k._,throwIfEmpty:()=>Bt.T,timeInterval:()=>dr,timeout:()=>vt,timeoutWith:()=>pr,timer:()=>pe.H,timestamp:()=>mr,toArray:()=>Me.q,using:()=>ye,window:()=>yr,windowCount:()=>gr,windowTime:()=>wr,windowToggle:()=>Er,windowWhen:()=>Nr,withLatestFrom:()=>br,zip:()=>ge,zipAll:()=>Ar,zipWith:()=>xr});var F=m(61794),K=m(38325),D=m(61862),U=m(3202),q=m(46681),H=m(65592),Ie=m(93168),He=m(14850);const At={now:()=>(At.delegate||performance).now(),delegate:void 0};var ke=m(34722);function Se(i){return i?z(i):Kt}function z(i){return new H.y(r=>{const o=i||At,a=o.now();let c=0;const f=()=>{r.closed||(c=ke.l.requestAnimationFrame(v=>{c=0;const w=o.now();r.next({timestamp:i?w:v,elapsed:w-a}),f()}))};return f(),()=>{c&&ke.l.cancelAnimationFrame(c)}})}const Kt=z();var de=m(32013),Ft=m(65619),Wt=m(84552);class ze extends de.x{constructor(r=1/0,o=1/0,a=Wt.l){super(),this._bufferSize=r,this._windowTime=o,this._timestampProvider=a,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=o===1/0,this._bufferSize=Math.max(1,r),this._windowTime=Math.max(1,o)}next(r){const{isStopped:o,_buffer:a,_infiniteTimeWindow:c,_timestampProvider:f,_windowTime:v}=this;o||(a.push(r),!c&&a.push(f.now()+v)),this._trimBuffer(),super.next(r)}_subscribe(r){this._throwIfClosed(),this._trimBuffer();const o=this._innerSubscribe(r),{_infiniteTimeWindow:a,_buffer:c}=this,f=c.slice();for(let v=0;v<f.length&&!r.closed;v+=a?1:2)r.next(f[v]);return this._checkFinalizedStatuses(r),o}_trimBuffer(){const{_bufferSize:r,_timestampProvider:o,_buffer:a,_infiniteTimeWindow:c}=this,f=(c?1:2)*r;if(r<1/0&&f<a.length&&a.splice(0,a.length-f),!c){const v=o.now();let w=0;for(let g=1;g<a.length&&a[g]<=v;g+=2)w=g;w&&a.splice(0,w+1)}}}class Ue extends de.x{constructor(){super(...arguments),this._value=null,this._hasValue=!1,this._isComplete=!1}_checkFinalizedStatuses(r){const{hasError:o,_hasValue:a,_value:c,thrownError:f,isStopped:v,_isComplete:w}=this;o?r.error(f):(v||w)&&(a&&r.next(c),r.complete())}next(r){this.isStopped||(this._value=r,this._hasValue=!0)}complete(){const{_hasValue:r,_value:o,_isComplete:a}=this;a||(this._isComplete=!0,r&&super.next(o),super.complete())}}var ee=m(76410),Ve=m(16321),Ze=m(41954),G=m(75817);const St=new class ht extends G.v{}(class E extends Ze.o{constructor(r,o){super(r,o),this.scheduler=r,this.work=o}schedule(r,o=0){return o>0?super.schedule(r,o):(this.delay=o,this.state=r,this.scheduler.flush(this),this)}execute(r,o){return o>0||this.closed?super.execute(r,o):this._execute(r,o)}requestAsyncId(r,o,a=0){return null!=a&&a>0||null==a&&this.delay>0?super.requestAsyncId(r,o,a):(r.flush(this),0)}}),sn=St;var Gt=m(41614),nt=m(55113);let qe=(()=>{class i extends G.v{constructor(o=Fe,a=1/0){super(o,()=>this.frame),this.maxFrames=a,this.frame=0,this.index=-1}flush(){const{actions:o,maxFrames:a}=this;let c,f;for(;(f=o[0])&&f.delay<=a&&(o.shift(),this.frame=f.delay,!(c=f.execute(f.state,f.delay))););if(c){for(;f=o.shift();)f.unsubscribe();throw c}}}return i.frameTimeFactor=10,i})();class Fe extends Ze.o{constructor(r,o,a=(r.index+=1)){super(r,o),this.scheduler=r,this.work=o,this.index=a,this.active=!0,this.index=r.index=a}schedule(r,o=0){if(Number.isFinite(o)){if(!this.id)return super.schedule(r,o);this.active=!1;const a=new Fe(this.scheduler,this.work);return this.add(a),a.schedule(r,o)}return nt.w0.EMPTY}requestAsyncId(r,o,a=0){this.delay=r.frame+a;const{actions:c}=r;return c.push(this),c.sort(Fe.sortActions),1}recycleAsyncId(r,o,a=0){}_execute(r,o){if(!0===this.active)return super._execute(r,o)}static sortActions(r,o){return r.delay===o.delay?r.index===o.index?0:r.index>o.index?1:-1:r.delay>o.delay?1:-1}}var ln=m(36850),xt=m(80305),_e=m(36232),We=m(22096),k=m(58504),Je=m(84674),jt=function(i){return i.NEXT="N",i.ERROR="E",i.COMPLETE="C",i}(jt||{});class Xe{constructor(r,o,a){this.kind=r,this.value=o,this.error=a,this.hasValue="N"===r}observe(r){return Qt(this,r)}do(r,o,a){const{kind:c,value:f,error:v}=this;return"N"===c?r?.(f):"E"===c?o?.(v):a?.()}accept(r,o,a){var c;return(0,Je.m)(null===(c=r)||void 0===c?void 0:c.next)?this.observe(r):this.do(r,o,a)}toObservable(){const{kind:r,value:o,error:a}=this,c="N"===r?(0,We.of)(o):"E"===r?(0,k._)(()=>a):"C"===r?_e.E:0;if(!c)throw new TypeError(`Unexpected notification kind ${r}`);return c}static createNext(r){return new Xe("N",r)}static createError(r){return new Xe("E",void 0,r)}static createComplete(){return Xe.completeNotification}}function Qt(i,r){var o,a,c;const{kind:f,value:v,error:w}=i;if("string"!=typeof f)throw new TypeError('Invalid notification, missing "kind"');"N"===f?null===(o=r.next)||void 0===o||o.call(r,v):"E"===f?null===(a=r.error)||void 0===a||a.call(r,w):null===(c=r.complete)||void 0===c||c.call(r)}Xe.completeNotification=new Xe("C");var Tt=m(88407),ve=m(72420),Ke=m(42737),un=m(2664),cn=m(10708),Mt=m(46973);function fn(i,r){const o="object"==typeof r;return new Promise((a,c)=>{const f=new xt.Hp({next:v=>{a(v),f.unsubscribe()},error:c,complete:()=>{o?a(r.defaultValue):c(new Mt.K)}});i.subscribe(f)})}var Lt=m(82306);const Ct=(0,Lt.d)(i=>function(){i(this),this.name="ArgumentOutOfRangeError",this.message="argument out of range"}),$t=(0,Lt.d)(i=>function(o){i(this),this.name="NotFoundError",this.message=o});var hn=m(66149);const Rt=(0,Lt.d)(i=>function(o){i(this),this.name="SequenceError",this.message=o});var Yt=m(70093),I=m(79360),ne=m(54829),b=m(8251),dt=m(27103);const Ht=(0,Lt.d)(i=>function(o=null){i(this),this.message="Timeout has occurred",this.name="TimeoutError",this.info=o});function vt(i,r){const{first:o,each:a,with:c=kt,scheduler:f=r??Ve.z,meta:v=null}=(0,Yt.q)(i)?{first:i}:"number"==typeof i?{each:i}:i;if(null==o&&null==a)throw new TypeError("No timeout provided.");return(0,I.e)((w,g)=>{let x,P,J=null,$=0;const me=T=>{P=(0,dt.f)(g,f,()=>{try{x.unsubscribe(),(0,ne.Xf)(c({meta:v,lastValue:J,seen:$})).subscribe(g)}catch(R){g.error(R)}},T)};x=w.subscribe((0,b.x)(g,T=>{P?.unsubscribe(),$++,g.next(J=T),a>0&&me(a)},void 0,void 0,()=>{P?.closed||P?.unsubscribe(),J=null})),!$&&me(null!=o?"number"==typeof o?o:+o-f.now():a)})}function kt(i){throw new Ht(i)}var Dt=m(59732),pt=m(50671),qt=m(85137),Ot=m(97400),_t=m(43093);function mt(i,r,o,a){if(o){if(!(0,pt.K)(o))return function(...c){return mt(i,r,a).apply(this,c).pipe((0,Ot.Z)(o))};a=o}return a?function(...c){return mt(i,r).apply(this,c).pipe((0,qt.R)(a),(0,_t.Q)(a))}:function(...c){const f=new Ue;let v=!0;return new H.y(w=>{const g=f.subscribe(w);if(v){v=!1;let x=!1,P=!1;r.apply(this,[...c,(...J)=>{if(i){const $=J.shift();if(null!=$)return void f.error($)}f.next(1<J.length?J:J[0]),P=!0,x&&f.complete()}]),P&&f.complete(),x=!0}return g})}}function dn(i,r,o){return mt(!1,i,r,o)}function en(i,r,o){return mt(!0,i,r,o)}var zt=m(52572),Ut=m(30034),yt=m(74911);const vn={connector:()=>new de.x,resetOnDisconnect:!0};function pn(i,r=vn){let o=null;const{connector:a,resetOnDisconnect:c=!0}=r;let f=a();const v=new H.y(w=>f.subscribe(w));return v.connect=()=>((!o||o.closed)&&(o=(0,yt.P)(()=>i).subscribe(f),c&&o.add(()=>f=a())),o),v}var n=m(9315),e=m(72664),t=m(92438),s=m(20081),l=m(59476);function u(i,r,o,a,c){let f,v;function*w(){for(let g=v;!r||r(g);g=o(g))yield f(g)}return 1===arguments.length?({initialState:v,condition:r,iterate:o,resultSelector:f=Ke.y,scheduler:c}=i):(v=i,!a||(0,pt.K)(a)?(f=Ke.y,c=a):f=a),(0,yt.P)(c?()=>(0,l.Q)(w(),c):w)}function h(i,r,o){return(0,yt.P)(()=>i()?r:o)}var d=m(91687),y=m(63019);const p=new H.y(ve.Z);function N(){return p}const{isArray:A}=Array;function j(i){return 1===i.length&&A(i[0])?i[0]:i}function S(...i){const r=j(i);return new H.y(o=>{let a=0;const c=()=>{if(a<r.length){let f;try{f=(0,ne.Xf)(r[a++])}catch{return void c()}const v=new b.Q(o,void 0,ve.Z,ve.Z);f.subscribe(v),v.add(c)}else o.complete()};c()})}function L(i,r){return(0,e.D)(Object.entries(i),r)}var M=m(23889);function O(...i){return 1===(i=j(i)).length?(0,ne.Xf)(i[0]):new H.y(W(i))}function W(i){return r=>{let o=[];for(let a=0;o&&!r.closed&&a<i.length;a++)o.push((0,ne.Xf)(i[a]).subscribe((0,b.x)(r,c=>{if(o){for(let f=0;f<o.length;f++)f!==a&&o[f].unsubscribe();o=null}r.next(c)})))}}function V(i,r,o){if(null==r&&(r=i,i=0),r<=0)return _e.E;const a=r+i;return new H.y(o?c=>{let f=i;return o.schedule(function(){f<a?(c.next(f++),this.schedule()):c.complete()})}:c=>{let f=i;for(;f<a&&!c.closed;)c.next(f++);c.complete()})}var pe=m(99080);function ye(i,r){return new H.y(o=>{const a=i(),c=r(a);return(c?(0,ne.Xf)(c):_e.E).subscribe(o),()=>{a&&a.unsubscribe()}})}var Z=m(79940);function ge(...i){const r=(0,Z.jO)(i),o=j(i);return o.length?new H.y(a=>{let c=o.map(()=>[]),f=o.map(()=>!1);a.add(()=>{c=f=null});for(let v=0;!a.closed&&v<o.length;v++)(0,ne.Xf)(o[v]).subscribe((0,b.x)(a,w=>{if(c[v].push(w),c.every(g=>g.length)){const g=c.map(x=>x.shift());a.next(r?r(...g):g),c.some((x,P)=>!x.length&&f[P])&&a.complete()}},()=>{f[v]=!0,!c[v].length&&a.complete()}));return()=>{c=f=null}}):_e.E}var ue=m(20252),ce=m(82653),we=m(26301),xe=m(70671);function Te(i){return(0,I.e)((r,o)=>{let a=[];return r.subscribe((0,b.x)(o,c=>a.push(c),()=>{o.next(a),o.complete()})),i.subscribe((0,b.x)(o,()=>{const c=a;a=[],o.next(c)},ve.Z)),()=>{a=null}})}var re=m(49039);function _(i,r=null){return r=r??i,(0,I.e)((o,a)=>{let c=[],f=0;o.subscribe((0,b.x)(a,v=>{let w=null;f++%r==0&&c.push([]);for(const g of c)g.push(v),i<=g.length&&(w=w??[],w.push(g));if(w)for(const g of w)(0,re.P)(c,g),a.next(g)},()=>{for(const v of c)a.next(v);a.complete()},void 0,()=>{c=null}))})}function Y(i,...r){var o,a;const c=null!==(o=(0,Z.yG)(r))&&void 0!==o?o:Ve.z,f=null!==(a=r[0])&&void 0!==a?a:null,v=r[1]||1/0;return(0,I.e)((w,g)=>{let x=[],P=!1;const J=T=>{const{buffer:R,subs:X}=T;X.unsubscribe(),(0,re.P)(x,T),g.next(R),P&&$()},$=()=>{if(x){const T=new nt.w0;g.add(T);const X={buffer:[],subs:T};x.push(X),(0,dt.f)(T,c,()=>J(X),i)}};null!==f&&f>=0?(0,dt.f)(g,c,$,f,!0):P=!0,$();const me=(0,b.x)(g,T=>{const R=x.slice();for(const X of R){const{buffer:Ye}=X;Ye.push(T),v<=Ye.length&&J(X)}},()=>{for(;x?.length;)g.next(x.shift().buffer);me?.unsubscribe(),g.complete(),g.unsubscribe()},void 0,()=>x=null);w.subscribe(me)})}function je(i,r){return(0,I.e)((o,a)=>{const c=[];(0,ne.Xf)(i).subscribe((0,b.x)(a,f=>{const v=[];c.push(v);const w=new nt.w0;w.add((0,ne.Xf)(r(f)).subscribe((0,b.x)(a,()=>{(0,re.P)(c,v),a.next(v),w.unsubscribe()},ve.Z)))},ve.Z)),o.subscribe((0,b.x)(a,f=>{for(const v of c)v.push(f)},()=>{for(;c.length>0;)a.next(c.shift());a.complete()}))})}function ie(i){return(0,I.e)((r,o)=>{let a=null,c=null;const f=()=>{c?.unsubscribe();const v=a;a=[],v&&o.next(v),(0,ne.Xf)(i()).subscribe(c=(0,b.x)(o,f,ve.Z))};f(),r.subscribe((0,b.x)(o,v=>a?.push(v),()=>{a&&o.next(a),o.complete()},void 0,()=>a=c=null))})}var be=m(26306),te=m(9769),Me=m(81791);function Ge(i,r){return(0,Tt.z)((0,Me.q)(),(0,te.z)(o=>i(o)),r?(0,Ot.Z)(r):Ke.y)}function Le(i){return Ge(zt.a,i)}const Qe=Le;function Ae(...i){const r=(0,Z.jO)(i);return r?(0,Tt.z)(Ae(...i),(0,Ot.Z)(r)):(0,I.e)((o,a)=>{(0,zt.l)([o,...j(i)])(a)})}function fe(...i){return Ae(...i)}var Ee=m(1948),he=m(76328);function ae(i,r){return(0,Je.m)(r)?(0,he.b)(()=>i,r):(0,he.b)(()=>i)}function se(...i){return function Ce(...i){const r=(0,Z.yG)(i);return(0,I.e)((o,a)=>{(0,Ee.u)()((0,e.D)([o,...i],r)).subscribe(a)})}(...i)}const Oe={connector:()=>new de.x};function tt(i,r=Oe){const{connector:o}=r;return(0,I.e)((a,c)=>{const f=o();(0,ne.Xf)(i(function Re(i){return new H.y(r=>i.subscribe(r))}(f))).subscribe(c),c.add(a.subscribe(f))})}var Q=m(43801);function C(i){return(0,Q.u)((r,o,a)=>!i||i(o,a)?r+1:r,0)}function Be(i){return(0,I.e)((r,o)=>{let a=!1,c=null,f=null;const v=()=>{if(f?.unsubscribe(),f=null,a){a=!1;const w=c;c=null,o.next(w)}};r.subscribe((0,b.x)(o,w=>{f?.unsubscribe(),a=!0,c=w,f=(0,b.x)(o,v,ve.Z),(0,ne.Xf)(i(w)).subscribe(f)},()=>{v(),o.complete()},void 0,()=>{c=f=null}))})}var De=m(83620),at=m(43572),Pe=m(48180);function st(){return(0,I.e)((i,r)=>{i.subscribe((0,b.x)(r,ve.Z))})}var lt=m(21441);function et(i,r){return r?o=>(0,Ut.z)(r.pipe((0,Pe.q)(1),st()),o.pipe(et(i))):(0,te.z)((o,a)=>i(o,a).pipe((0,Pe.q)(1),(0,lt.h)(o)))}function rt(i,r=Ve.z){const o=(0,pe.H)(i,r);return et(()=>o)}function ut(){return(0,I.e)((i,r)=>{i.subscribe((0,b.x)(r,o=>Qt(o,r)))})}function gt(i,r){return(0,I.e)((o,a)=>{const c=new Set;o.subscribe((0,b.x)(a,f=>{const v=i?i(f):f;c.has(v)||(c.add(v),a.next(f))})),r?.subscribe((0,b.x)(a,()=>c.clear(),ve.Z))})}var oe=m(93997);function $e(i,r){return(0,oe.x)((o,a)=>r?r(o[i],a[i]):o[i]===a[i])}var wt=m(32181),Bt=m(3026);function ct(i,r){if(i<0)throw new Ct;const o=arguments.length>=2;return a=>a.pipe((0,wt.h)((c,f)=>f===i),(0,Pe.q)(1),o?(0,at.d)(r):(0,Bt.T)(()=>new Ct))}function tn(...i){return r=>(0,Ut.z)(r,(0,We.of)(...i))}function nn(i,r){return(0,I.e)((o,a)=>{let c=0;o.subscribe((0,b.x)(a,f=>{i.call(r,f,c++,o)||(a.next(!1),a.complete())},()=>{a.next(!0),a.complete()}))})}var Et=m(37398);function Nt(i,r){return r?o=>o.pipe(Nt((a,c)=>(0,ne.Xf)(i(a,c)).pipe((0,Et.U)((f,v)=>r(a,f,c,v))))):(0,I.e)((o,a)=>{let c=0,f=null,v=!1;o.subscribe((0,b.x)(a,w=>{f||(f=(0,b.x)(a,void 0,()=>{f=null,v&&a.complete()}),(0,ne.Xf)(i(w,c++)).subscribe(f))},()=>{v=!0,!f&&a.complete()}))})}function bt(){return Nt(Ke.y)}const Vt=bt;var ft=m(80564);function rn(i,r=1/0,o){return r=(r||0)<1?1/0:r,(0,I.e)((a,c)=>(0,ft.p)(a,c,i,r,void 0,!0,o))}var on=m(64716);function B(i,r){return(0,I.e)(Zt(i,r,"value"))}function Zt(i,r,o){const a="index"===o;return(c,f)=>{let v=0;c.subscribe((0,b.x)(f,w=>{const g=v++;i.call(r,w,g,c)&&(f.next(a?g:w),f.complete())},()=>{f.next(a?-1:void 0),f.complete()}))}}function an(i,r){return(0,I.e)(Zt(i,r,"index"))}var Pt=m(81374);function xn(i,r,o,a){return(0,I.e)((c,f)=>{let v;r&&"function"!=typeof r?({duration:o,element:v,connector:a}=r):v=r;const w=new Map,g=T=>{w.forEach(T),T(f)},x=T=>g(R=>R.error(T));let P=0,J=!1;const $=new b.Q(f,T=>{try{const R=i(T);let X=w.get(R);if(!X){w.set(R,X=a?a():new de.x);const Ye=function me(T,R){const X=new H.y(Ye=>{P++;const It=R.subscribe(Ye);return()=>{It.unsubscribe(),0==--P&&J&&$.unsubscribe()}});return X.key=T,X}(R,X);if(f.next(Ye),o){const It=(0,b.x)(X,()=>{X.complete(),It?.unsubscribe()},void 0,void 0,()=>w.delete(R));$.add((0,ne.Xf)(o(Ye)).subscribe(It))}}X.next(v?v(T):T)}catch(R){x(R)}},()=>g(T=>T.complete()),x,()=>w.clear(),()=>(J=!0,0===P));c.subscribe($)})}function jn(){return(0,I.e)((i,r)=>{i.subscribe((0,b.x)(r,()=>{r.next(!1),r.complete()},()=>{r.next(!0),r.complete()}))})}var Ln=m(12032);function On(){return(0,I.e)((i,r)=>{i.subscribe((0,b.x)(r,o=>{r.next(Xe.createNext(o))},()=>{r.next(Xe.createComplete()),r.complete()},o=>{r.next(Xe.createError(o)),r.complete()}))})}function Bn(i){return(0,Q.u)((0,Je.m)(i)?(r,o)=>i(r,o)>0?r:o:(r,o)=>r>o?r:o)}var yn=m(57537);const Pn=te.z;function In(i,r,o=1/0){return(0,Je.m)(r)?(0,te.z)(()=>i,r,o):("number"==typeof r&&(o=r),(0,te.z)(()=>i,o))}function Fn(i,r,o=1/0){return(0,I.e)((a,c)=>{let f=r;return(0,ft.p)(a,c,(v,w)=>i(f,v,w),o,v=>{f=v},!1,void 0,()=>f=null)})}function Tn(...i){return function Wn(...i){const r=(0,Z.yG)(i),o=(0,Z._6)(i,1/0);return i=j(i),(0,I.e)((a,c)=>{(0,yn.J)(o)((0,e.D)([a,...i],r)).subscribe(c)})}(...i)}function Mn(i){return(0,Q.u)((0,Je.m)(i)?(r,o)=>i(r,o)<0?r:o:(r,o)=>r<o?r:o)}function mn(i,r){const o=(0,Je.m)(i)?i:()=>i;return(0,Je.m)(r)?tt(r,{connector:o}):a=>new Ie.c(a,o)}function Cn(...i){const r=j(i);return o=>S(o,...r)}var Rn=m(69384);function Dn(...i){const r=i.length;if(0===r)throw new Error("list of properties cannot be empty.");return(0,Et.U)(o=>{let a=o;for(let c=0;c<r;c++){const f=a?.[i[c]];if(!(typeof f<"u"))return;a=f}return a})}function zn(i){return i?r=>tt(i)(r):r=>mn(new de.x)(r)}function Un(i){return r=>{const o=new Ft.X(i);return new Ie.c(r,()=>o)}}function Vn(){return i=>{const r=new Ue;return new Ie.c(i,()=>r)}}function Zn(i,r,o,a){o&&!(0,Je.m)(o)&&(a=o);const c=(0,Je.m)(o)?o:void 0;return f=>mn(new ze(i,r,a),c)(f)}function Jn(...i){return i.length?(0,I.e)((r,o)=>{W([r,...i])(o)}):Ke.y}function Xn(i){let o,r=1/0;return null!=i&&("object"==typeof i?({count:r=1/0,delay:o}=i):r=i),r<=0?()=>_e.E:(0,I.e)((a,c)=>{let v,f=0;const w=()=>{if(v?.unsubscribe(),v=null,null!=o){const x="number"==typeof o?(0,pe.H)(o):(0,ne.Xf)(o(f)),P=(0,b.x)(c,()=>{P.unsubscribe(),g()});x.subscribe(P)}else g()},g=()=>{let x=!1;v=a.subscribe((0,b.x)(c,void 0,()=>{++f<r?v?w():x=!0:c.complete()})),x&&w()};g()})}function Kn(i){return(0,I.e)((r,o)=>{let a,f,c=!1,v=!1,w=!1;const g=()=>w&&v&&(o.complete(),!0),P=()=>{w=!1,a=r.subscribe((0,b.x)(o,void 0,()=>{w=!0,!g()&&(f||(f=new de.x,i(f).subscribe((0,b.x)(o,()=>{a?P():c=!0},()=>{v=!0,g()}))),f).next()})),c&&(a.unsubscribe(),a=null,c=!1,P())};P()})}function Gn(i=1/0){let r;r=i&&"object"==typeof i?i:{count:i};const{count:o=1/0,delay:a,resetOnSuccess:c=!1}=r;return o<=0?Ke.y:(0,I.e)((f,v)=>{let g,w=0;const x=()=>{let P=!1;g=f.subscribe((0,b.x)(v,J=>{c&&(w=0),v.next(J)},void 0,J=>{if(w++<o){const $=()=>{g?(g.unsubscribe(),g=null,x()):P=!0};if(null!=a){const me="number"==typeof a?(0,pe.H)(a):(0,ne.Xf)(a(J,w)),T=(0,b.x)(v,()=>{T.unsubscribe(),$()},()=>{v.complete()});me.subscribe(T)}else $()}else v.error(J)})),P&&(g.unsubscribe(),g=null,x())};x()})}function Qn(i){return(0,I.e)((r,o)=>{let a,f,c=!1;const v=()=>{a=r.subscribe((0,b.x)(o,void 0,void 0,w=>{f||(f=new de.x,i(f).subscribe((0,b.x)(o,()=>a?v():c=!0))),f&&f.next(w)})),c&&(a.unsubscribe(),a=null,c=!1,v())};v()})}var $n=m(66196);function gn(i){return(0,I.e)((r,o)=>{let a=!1,c=null;r.subscribe((0,b.x)(o,f=>{a=!0,c=f})),i.subscribe((0,b.x)(o,()=>{if(a){a=!1;const f=c;c=null,o.next(f)}},ve.Z))})}function Yn(i,r=Ve.z){return gn((0,d.F)(i,r))}var Hn=m(36424);function kn(i,r=((o,a)=>o===a)){return(0,I.e)((o,a)=>{const c={buffer:[],complete:!1},f={buffer:[],complete:!1},v=g=>{a.next(g),a.complete()},w=(g,x)=>{const P=(0,b.x)(a,J=>{const{buffer:$,complete:me}=x;0===$.length?me?v(!1):g.buffer.push(J):!r(J,$.shift())&&v(!1)},()=>{g.complete=!0;const{complete:J,buffer:$}=x;J&&v(0===$.length),P?.unsubscribe()});return P};o.subscribe(w(c,f)),i.subscribe(w(f,c))})}var En=m(63020);function qn(i,r,o){let a,c=!1;return i&&"object"==typeof i?({bufferSize:a=1/0,windowTime:r=1/0,refCount:c=!1,scheduler:o}=i):a=i??1/0,(0,En.B)({connector:()=>new ze(a,r,o),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:c})}function _n(i){return(0,I.e)((r,o)=>{let c,a=!1,f=!1,v=0;r.subscribe((0,b.x)(o,w=>{f=!0,(!i||i(w,v++,r))&&(a&&o.error(new Rt("Too many matching values")),a=!0,c=w)},()=>{a?(o.next(c),o.complete()):o.error(f?new $t("No matching values"):new Mt.K)}))})}var er=m(836);function tr(i){return i<=0?Ke.y:(0,I.e)((r,o)=>{let a=new Array(i),c=0;return r.subscribe((0,b.x)(o,f=>{const v=c++;if(v<i)a[v]=f;else{const w=v%i,g=a[w];a[w]=f,o.next(g)}})),()=>{a=null}})}function nr(i){return(0,I.e)((r,o)=>{let a=!1;const c=(0,b.x)(o,()=>{c?.unsubscribe(),a=!0},ve.Z);(0,ne.Xf)(i).subscribe(c),r.subscribe((0,b.x)(o,f=>a&&o.next(f)))})}function rr(i){return(0,I.e)((r,o)=>{let a=!1,c=0;r.subscribe((0,b.x)(o,f=>(a||(a=!i(f,c++)))&&o.next(f)))})}var ir=m(27921),Jt=m(94664);function or(){return(0,Jt.w)(Ke.y)}function ar(i,r){return(0,Je.m)(r)?(0,Jt.w)(()=>i,r):(0,Jt.w)(()=>i)}function sr(i,r){return(0,I.e)((o,a)=>{let c=r;return(0,Jt.w)((f,v)=>i(c,f,v),(f,v)=>(c=v,v))(o).subscribe(a),()=>{c=null}})}var lr=m(94418),ur=m(59773);function cr(i,r=!1){return(0,I.e)((o,a)=>{let c=0;o.subscribe((0,b.x)(a,f=>{const v=i(f,c++);(v||r)&&a.next(f),!v&&a.complete()}))})}var fr=m(99397);const Nn={leading:!0,trailing:!1};function bn(i,r=Nn){return(0,I.e)((o,a)=>{const{leading:c,trailing:f}=r;let v=!1,w=null,g=null,x=!1;const P=()=>{g?.unsubscribe(),g=null,f&&(me(),x&&a.complete())},J=()=>{g=null,x&&a.complete()},$=T=>g=(0,ne.Xf)(i(T)).subscribe((0,b.x)(a,P,J)),me=()=>{if(v){v=!1;const T=w;w=null,a.next(T),!x&&$(T)}};o.subscribe((0,b.x)(a,T=>{v=!0,w=T,(!g||g.closed)&&(c?me():$(T))},()=>{x=!0,(!(f&&v&&g)||g.closed)&&a.complete()}))})}function hr(i,r=Ve.z,o=Nn){const a=(0,pe.H)(i,r);return bn(()=>a,o)}function dr(i=Ve.z){return(0,I.e)((r,o)=>{let a=i.now();r.subscribe((0,b.x)(o,c=>{const f=i.now(),v=f-a;a=f,o.next(new vr(c,v))}))})}class vr{constructor(r,o){this.value=r,this.interval=o}}function pr(i,r,o){let a,c,f;if(o=o??Ve.P,(0,Yt.q)(i)?a=i:"number"==typeof i&&(c=i),!r)throw new TypeError("No observable provided to switch to");if(f=()=>r,null==a&&null==c)throw new TypeError("No timeout provided.");return vt({first:a,each:c,scheduler:o,with:f})}function mr(i=Wt.l){return(0,Et.U)(r=>({value:r,timestamp:i.now()}))}function yr(i){return(0,I.e)((r,o)=>{let a=new de.x;o.next(a.asObservable());const c=f=>{a.error(f),o.error(f)};return r.subscribe((0,b.x)(o,f=>a?.next(f),()=>{a.complete(),o.complete()},c)),i.subscribe((0,b.x)(o,()=>{a.complete(),o.next(a=new de.x)},ve.Z,c)),()=>{a?.unsubscribe(),a=null}})}function gr(i,r=0){const o=r>0?r:i;return(0,I.e)((a,c)=>{let f=[new de.x],v=[],w=0;c.next(f[0].asObservable()),a.subscribe((0,b.x)(c,g=>{for(const P of f)P.next(g);const x=w-i+1;if(x>=0&&x%o==0&&f.shift().complete(),++w%o==0){const P=new de.x;f.push(P),c.next(P.asObservable())}},()=>{for(;f.length>0;)f.shift().complete();c.complete()},g=>{for(;f.length>0;)f.shift().error(g);c.error(g)},()=>{v=null,f=null}))})}function wr(i,...r){var o,a;const c=null!==(o=(0,Z.yG)(r))&&void 0!==o?o:Ve.z,f=null!==(a=r[0])&&void 0!==a?a:null,v=r[1]||1/0;return(0,I.e)((w,g)=>{let x=[],P=!1;const J=R=>{const{window:X,subs:Ye}=R;X.complete(),Ye.unsubscribe(),(0,re.P)(x,R),P&&$()},$=()=>{if(x){const R=new nt.w0;g.add(R);const X=new de.x,Ye={window:X,subs:R,seen:0};x.push(Ye),g.next(X.asObservable()),(0,dt.f)(R,c,()=>J(Ye),i)}};null!==f&&f>=0?(0,dt.f)(g,c,$,f,!0):P=!0,$();const me=R=>x.slice().forEach(R),T=R=>{me(({window:X})=>R(X)),R(g),g.unsubscribe()};return w.subscribe((0,b.x)(g,R=>{me(X=>{X.window.next(R),v<=++X.seen&&J(X)})},()=>T(R=>R.complete()),R=>T(X=>X.error(R)))),()=>{x=null}})}function Er(i,r){return(0,I.e)((o,a)=>{const c=[],f=v=>{for(;0<c.length;)c.shift().error(v);a.error(v)};(0,ne.Xf)(i).subscribe((0,b.x)(a,v=>{const w=new de.x;c.push(w);const g=new nt.w0;let P;try{P=(0,ne.Xf)(r(v))}catch(J){return void f(J)}a.next(w.asObservable()),g.add(P.subscribe((0,b.x)(a,()=>{(0,re.P)(c,w),w.complete(),g.unsubscribe()},ve.Z,f)))},ve.Z)),o.subscribe((0,b.x)(a,v=>{const w=c.slice();for(const g of w)g.next(v)},()=>{for(;0<c.length;)c.shift().complete();a.complete()},f,()=>{for(;0<c.length;)c.shift().unsubscribe()}))})}function Nr(i){return(0,I.e)((r,o)=>{let a,c;const f=w=>{a.error(w),o.error(w)},v=()=>{let w;c?.unsubscribe(),a?.complete(),a=new de.x,o.next(a.asObservable());try{w=(0,ne.Xf)(i())}catch(g){return void f(g)}w.subscribe(c=(0,b.x)(o,v,v,f))};v(),r.subscribe((0,b.x)(o,w=>a.next(w),()=>{a.complete(),o.complete()},f,()=>{c?.unsubscribe(),a=null}))})}function br(...i){const r=(0,Z.jO)(i);return(0,I.e)((o,a)=>{const c=i.length,f=new Array(c);let v=i.map(()=>!1),w=!1;for(let g=0;g<c;g++)(0,ne.Xf)(i[g]).subscribe((0,b.x)(a,x=>{f[g]=x,!w&&!v[g]&&(v[g]=!0,(w=v.every(Ke.y))&&(v=null))},ve.Z));o.subscribe((0,b.x)(a,g=>{if(w){const x=[g,...f];a.next(r?r(...x):x)}}))})}function Ar(i){return Ge(ge,i)}function xr(...i){return function Sr(...i){return(0,I.e)((r,o)=>{ge(r,...i).subscribe(o)})}(...i)}var An=m(99796),jr=m(21473),Lr=m(1238),Or=m(13509),Sn=m(76690);const it=m(60364);it.setBaseUrl(Lr.Z.worksheetsApi);const Xt={"datapipe-js":K,"datapipe-js/utils":U,"datapipe-js/array":q,"datapipe-js/string":D,"sql-data-api":it,JSV:{parse:i=>Sn.R.parse(i),stringify:i=>Sn.R.stringify(i)},rxjs:le,"rxjs/factory":{createSubject:()=>new de.x,createAsyncSubject:()=>new Ue,createBehaviorSubject:i=>new Ft.X(i),createReplaySubject:i=>new ze(i)}},Br=new Map([["typeof",i=>typeof i],["delay",i=>new Promise(r=>setTimeout(r,i||1e3))],["httpGet",(i,r)=>it.httpGet(i,{...r})],["httpGetText",(i,r)=>it.httpGetText(i,r)],["httpRequest",(i,r,o,a)=>it.httpRequest(i,r,o,a)],["httpRequest$",(i,r,o,a)=>(0,e.D)(it.httpRequest(i,r,o,a))],["httpPost",(i,r,o)=>it.httpPost(i,r,{...o})],["httpPut",(i,r,o)=>it.httpPut(i,r,{...o})],["httpDelete",(i,r)=>it.httpDelete(i,void 0,{...r})],["fetch",(i,r)=>fetch(i,r)],["parseInt",parseInt],["parseFloat",parseFloat],["dateTime",(i,r)=>U.parseDatetimeOrNull(i,r)||new Date],["format",(i,r="")=>(0,An.WU)(i,r)],["getQueryParams",(i,r)=>(0,An.vl)(i,r)],["setQueryParameters",i=>{const r=location.pathname+(i.startsWith("?")?i:`?${i}`);window.history.pushState({},"",r)}],["openFile",i=>(new Or.j5).importAppContents()]]);function Pr(){return Object.keys(Xt)}function Ir(i){return Xt[i]}function Fr(i=(r=>Promise.resolve(""))){const r=(0,F.R)().registerPackagesLoader(Tr).registerModuleLoader(i).assignGlobalContext({session:jr.LO.contextVariables,localStorage,__env:{args:{},entryFunction:"",entryModule:""}});return function Wr(i){Br.forEach((r,o)=>{r.interpreter=i,i.addFunction(o,r)})}(r),r}function Tr(i){if(!Xt.hasOwnProperty(i))throw Error(`Package '${i}' is not available.`);return Xt[i]}},20081:(ot,Ne,m)=>{m.d(Ne,{R:()=>D});var le=m(65592),F=m(84674),K=m(97400);function D(U,q,H){return H?D(U,q).pipe((0,K.Z)(H)):new le.y(Ie=>{const He=(...ke)=>Ie.next(1===ke.length?ke[0]:ke),At=U(He);return(0,F.m)(q)?()=>q(He,At):void 0})}},23889:(ot,Ne,m)=>{function le(U,q){return(H,Ie)=>!U.call(q,H,Ie)}m.d(Ne,{u:()=>D});var F=m(32181),K=m(54829);function D(U,q,H){return[(0,F.h)(q,H)((0,K.Xf)(U)),(0,F.h)(le(q,H))((0,K.Xf)(U))]}},69384:(ot,Ne,m)=>{m.d(Ne,{G:()=>K});var le=m(79360),F=m(8251);function K(){return(0,le.e)((D,U)=>{let q,H=!1;D.subscribe((0,F.x)(U,Ie=>{const He=q;q=Ie,H&&U.next([He,Ie]),H=!0}))})}},61794:(ot,Ne,m)=>{m.d(Ne,{R:()=>vn});var le=function(n,e){return(le=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var l in s)Object.prototype.hasOwnProperty.call(s,l)&&(t[l]=s[l])})(n,e)};function F(n,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function t(){this.constructor=n}le(n,e),n.prototype=null===e?Object.create(e):(t.prototype=e.prototype,new t)}var K=function(){return K=Object.assign||function(e){for(var t,s=1,l=arguments.length;s<l;s++)for(var u in t=arguments[s])Object.prototype.hasOwnProperty.call(t,u)&&(e[u]=t[u]);return e},K.apply(this,arguments)};function D(n,e,t,s){return new(t||(t=Promise))(function(u,h){function d(N){try{p(s.next(N))}catch(A){h(A)}}function y(N){try{p(s.throw(N))}catch(A){h(A)}}function p(N){N.done?u(N.value):function l(u){return u instanceof t?u:new t(function(h){h(u)})}(N.value).then(d,y)}p((s=s.apply(n,e||[])).next())})}function U(n,e){var s,l,u,h,t={label:0,sent:function(){if(1&u[0])throw u[1];return u[1]},trys:[],ops:[]};return h={next:d(0),throw:d(1),return:d(2)},"function"==typeof Symbol&&(h[Symbol.iterator]=function(){return this}),h;function d(p){return function(N){return function y(p){if(s)throw new TypeError("Generator is already executing.");for(;h&&(h=0,p[0]&&(t=0)),t;)try{if(s=1,l&&(u=2&p[0]?l.return:p[0]?l.throw||((u=l.return)&&u.call(l),0):l.next)&&!(u=u.call(l,p[1])).done)return u;switch(l=0,u&&(p=[2&p[0],u.value]),p[0]){case 0:case 1:u=p;break;case 4:return t.label++,{value:p[1],done:!1};case 5:t.label++,l=p[1],p=[0];continue;case 7:p=t.ops.pop(),t.trys.pop();continue;default:if(!(u=(u=t.trys).length>0&&u[u.length-1])&&(6===p[0]||2===p[0])){t=0;continue}if(3===p[0]&&(!u||p[1]>u[0]&&p[1]<u[3])){t.label=p[1];break}if(6===p[0]&&t.label<u[1]){t.label=u[1],u=p;break}if(u&&t.label<u[2]){t.label=u[2],t.ops.push(p);break}u[2]&&t.ops.pop(),t.trys.pop();continue}p=e.call(n,t)}catch(N){p=[6,N],l=0}finally{s=u=0}if(5&p[0])throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}([p,N])}}}function q(n,e,t){if(t||2===arguments.length)for(var u,s=0,l=e.length;s<l;s++)(u||!(s in e))&&(u||(u=Array.prototype.slice.call(e,0,s)),u[s]=e[s]);return n.concat(u||Array.prototype.slice.call(e))}function Ie(n){return n.startsWith("/")||n.startsWith("./")?n.endsWith(".json")?"json":"jspyModule":"jsPackage"}function He(n,e,t,s,l){return"".concat(n,": ").concat(e,"(").concat(t,",").concat(s,"): ").concat(l)}!function(n){F(function e(t,s,l,u){var h=n.call(this)||this;return h.module=t,h.line=s,h.column=l,h.message=u,h.message=He("JspyTokenizerError",t,s,l,u),Object.setPrototypeOf(h,e.prototype),h},n)}(Error);var At=function(n){function e(t,s,l,u){var h=n.call(this)||this;return h.module=t,h.line=s,h.column=l,h.message=u,h.message=He("JspyParserError",t,s,l,u),Object.setPrototypeOf(h,e.prototype),h}return F(e,n),e}(Error),ke=function(n){function e(t,s,l,u){var h=n.call(this)||this;return h.module=t,h.line=s,h.column=l,h.message=u,h.message=He("JspyEvalError",t,s,l,u),Object.setPrototypeOf(h,e.prototype),h}return F(e,n),e}(Error),Se=function(n){function e(t,s,l,u,h){var d=n.call(this)||this;return d.module=t,d.line=s,d.column=l,d.name=u,d.message=h,d.message=He("JspyError",t||"name.jspy",s,l,h),Object.setPrototypeOf(d,e.prototype),d}return F(e,n),e}(Error),z=function(n){return n[n.Arithmetic=0]="Arithmetic",n[n.Assignment=1]="Assignment",n[n.Comparison=2]="Comparison",n[n.Logical=3]="Logical",n[n.Membership=4]="Membership",n}(z||{}),Kt=new Map([["+",z.Arithmetic],["-",z.Arithmetic],["*",z.Arithmetic],["/",z.Arithmetic],["%",z.Arithmetic],["**",z.Arithmetic],["//",z.Arithmetic],[">",z.Comparison],[">=",z.Comparison],["==",z.Comparison],["!=",z.Comparison],["<>",z.Comparison],["<",z.Comparison],["<=",z.Comparison],["and",z.Logical],["or",z.Logical],["in",z.Membership],["=",z.Assignment],["+=",z.Assignment],["-=",z.Assignment],["*=",z.Assignment],["/=",z.Assignment],["++",z.Assignment],["--",z.Assignment]]),de=new Map([["+",function(n,e){return Ue(n,e,"+")}],["-",function(n,e){return Ue(n,e,"-")}],["/",function(n,e){return Ue(n,e,"/")}],["*",function(n,e){return Ue(n,e,"*")}],["%",function(n,e){return Ue(n,e,"%")}],["**",function(n,e){return Ue(n,e,"**")}],["//",function(n,e){return Ue(n,e,"//")}],[">",function(n,e){return ze(n,e,">")}],[">=",function(n,e){return ze(n,e,">=")}],["<",function(n,e){return ze(n,e,"<")}],["<=",function(n,e){return ze(n,e,"<=")}],["==",function(n,e){return ze(n,e,"==")}],["!=",function(n,e){return ze(n,e,"!=")}],["<>",function(n,e){return ze(n,e,"<>")}],["and",function(n,e){return Wt(n,e,"and")}],["or",function(n,e){return Wt(n,e,"or")}],["in",function(n,e){return function Ft(n,e,t){if("string"==typeof n)return n.includes(String(e));if(Array.isArray(n))return n.includes(e);throw new Error("Unknown operation '".concat(t,"'"))}(n,e,"in")}]]);function Wt(n,e,t){switch(t){case"and":return n&&e;case"or":return n||e}throw new Error("Unknown operation '".concat(t,"'"))}function ze(n,e,t){switch(t){case"==":return n===e;case"!=":case"<>":return n!==e;case">":return n>e;case"<":return n<e;case">=":return n>=e;case"<=":return n<=e}throw new Error("Unknown operation '".concat(t,"'"))}function Ue(n,e,t){switch(t){case"+":return n+e;case"-":return n-e;case"*":return n*e;case"/":return n/e;case"%":return n%e;case"**":return Math.pow(n,e)}throw new Error("Unknown operation '".concat(t,"'"))}var ee=function(n){return n[n.Identifier=0]="Identifier",n[n.Keyword=1]="Keyword",n[n.Separator=2]="Separator",n[n.Operator=3]="Operator",n[n.LiteralNumber=4]="LiteralNumber",n[n.LiteralBool=5]="LiteralBool",n[n.LiteralString=6]="LiteralString",n[n.LiteralNull=7]="LiteralNull",n[n.Comment=8]="Comment",n}(ee||{});function Ze(n){return n[1][0]}function E(n){return n?n[0]:null}function G(n){return n[1].subarray(1)}function ht(n){return n[1][1]}function St(n){return n[1][2]}function nt(n,e){var t=[];if(!n.length)return[];for(var s=0,l=0;l<e.length;l++){var u=e[l];"["===E(n[s-1])&&(s-=1),t.push(n.slice(s,u)),s=u+1}return"["===E(n[s-1])&&(s-=1),t.push(n.slice(s,n.length)),t}function qe(n,e){return n.length?nt(n,xt(n,function(s){return s===e})):[]}function Fe(n,e,t){void 0===t&&(t=0);for(var s=t;s<n.length;s++)if(Ze(n[s])!==ee.LiteralString)if("("===E(n[s]))s=We(n,s,"(",")");else if("["===E(n[s]))s=We(n,s,"[","]");else if("{"===E(n[s]))s=We(n,s,"{","}");else if(e(E(n[s])))return s;return-1}function xt(n,e){for(var t=[],s=0;s<n.length;s++){var l=E(n[s]);Ze(n[s])!==ee.LiteralString&&("("===l?s=We(n,s,"(",")"):"["===l?s=We(n,s,"[","]"):"{"===l?s=We(n,s,"{","}"):e(l)&&t.push(s))}return t}function _e(n,e){return void 0===e&&(e=null),xt(n,e?function(t){return Kt.get(t)===e}:function(t){return Kt.has(t)})}function We(n,e,t,s){for(var l=0;E(n[++e])!==s||0!==l;){if(e+1>=n.length)throw new Error("Closing '".concat(s,"' is missing"));var u=E(n[e]);u===t&&l++,u===s&&l--}return e}var k=function n(e){this.type=e,this.loc=void 0},Je=function(n){function e(t,s,l){var u=n.call(this,"assign")||this;return u.target=t,u.source=s,u.loc=l,u.loc=l,u}return F(e,n),e}(k),jt=function(n){function e(t){var s=n.call(this,"const")||this;return s.value=E(t),s.loc=G(t),s}return F(e,n),e}(k),Xe=function(n){function e(t,s){var l=n.call(this,"comment")||this;return l.comment=t,l.loc=s,l.loc=s,l}return F(e,n),e}(k),Qt=function(n){function e(t,s){void 0===t&&(t=void 0);var l=n.call(this,"return")||this;return l.returnValue=t,l.loc=s,l.loc=s,l}return F(e,n),e}(k),Tt=function(n){function e(t,s,l){var u=n.call(this,"raise")||this;return u.errorName=t,u.errorMessageAst=s,u.loc=l,u.loc=l,u}return F(e,n),e}(k),ve=function(n){function e(){return n.call(this,"continue")||this}return F(e,n),e}(k),Ke=function(n){function e(){return n.call(this,"break")||this}return F(e,n),e}(k);!function(n){F(function e(t){var s=n.call(this,"setSingleVar")||this;return s.name=t[0],s.loc=G(t),s},n)}(k);var un=function(n){function e(t,s,l){var u=n.call(this,"funcCall")||this;return u.name=t,u.paramNodes=s,u.loc=l,u.nullCoelsing=void 0,u.loc=l,u}return F(e,n),e}(k),cn=function(n){function e(t,s,l,u){var h=n.call(this,"funcDef")||this;return h.funcAst=t,h.params=s,h.isAsync=l,h.loc=u,h.loc=u,h}return F(e,n),e}(k),Mt=function(n){function e(t,s,l){var u=n.call(this,"arrowFuncDef")||this;return u.funcAst=t,u.params=s,u.loc=l,u.loc=l,u}return F(e,n),e}(k),fn=function(n){function e(t,s,l){var u=n.call(this,"elif")||this;return u.conditionNode=t,u.elifBody=s,u.loc=l,u.loc=l,u}return F(e,n),e}(k),Lt=function(n){function e(t,s,l,u,h){void 0===l&&(l=void 0),void 0===u&&(u=void 0);var d=n.call(this,"if")||this;return d.conditionNode=t,d.ifBody=s,d.elifs=l,d.elseBody=u,d.loc=h,d.loc=h,d}return F(e,n),e}(k),Ct=function(n){function e(t,s,l,u,h){var d=n.call(this,"tryExcept")||this;return d.tryBody=t,d.exepts=s,d.elseBody=l,d.finallyBody=u,d.loc=h,d.loc=h,d}return F(e,n),e}(k),$t=function(n){function e(t,s,l,u){var h=n.call(this,"for")||this;return h.sourceArray=t,h.itemVarName=s,h.body=l,h.loc=u,h.loc=u,h}return F(e,n),e}(k),hn=function(n){function e(t,s,l){var u=n.call(this,"while")||this;return u.condition=t,u.body=s,u.loc=l,u.loc=l,u}return F(e,n),e}(k),Rt=function(n){function e(t,s,l,u){void 0===l&&(l=void 0);var h=n.call(this,"import")||this;return h.module=t,h.body=s,h.parts=l,h.loc=u,h.loc=u,h}return F(e,n),e}(k),Yt=function(n){function e(t,s){void 0===s&&(s=void 0);var l=n.call(this,"getSingleVar")||this;return l.nullCoelsing=void 0,l.name=t[0],l.nullCoelsing=s,l.loc=G(t),l}return F(e,n),e}(k),I=function(n){function e(t,s){var l=n.call(this,"chainingCalls")||this;return l.innerNodes=t,l.loc=s,l.loc=s,l}return F(e,n),e}(k),ne=function(n){function e(t,s){var l=n.call(this,"createObject")||this;return l.props=t,l.loc=s,l.loc=s,l}return F(e,n),e}(k),b=function(n){function e(t,s){var l=n.call(this,"createArray")||this;return l.items=t,l.loc=s,l.loc=s,l}return F(e,n),e}(k),dt=function(n){function e(t,s,l){void 0===s&&(s=void 0);var u=n.call(this,"chainingObjectAccess")||this;return u.indexerBody=t,u.nullCoelsing=s,u.loc=l,u.loc=l,u}return F(e,n),e}(k),Ht=function(n){function e(t,s){var l=n.call(this,"logicalOp")||this;return l.items=t,l.loc=s,l.loc=s,l}return F(e,n),e}(k),vt=function(n){function e(t,s,l,u){var h=n.call(this,"binOp")||this;return h.left=t,h.op=s,h.right=l,h.loc=u,h.loc=u,h}return F(e,n),e}(k);function kt(n){return{moduleName:n.moduleName,blockScope:n.blockScope.clone(),cancellationToken:n.cancellationToken}}var Dt=function(){function n(e){this.scope={},this.scope=K({},e)}return n.prototype.getScope=function(){return this.scope},n.prototype.clone=function(){return new n(this.scope)},n.prototype.set=function(e,t){this.scope[e]=t},n.prototype.get=function(e){return this.scope[e]},n}(),pt=function(){function n(){}return n.prototype.evalBlock=function(e,t){for(var s=this,l=null,u=function(j){var S=j;t.blockScope.set(S.funcAst.name,function(){for(var M=[],O=0;O<arguments.length;O++)M[O]=arguments[O];return s.jspyFuncInvoker.apply(s,q([S,t],M,!1))})},h=0,d=e?.funcs||[];h<d.length;h++)u(y=d[h]);for(var p=0;p<e.body.length;p++){var y=e.body[p];if(t.cancellationToken.cancel){var N=y.loc||[];return t.cancellationToken.message||(t.cancellationToken.message="Cancelled. ".concat(t.moduleName,": ").concat(N[0],", ").concat(N[1])),t.cancellationToken.message}if("comment"!==y.type){if("import"===y.type)throw new Error("Import is not support with 'eval'. Use method 'evalAsync' instead");try{if(l=this.evalNode(y,t),t.returnCalled){var A=t.returnObject;return("func"==e.type||"module"==e.type)&&(t.returnCalled=!1,t.returnObject=null),A}if(t.continueCalled||t.breakCalled)break}catch(S){throw N=y.loc?y.loc:[0,0],S instanceof Se||S instanceof ke?S:new ke(t.moduleName,N[0],N[1],S.message||S)}}}return l},n.prototype.jspyFuncInvoker=function(e,t){for(var s,l=[],u=2;u<arguments.length;u++)l[u-2]=arguments[u];var h=Object.assign({},e.funcAst);h.type="func";for(var d=kt(t),y=0;y<(null===(s=e.params)||void 0===s?void 0:s.length);y++)d.blockScope.set(e.params[y],l?.length>y?l[y]:null);return this.evalBlock(h,d)},n.prototype.invokeFunction=function(e,t,s){return e.apply(void 0,t)},n.prototype.evalNode=function(e,t){var l,u,h,d,y,p,N,s=this;if("import"===e.type||"comment"===e.type)return null;if("if"!==e.type){if("raise"===e.type){var M=e,O=this.evalNode(M.errorMessageAst,t);throw new Se(t.moduleName,M.loc[0],M.loc[1],M.errorName,O)}if("tryExcept"!==e.type){if("return"===e.type){var Te=e;return t.returnCalled=!0,t.returnObject=Te.returnValue?this.evalNode(Te.returnValue,t):null,t.returnObject}if("continue"!==e.type)if("break"!==e.type)if("for"!==e.type)if("while"!==e.type){if("const"===e.type)return e.value;if("getSingleVar"===e.type){var ie=e.name,be=t.blockScope.get(e.name);if(void 0===be)throw";"===ie.charAt(ie.length-1)?new Error("Unexpected ';' in the end."):new Error("Variable '".concat(ie,"' is not defined."));return be}if("binOp"===e.type){var te=e,Me=this.evalNode(te.left,t),Ge=this.evalNode(te.right,t);if("function"==typeof(Le=de.get(te.op)))return Le(Me,Ge);throw new Error("Unknown binary oprastion")}if("logicalOp"===e.type){for(var Qe=e,Ae=0,fe=!0;Ae<Qe.items.length;){var Ee=Qe.items[Ae++];if(fe=this.evalNode(Ee.node,t),"and"===Ee.op&&!fe)return!1;if("or"===Ee.op&&fe)return fe}return fe}if("arrowFuncDef"===e.type){var he=e;return function(){for(var oe=[],$e=0;$e<arguments.length;$e++)oe[$e]=arguments[$e];return s.jspyFuncInvoker.apply(s,q([he,t],oe,!1))}}if("funcCall"===e.type){var Le,ae=e;if("function"!=typeof(Le=t.blockScope.get(ae.name)))throw Error("'".concat(ae.name,"' is not a function or not defined."));var Ce=(null===(N=ae.paramNodes)||void 0===N?void 0:N.map(function($e){return s.evalNode($e,t)}))||[];return this.invokeFunction(Le,Ce,{moduleName:t.moduleName,line:ae.loc[0],column:ae.loc[1]})}if("assign"===e.type){var se=e;if("getSingleVar"===se.target.type)t.blockScope.set(se.target.name,this.evalNode(se.source,t));else if("chainingCalls"===se.target.type){var Oe=se.target,tt=new I(Oe.innerNodes.slice(0,Oe.innerNodes.length-1),Oe.loc),Q=this.evalNode(tt,t),C=Oe.innerNodes[Oe.innerNodes.length-1],Be="";if("getSingleVar"===C.type)Be=C.name;else{if("chainingObjectAccess"!==C.type)throw Error("Not implemented Assign operation with chaining calls");Be=this.evalNode(C.indexerBody,t)}Q[Be]=this.evalNode(se.source,t)}return null}if("chainingCalls"===e.type)return this.resolveChainingCallsNode(e,t);if("createObject"===e.type){for(var at={},Pe=0,st=e.props;Pe<st.length;Pe++){var lt=st[Pe];at[this.evalNode(lt.name,t)]=this.evalNode(lt.value,t)}return at}if("createArray"===e.type){for(var rt=[],ut=0,gt=e.items;ut<gt.length;ut++)rt.push(this.evalNode(gt[ut],t));return rt}}else{for(var je=e;this.evalNode(je.condition,t)&&(this.evalBlock({name:t.moduleName,type:"while",body:je.body},t),t.continueCalled&&(t.continueCalled=!1),!t.breakCalled););t.breakCalled&&(t.breakCalled=!1)}else{var re=e,_=this.evalNode(re.sourceArray,t);for(S=0;S<_.length&&(t.blockScope.set(re.itemVarName,_[S]),this.evalBlock({name:t.moduleName,type:"for",body:re.body},t),t.continueCalled&&(t.continueCalled=!1),!t.breakCalled);S++);t.breakCalled&&(t.breakCalled=!1)}else t.breakCalled=!0;else t.continueCalled=!0}else{var V=e;try{this.evalBlock({name:t.moduleName,type:"trycatch",body:V.tryBody},t),null!==(u=V.elseBody)&&void 0!==u&&u.length&&this.evalBlock({name:t.moduleName,type:"trycatch",body:V.elseBody},t)}catch(oe){var pe=oe instanceof Se?oe.name:typeof oe,ye=oe instanceof Se?oe.message:null!==(h=oe?.message)&&void 0!==h?h:String(oe),ce=V.exepts[0],we=ce.body,xe=t;xe.blockScope.set((null===(d=ce.error)||void 0===d?void 0:d.alias)||"error",{name:pe,message:ye,line:oe instanceof Se?oe.line:0,column:oe instanceof Se?oe.column:0,moduleName:oe instanceof Se?oe.module:0}),this.evalBlock({name:t.moduleName,type:"trycatch",body:we},xe),xe.blockScope.set((null===(y=ce.error)||void 0===y?void 0:y.alias)||"error",null)}finally{null!==(p=V.finallyBody)&&void 0!==p&&p.length&&this.evalBlock({name:t.moduleName,type:"trycatch",body:V.finallyBody},t)}}}else{var A=e,j=!0;if(this.evalNode(A.conditionNode,t))this.evalBlock({name:t.moduleName,type:"if",body:A.ifBody},t),j=!1;else if(null!==(l=A.elifs)&&void 0!==l&&l.length)for(var S=0;S<A.elifs.length;S++){var L=A.elifs[S];if(this.evalNode(L.conditionNode,t)){this.evalBlock({name:t.moduleName,type:"if",body:L.elifBody},t),j=!1;break}}j&&A.elseBody&&this.evalBlock({name:t.moduleName,type:"if",body:A.elseBody},t)}},n.prototype.resolveChainingCallsNode=function(e,t){for(var s=this.evalNode(e.innerNodes[0],t),l=1;l<e.innerNodes.length;l++){var u=e.innerNodes[l];if(e.innerNodes[l-1].nullCoelsing&&!s&&(s={}),"getSingleVar"===u.type)s=s[u.name];else if("chainingObjectAccess"===u.type)s=s[this.evalNode(u.indexerBody,t)];else{if("funcCall"!==u.type)throw Error("Can't resolve chainingCalls node");var d=u,y=s[d.name];if(null==y&&e.innerNodes[l-1].nullCoelsing){s=null;continue}if("function"!=typeof y)throw Error("'".concat(d.name,"' is not a function or not defined."));for(var p=[],N=0,A=d.paramNodes||[];N<A.length;N++)p.push(this.evalNode(A[N],t));s=this.invokeFunction(y.bind(s),p,{moduleName:t.moduleName,line:d.loc[0],column:d.loc[0]})}}return void 0===s?null:s},n}(),qt=function(){function n(){this.moduleParser=function(){return Promise.reject("Module parser is not registered!")},this.jsonFileLoader=function(){return Promise.reject("{}")}}return n.prototype.registerModuleParser=function(e){return this.moduleParser=e,this},n.prototype.registerJsonFileLoader=function(e){return this.jsonFileLoader=e,this},n.prototype.registerBlockContextFactory=function(e){return this.blockContextFactory=e,this},n.prototype.evalBlockAsync=function(e,t){var s,l;return D(this,void 0,void 0,function(){var u,h,d,y,p,N,A,j,S,L,M,O,W,V,pe,ye,Z,ge=this;return U(this,function(ue){switch(ue.label){case 0:for(u=null,h=function(ce){var we=ce,Te=we.isAsync?function(){for(var re=[],_=0;_<arguments.length;_++)re[_]=arguments[_];return D(ge,void 0,void 0,function(){return U(this,function(Y){switch(Y.label){case 0:return[4,this.jspyFuncInvokerAsync.apply(this,q([we,t],re,!1))];case 1:return[2,Y.sent()]}})})}:function(){for(var re,_=[],Y=0;Y<arguments.length;Y++)_[Y]=arguments[Y];return(re=new pt).jspyFuncInvoker.apply(re,q([we,t],_,!1))};t.blockScope.set(we.funcAst.name,Te)},d=0,y=e?.funcs||[];d<y.length;d++)h(N=y[d]);p=0,ue.label=1;case 1:return p<e.body.length?(N=e.body[p],t.cancellationToken.cancel?(Z=N.loc||[],t.cancellationToken.message||(t.cancellationToken.message="Cancelled. ".concat(t.moduleName,": ").concat(Z[0],", ").concat(Z[1])),[2,t.cancellationToken.message]):"comment"===N.type?[3,10]:"import"!==N.type?[3,7]:"json"!==(j=Ie((A=N).module.name))?[3,3]:(M=(L=JSON).parse,[4,this.jsonFileLoader(A.module.name)])):[3,11];case 2:return S=M.apply(L,[ue.sent()]),t.blockScope.set(A.module.alias||this.defaultModuleName(A.module.name),S),[3,10];case 3:if("jspyModule"!==j)return[3,10];ue.label=4;case 4:if("function"!=typeof this.blockContextFactory)throw new Error("blockContextFactory is not initialized");return[4,this.moduleParser(A.module.name)];case 5:return O=ue.sent(),W=this.blockContextFactory(A.module.name,O),[4,this.evalBlockAsync(O,W)];case 6:return ue.sent(),V=t.blockScope.getScope(),!(null===(s=A.parts)||void 0===s)&&s.length||(V={},t.blockScope.set(A.module.alias||this.defaultModuleName(A.module.name),V)),this.assignFunctionsToScope(V,W,O,null===(l=A.parts)||void 0===l?void 0:l.map(function(ce){return ce.name})),[3,10];case 7:return ue.trys.push([7,9,,10]),[4,this.evalNodeAsync(N,t)];case 8:return u=ue.sent(),t.returnCalled?(pe=t.returnObject,("func"==e.type||"module"==e.type)&&(t.returnCalled=!1,t.returnObject=null),[2,pe]):t.continueCalled||t.breakCalled?[3,11]:[3,10];case 9:throw ye=ue.sent(),Z=N.loc?N.loc:[0,0],ye instanceof Se||ye instanceof ke?ye:new ke(t.moduleName,Z[0],Z[1],ye.message||ye);case 10:return p++,[3,1];case 11:return[2,u]}})})},n.prototype.assignFunctionsToScope=function(e,t,s,l){for(var u=this,h=s.funcs.filter(function(p){var N;return!l||l.indexOf(null===(N=p.funcAst)||void 0===N?void 0:N.name)>=0}),d=function(p){var N=h[p],A=N.isAsync?function(){for(var j=[],S=0;S<arguments.length;S++)j[S]=arguments[S];return D(u,void 0,void 0,function(){return U(this,function(L){switch(L.label){case 0:return[4,this.jspyFuncInvokerAsync.apply(this,q([N,t],j,!1))];case 1:return[2,L.sent()]}})})}:function(){for(var j,S=[],L=0;L<arguments.length;L++)S[L]=arguments[L];return(j=new pt).jspyFuncInvoker.apply(j,q([N,t],S,!1))};e[N.funcAst.name]=A},y=0;y<h.length;y++)d(y)},n.prototype.defaultModuleName=function(e){return e.substring(e.lastIndexOf("/")+1,e.lastIndexOf("."))},n.prototype.jspyFuncInvokerAsync=function(e,t){for(var s,l=[],u=2;u<arguments.length;u++)l[u-2]=arguments[u];return D(this,void 0,void 0,function(){var h,d,y;return U(this,function(N){switch(N.label){case 0:for((h=Object.assign({},e.funcAst)).type="func",d=kt(t),y=0;y<(null===(s=e.params)||void 0===s?void 0:s.length);y++)d.blockScope.set(e.params[y],l?.length>y?l[y]:null);return[4,this.evalBlockAsync(h,d)];case 1:return[2,N.sent()]}})})},n.prototype.invokeFunctionAsync=function(e,t,s){return D(this,void 0,void 0,function(){return U(this,function(l){switch(l.label){case 0:return[4,e.apply(void 0,t)];case 1:return[2,l.sent()]}})})},n.prototype.evalNodeAsync=function(e,t){var s,l,u,h,d,y;return D(this,void 0,void 0,function(){var p,N,A,j,S,M,O,W,V,ge,ue,ce,we,xe,Te,re,_,Y,je,ie,be,te,Me,Ge,Le,Qe,Ae,fe,Ee,he,ae,Ce,se,Re,Oe,tt,Q,Be,De,at,Pe,st,lt,et,rt,ut,gt,$e,wt,Bt,ct,tn,nn,Nt,bt,Vt,rn,on;return U(this,function(B){switch(B.label){case 0:if("import"===e.type)throw new Error("Import should be defined at the start");return"comment"===e.type?[2,null]:"if"!==e.type?[3,11]:(N=!0,[4,this.evalNodeAsync((p=e).conditionNode,t)]);case 1:return B.sent()?[4,this.evalBlockAsync({name:t.moduleName,type:"if",body:p.ifBody},t)]:[3,3];case 2:return B.sent(),N=!1,[3,8];case 3:if(null===(s=p.elifs)||void 0===s||!s.length)return[3,8];Y=0,B.label=4;case 4:return Y<p.elifs.length?[4,this.evalNodeAsync((A=p.elifs[Y]).conditionNode,t)]:[3,8];case 5:return B.sent()?[4,this.evalBlockAsync({name:t.moduleName,type:"if",body:A.elifBody},t)]:[3,7];case 6:return B.sent(),N=!1,[3,8];case 7:return Y++,[3,4];case 8:return N&&p.elseBody?[4,this.evalBlockAsync({name:t.moduleName,type:"if",body:p.elseBody},t)]:[3,10];case 9:B.sent(),B.label=10;case 10:return[2];case 11:return"raise"!==e.type?[3,13]:[4,this.evalNodeAsync((j=e).errorMessageAst,t)];case 12:throw S=B.sent(),new Se(t.moduleName,j.loc[0],j.loc[1],j.errorName,S);case 13:if("tryExcept"!==e.type)return[3,24];M=e,B.label=14;case 14:return B.trys.push([14,18,20,23]),[4,this.evalBlockAsync({name:t.moduleName,type:"trycatch",body:M.tryBody},t)];case 15:return B.sent(),null!==(l=M.elseBody)&&void 0!==l&&l.length?[4,this.evalBlockAsync({name:t.moduleName,type:"trycatch",body:M.elseBody},t)]:[3,17];case 16:B.sent(),B.label=17;case 17:return[3,23];case 18:return O=B.sent(),W=O instanceof Se?O.name:typeof O,V=O instanceof Se?O.message:null!==(u=O?.message)&&void 0!==u?u:String(O),ue=(ge=M.exepts[0]).body,(ce=t).blockScope.set((null===(h=ge.error)||void 0===h?void 0:h.alias)||"error",{name:W,message:V,line:O instanceof Se?O.line:0,column:O instanceof Se?O.column:0,moduleName:O instanceof Se?O.module:0}),[4,this.evalBlockAsync({name:t.moduleName,type:"trycatch",body:ue},ce)];case 19:return B.sent(),ce.blockScope.set((null===(d=ge.error)||void 0===d?void 0:d.alias)||"error",null),[3,23];case 20:return null!==(y=M.finallyBody)&&void 0!==y&&y.length?[4,this.evalBlockAsync({name:t.moduleName,type:"trycatch",body:M.finallyBody},t)]:[3,22];case 21:B.sent(),B.label=22;case 22:return[7];case 23:return[2];case 24:return"return"!==e.type?[3,28]:(we=e,t.returnCalled=!0,xe=t,we.returnValue?[4,this.evalNodeAsync(we.returnValue,t)]:[3,26]);case 25:return Te=B.sent(),[3,27];case 26:Te=null,B.label=27;case 27:return xe.returnObject=Te,[2,t.returnObject];case 28:return"continue"===e.type?(t.continueCalled=!0,[2]):"break"===e.type?(t.breakCalled=!0,[2]):"for"!==e.type?[3,34]:[4,this.evalNodeAsync((re=e).sourceArray,t)];case 29:_=B.sent(),Y=0,B.label=30;case 30:return Y<_.length?(t.blockScope.set(re.itemVarName,_[Y]),[4,this.evalBlockAsync({name:t.moduleName,type:"for",body:re.body},t)]):[3,33];case 31:if(B.sent(),t.continueCalled&&(t.continueCalled=!1),t.breakCalled)return[3,33];B.label=32;case 32:return Y++,[3,30];case 33:return t.breakCalled&&(t.breakCalled=!1),[2];case 34:if("while"!==e.type)return[3,39];je=e,B.label=35;case 35:return[4,this.evalNodeAsync(je.condition,t)];case 36:return B.sent()?[4,this.evalBlockAsync({name:t.moduleName,type:"while",body:je.body},t)]:[3,38];case 37:return B.sent(),t.continueCalled&&(t.continueCalled=!1),t.breakCalled?[3,38]:[3,35];case 38:return t.breakCalled&&(t.breakCalled=!1),[2];case 39:if("const"===e.type)return[2,e.value];if("getSingleVar"===e.type){if(void 0===(be=t.blockScope.get(ie=e.name)))throw";"===ie.charAt(ie.length-1)?new Error("Unexpected ';' in the end."):new Error("Variable '".concat(ie,"' is not defined."));return[2,be]}return"binOp"!==e.type?[3,42]:[4,this.evalNodeAsync((te=e).left,t)];case 40:return Me=B.sent(),[4,this.evalNodeAsync(te.right,t)];case 41:if(Ge=B.sent(),"function"==typeof(ae=de.get(te.op)))return[2,ae(Me,Ge)];throw new Error("Unknown binary oprastion");case 42:if("logicalOp"!==e.type)return[3,46];Le=e,Qe=0,Ae=!0,B.label=43;case 43:return Qe<Le.items.length?(fe=Le.items[Qe++],[4,this.evalNodeAsync(fe.node,t)]):[3,45];case 44:return Ae=B.sent(),"and"!==fe.op||Ae?"or"===fe.op&&Ae?[2,Ae]:[3,43]:[2,!1];case 45:return[2,Ae];case 46:if("arrowFuncDef"===e.type)return Ee=e,[2,function(){for(var Zt,an=[],Pt=0;Pt<arguments.length;Pt++)an[Pt]=arguments[Pt];return(Zt=new pt).jspyFuncInvoker.apply(Zt,q([Ee,t],an,!1))}];if("funcCall"!==e.type)return[3,52];if("function"!=typeof(ae=t.blockScope.get((he=e).name)))throw Error("'".concat(he.name,"' is not a function or not defined."));Ce=[],se=0,Re=he.paramNodes||[],B.label=47;case 47:return se<Re.length?(tt=(Oe=Ce).push,[4,this.evalNodeAsync(ct=Re[se],t)]):[3,50];case 48:tt.apply(Oe,[B.sent()]),B.label=49;case 49:return se++,[3,47];case 50:return[4,this.invokeFunctionAsync(ae,Ce,{moduleName:t.moduleName,line:he.loc[0],column:he.loc[0]})];case 51:return[2,B.sent()];case 52:return"assign"!==e.type?[3,62]:"getSingleVar"!==(Q=e).target.type?[3,54]:(De=(Be=t.blockScope).set,at=[Q.target.name],[4,this.evalNodeAsync(Q.source,t)]);case 53:return De.apply(Be,at.concat([B.sent()])),[3,61];case 54:return"chainingCalls"!==Q.target.type?[3,61]:(st=new I((Pe=Q.target).innerNodes.slice(0,Pe.innerNodes.length-1),Pe.loc),[4,this.evalNodeAsync(st,t)]);case 55:return lt=B.sent(),rt="","getSingleVar"!==(et=Pe.innerNodes[Pe.innerNodes.length-1]).type?[3,56]:(rt=et.name,[3,59]);case 56:return"chainingObjectAccess"!==et.type?[3,58]:[4,this.evalNodeAsync(et.indexerBody,t)];case 57:return rt=B.sent(),[3,59];case 58:throw Error("Not implemented Assign operation with chaining calls");case 59:return ut=lt,gt=rt,[4,this.evalNodeAsync(Q.source,t)];case 60:ut[gt]=B.sent(),B.label=61;case 61:return[2,null];case 62:return"chainingCalls"!==e.type?[3,64]:[4,this.resolveChainingCallsNode(e,t)];case 63:return[2,B.sent()];case 64:if("createObject"!==e.type)return[3,70];$e={},wt=0,Bt=e.props,B.label=65;case 65:return wt<Bt.length?(tn=$e,[4,this.evalNodeAsync((ct=Bt[wt]).name,t)]):[3,69];case 66:return nn=B.sent(),[4,this.evalNodeAsync(ct.value,t)];case 67:tn[nn]=B.sent(),B.label=68;case 68:return wt++,[3,65];case 69:return[2,$e];case 70:if("createArray"!==e.type)return[3,75];Nt=[],bt=0,Vt=e.items,B.label=71;case 71:return bt<Vt.length?(on=(rn=Nt).push,[4,this.evalNodeAsync(Vt[bt],t)]):[3,74];case 72:on.apply(rn,[B.sent()]),B.label=73;case 73:return bt++,[3,71];case 74:return[2,Nt];case 75:return[2]}})})},n.prototype.resolveChainingCallsNode=function(e,t){return D(this,void 0,void 0,function(){var s,l,u,d,y,p,N,A,j,L,M;return U(this,function(O){switch(O.label){case 0:return[4,this.evalNodeAsync(e.innerNodes[0],t)];case 1:s=O.sent(),l=1,O.label=2;case 2:return l<e.innerNodes.length?(e.innerNodes[l-1].nullCoelsing&&!s&&(s={}),"getSingleVar"!==(u=e.innerNodes[l]).type?[3,3]:(s=s[u.name],[3,12])):[3,13];case 3:return"chainingObjectAccess"!==u.type?[3,5]:(d=s,[4,this.evalNodeAsync(u.indexerBody,t)]);case 4:return s=d[O.sent()],[3,12];case 5:if("funcCall"!==u.type)return[3,11];if(null==(p=s[(y=u).name])&&e.innerNodes[l-1].nullCoelsing)return s=null,[3,12];if("function"!=typeof p)throw Error("'".concat(y.name,"' is not a function or not defined."));N=[],A=0,j=y.paramNodes||[],O.label=6;case 6:return A<j.length?(M=(L=N).push,[4,this.evalNodeAsync(j[A],t)]):[3,9];case 7:M.apply(L,[O.sent()]),O.label=8;case 8:return A++,[3,6];case 9:return[4,this.invokeFunctionAsync(p.bind(s),N,{moduleName:t.moduleName,line:y.loc[0],column:y.loc[0]})];case 10:return s=O.sent(),[3,12];case 11:throw Error("Can't resolve chainingCalls node");case 12:return l++,[3,2];case 13:return[2,void 0===s?null:s]}})})},n}(),Ot={jsPython:function(){return"JSPython v2.1.10 (c) 2022 FalconSoft Ltd. All rights reserved."},dateTime:function(n){return void 0===n&&(n=null),function H(n){if(!n)return null;if("number"==typeof n)return new Date(n);if(n instanceof Date&&!isNaN(n.valueOf()))return n;if("string"!=typeof n)return null;var e=String(n);if(!e.length)return null;var t=function(y){if(!y||!y.length)return NaN;var p=parseInt(y,10);return isNaN(p)?y.startsWith("jan")?0:y.startsWith("feb")?1:y.startsWith("mar")?2:y.startsWith("apr")?3:y.startsWith("may")?4:y.startsWith("jun")?5:y.startsWith("jul")?6:y.startsWith("aug")?7:y.startsWith("sep")?8:y.startsWith("oct")?9:y.startsWith("nov")?10:y.startsWith("dec")?11:NaN:p-1},s=function(y){return y<100?y<68?y+2e3:y+1900:y},l=function(y,p,N,A,j,S){if(p>11||N>31||A>=60||j>=60||S>=60)return null;var L=new Date(y,p,N,A,j,S,0);return isNaN(L.valueOf())?null:L},u=e.replace("T"," ").toLowerCase().split(/[: /-]/),h=u.map(parseFloat),d=l(h[0],h[1]-1,h[2],h[3]||0,h[4]||0,h[5]||0);return d||(d=l(s(h[2]),t(u[1]),h[0],h[3]||0,h[4]||0,h[5]||0))||(d=l(s(h[2]),t(u[0]),s(h[1]),h[3]||0,h[4]||0,h[5]||0))?d:null}(n)||new Date},range:function _t(n,e,t){void 0===e&&(e=NaN),void 0===t&&(t=1);var s=[],l=isNaN(e);e=l?n:e;for(var u=n=l?0:n;u<e;)s.push(u),u+=t;return s},print:function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];return console.log.apply(console,n),n.length>0?n[0]:null},isNull:function(n,e){return void 0===e&&(e=null),null===e?null===n:n||e},isDate:function(n){return n instanceof Date},isFunction:function(n){return"function"==typeof n},isString:function(n){return"string"==typeof n},deleteProperty:function(n,e){return delete n[e]},Math,Object,Array,JSON,printExecutionContext:function(){},getExecutionContext:function(){return{}}},mt=function(){function n(){this.tokens=[]}return n.prototype.startLine=function(){return ht(this.tokens[0])},n.prototype.startColumn=function(){return St(this.tokens[0])},n.prototype.endLine=function(){return function sn(n){return n[1][3]}(this.tokens[this.tokens.length-1])},n.prototype.endColumn=function(){return function Gt(n){return n[1][4]}(this.tokens[this.tokens.length-1])},n}(),dn=function(){function n(){this._currentToken=null,this._moduleName=""}return n.prototype.parse=function(e,t,s){var l;void 0===t&&(t="main.jspy"),void 0===s&&(s="module"),this._moduleName=t;var u={name:t,type:s,funcs:[],body:[]};if(!e||!e.length)return u;try{var h=this.tokensToInstructionLines(e,1);this.instructionsToNodes(h,u)}catch(p){var d=p,y=null!==(l=this._currentToken)&&void 0!==l?l:{};throw new At(u.name,ht(y),St(y),d.message||String(d))}return u},n.prototype.instructionsToNodes=function(e,t){for(var s=this,l=function(Q,C){var Be=s.tokensToInstructionLines(Q,ht(Q[C])),De={name:t.name,body:[],funcs:[]};return s.instructionsToNodes(Be,De),De.body},u=function(Q,C,Be){return Be.splice(0,Be.length),_e(Q,C).forEach(function(De){return Be.push(De)}),!!Be.length},h=0;h<e.length;h++){for(var d=e[h],y=0;y<d.tokens.length;)Ze(d.tokens[y])===ee.Comment?d.tokens.splice(y,1):y++;if(d.tokens.length){var p=d.tokens[0],N=d.tokens.length>1?d.tokens[1]:null;this._currentToken=p;var A=[];if(Ze(p)===ee.Comment)t.body.push(new Xe(E(p),G(p)));else if("def"===E(p)||"async"===E(p)&&"def"===E(N)){var S="async"===E(p),L=E(d.tokens[S?2:1]),O=qe(d.tokens.slice(d.tokens.findIndex(function(Q){return"("===E(Q)})+1,d.tokens.findIndex(function(Q){return")"===E(Q)})),",").map(function(Q){return E(Q[0])});if(-1===(W=Fe(d.tokens,function(Q){return":"===Q})))throw"Can't find : for def";var V=this.tokensToInstructionLines(d.tokens,ht(d.tokens[W+1])),pe={name:L,body:[],funcs:[]};this.instructionsToNodes(V,pe),t.funcs.push(new cn(pe,O,S,G(d.tokens[0])))}else if("if"===E(p)){if(-1===(W=Fe(d.tokens,function(C){return":"===C})))throw"Can't find : for if";for(var ye=l(d.tokens,W+1),ge=u(Z=d.tokens.slice(1,W),z.Logical,A)?this.groupLogicalOperations(A,Z):this.createExpressionNode(Z),ue=[];e.length>h+1&&"elif"===E(e[h+1].tokens[0]);){var ce=e[++h],we=Fe(ce.tokens,function(C){return":"===C}),xe=ce.tokens.slice(1,W),Te=u(xe,z.Logical,A)?this.groupLogicalOperations(A,xe):this.createExpressionNode(xe),re=l(ce.tokens,we+1);ue.push(new fn(Te,re,G(ce.tokens[0])))}var _=void 0;e.length>h+1&&"else"===E(e[h+1].tokens[0])&&":"===E(e[h+1].tokens[1])&&(_=l(e[h+1].tokens,2),h++),t.body.push(new Lt(ge,ye,ue,_,G(p)))}else if("try"===E(p)){if(":"!==E(d.tokens[1]))throw"'try' statement should be followed by ':'";for(var Y=l(d.tokens,2),je=[],ie=void(_=void 0);e.length>h+1&&("else"===E(e[h+1].tokens[0])||"except"===E(e[h+1].tokens[0])||"finally"===E(e[h+1].tokens[0]));){if("else"===E(e[h+1].tokens[0])){if(_)throw new Error("Only one 'else' is allowed in a 'try'");_=l(e[h+1].tokens,2)}if("finally"===E(e[h+1].tokens[0])){if(ie)throw new Error("Only one 'else' is allowed in a 'try'");ie=l(e[h+1].tokens,2)}if("except"===E(e[h+1].tokens[0])){var be=Fe(e[h+1].tokens,function(C){return":"===C}),te={};if(2===be)te.error={name:E(e[h+1].tokens[1])};else if(3===be)te.error={name:E(e[h+1].tokens[1]),alias:E(e[h+1].tokens[2])};else if(4===be)te.error={name:E(e[h+1].tokens[1]),alias:E(e[h+1].tokens[3])};else if(1!==be)throw new Error("Incorrect 'except:' statement. Valid stats: (except: or except Error: or except Error as e:)");te.body=l(e[h+1].tokens,be+1),je.push(te)}h++}if(!je.length)throw new Error("Except: is missing");t.body.push(new Ct(Y,je,_,ie,G(p)))}else if("continue"===E(p))t.body.push(new ve);else if("break"===E(p))t.body.push(new Ke);else if("return"===E(p))t.body.push(new Qt(d.tokens.length>1?this.createExpressionNode(d.tokens.slice(1)):void 0,G(p)));else if("raise"===E(p)){if(1===d.tokens.length)throw new Error("Incorrect 'raise' usage. Please specify error name and message ");var Me=E(d.tokens[1]),Ge=this.createExpressionNode(d.tokens.slice(1));t.body.push(new Tt(Me,Ge,G(p)))}else if("for"===E(p)){if(-1===(W=Fe(d.tokens,function(C){return":"===C})))throw"Can't find : for if";var Le=E(d.tokens[1]),Qe=this.createExpressionNode(d.tokens.slice(3,W)),Ae=l(d.tokens,W+1);t.body.push(new $t(Qe,Le,Ae,G(p)))}else if("while"===E(p)){var W;if(-1===(W=Fe(d.tokens,function(De){return":"===De})))throw"Can't find : for [while]";ge=u(Z=d.tokens.slice(1,W),z.Logical,A)?this.groupLogicalOperations(A,Z):this.createExpressionNode(Z);var Z,fe=l(d.tokens,W+1);t.body.push(new hn(ge,fe,G(p)))}else if("import"===E(p)){var Ee=Fe(d.tokens,function(C){return"as"===C});Ee<0&&(Ee=d.tokens.length);var he={name:d.tokens.slice(1,Ee).map(function(C){return E(C)}).join(""),alias:d.tokens.slice(Ee+1).map(function(C){return E(C)}).join("")||void 0};t.body.push(new Rt(he,fe={},void 0,G(p)))}else if("from"===E(p)){var ae=Fe(d.tokens,function(C){return"import"===C});if(ae<0)throw Error("'import' must follow 'from'");var Ce={name:d.tokens.slice(1,ae).map(function(C){return E(C)}).join("")},se=qe(d.tokens.slice(ae+1),",").map(function(C){return{name:E(C[0]),alias:3===C.length?E(C[2]):void 0}});t.body.push(new Rt(Ce,fe={},se,G(p)))}else if(u(d.tokens,z.Assignment,[])){var Re=qe(d.tokens,"="),Oe=this.createExpressionNode(Re[0]),tt=this.createExpressionNode(Re[1]);t.body.push(new Je(Oe,tt,G(Re[0][0])))}else u(d.tokens,z.Logical,A)?t.body.push(this.groupLogicalOperations(A,d.tokens)):t.body.push(this.createExpressionNode(d.tokens))}}},n.prototype.sliceWithBrackets=function(e,t,s){return"("===E(e[t])&&Ze(e[t])!==ee.LiteralString&&(t++,s--),e.slice(t,s)},n.prototype.groupComparisonOperations=function(e,t){for(var l=null,u=0;u<e.length;u++){var h=E(t[e[u]]);l=l||this.createExpressionNode(this.sliceWithBrackets(t,0,e[u]));var y=this.createExpressionNode(this.sliceWithBrackets(t,e[u]+1,u+1<e.length?e[u+1]:t.length));l=new vt(l,h,y,G(t[0]))}return l},n.prototype.groupLogicalOperations=function(e,t){for(var s=0,l=[],u=0;u<e.length;u++){var h=t[e[u]],d=this.sliceWithBrackets(t,s,e[u]);l.push({node:this.createExpressionNode(d),op:E(h)}),s=e[u]+1}return l.push({node:this.createExpressionNode(this.sliceWithBrackets(t,s,t.length))}),new Ht(l,G(t[0]))},n.prototype.tokensToInstructionLines=function(e,t){for(var s=[],l=0,u=new mt,h=0;h<e.length;h++){var d=e[h],y=ht(d),p=St(d),N=E(d);if(this._currentToken=d,y>=t&&(l===p&&!")}]".includes(N)&&(s.push(u),u=new mt),u.tokens.push(d),0===l&&(l=p),p<l))break}return u.tokens.length&&s.push(u),s},n.prototype.createExpressionNode=function(e){var t=this;if(0===e.length)throw new Error("Tokens length can't empty.");var s=e[e.length-1];if(";"===E(s)&&Ze(s)!==ee.LiteralString)throw new Error("Unexpected symbol ';' in the end");if(this._currentToken=e[0],1===e.length||2===e.length&&"?"===E(e[1])){var l=e[0],u=Ze(l);if(function Ve(n){return n===ee.LiteralString||n===ee.LiteralNumber||n===ee.LiteralBool||n===ee.LiteralNull}(u))return new jt(l);if(u===ee.Identifier)return new Yt(l,2===e.length&&"?"===E(e[1])||void 0);throw Error("Unhandled single token: '".concat(JSON.stringify(l),"'"))}var h=qe(e,"=>");if(h.length>1){var y=qe("("===E(h[0][0])?h[0].splice(1,h[0].length-2):h[0],",").map(function(Oe){return E(Oe[0])}),p=this.tokensToInstructionLines(h[1],0),N={name:this._moduleName,body:[],funcs:[]};return this.instructionsToNodes(p,N),new Mt(N,y,G(e[0]))}var A=_e(e,z.Comparison);if(A.length)return this.groupComparisonOperations(A,e);var j=_e(e);if(j.length){for(var S=null,L=0;L<j.length;L++){var M=j[L],O=E(e[M]),W=L+1<j.length?j[L+1]:null,V=null!==W?E(e[W]):null;if(null===W||"*"!==V&&"/"!==V){we=S?[]:this.sliceWithBrackets(e,0,M);var xe=this.sliceWithBrackets(e,M+1,W||e.length),Te=S||this.createExpressionNode(we),re=this.createExpressionNode(xe);S=new vt(Te,O,re,G(e[0]))}else{var pe=null;do{var ye=L+2<j.length?j[L+2]:null,Z=this.sliceWithBrackets(e,M+1,W),ge=this.sliceWithBrackets(e,W+1,ye||e.length),ue=this.createExpressionNode(Z),ce=this.createExpressionNode(ge);pe=new vt(ue,V,ce,G(e[M+1])),V=null!==(W=1+ ++L<j.length?j[L+1]:null)?E(e[W]):null}while(null!==W&&("*"===V||"/"===V));if(null===S){var we=this.sliceWithBrackets(e,0,M);S=this.createExpressionNode(we)}S=new vt(S,O,pe,G(e[0]))}}if(null===S)throw Error("Can't create node ...");return S}var _=function ln(n){for(var e=[],t=0;t<n.length;t++){var s=E(n[t]);Ze(n[t])!==ee.LiteralString&&("."===s?e.push(t):"("===s?t=We(n,t,"(",")"):"["===s&&0===t?t=We(n,t,"[","]"):"["===s&&0!==t?(e.push(t),t=We(n,t,"[","]")):"{"===s&&(t=We(n,t,"{","}")))}return e}(e);if(_.length>0){var Y=nt(e,_),je=[];for(L=0;L<Y.length;L++){var ie=Y[L];if(0===L||"["!==E(ie[0]))je.push(this.createExpressionNode(ie));else{var be="?"===E(ie[ie.length-1]);be&&ie.pop();var te=ie.slice(1,ie.length-1),Me=this.createExpressionNode(te);je.push(new dt(Me,be,G(ie[0])))}}return new I(je,G(e[0]))}if(e.length>2&&"("===E(e[1])){var Ge="?"===E(e[e.length-1]);Ge&&e.pop();var Le=E(e[0]),Ae=(Me=qe(te=e.slice(2,e.length-1),",").map(function(Q){return t.createExpressionNode(Q)}),new un(Le,Me,G(e[0])));return Ae.nullCoelsing=Ge||void 0,Ae}if("{"===E(e[0])&&"}"===E(e[e.length-1])){var fe=qe(e.splice(1,e.length-2),","),Ee=[];for(L=0;L<fe.length;L++){var he=qe(fe[L],":");if(1===he.length){var ae={name:new jt(he[0][0]),value:this.createExpressionNode(he[0])};Ee.push(ae)}else{if(2!==he.length)throw Error("Incorrect JSON");var Ce=null,se=he[0];if(1===se.length)Ce=new jt(se[0]);else{if("["!==E(se[0])||"]"!==E(se[se.length-1]))throw new Error("Incorrect JSON. Can't resolve Key field. That should either constant or expression in []");Ce=this.createExpressionNode(se.slice(1,se.length-1))}ae={name:Ce,value:this.createExpressionNode(he[1])},Ee.push(ae)}}return new ne(Ee,G(e[0]))}if("["===E(e[0])&&"]"===E(e[e.length-1])){var Re=qe(e.splice(1,e.length-2),",").map(function(Oe){return t.createExpressionNode(Oe)});return new b(Re,G(e[0]))}throw Error("Undefined node '".concat(E(e[0]),"'."))},n}(),en={"\n":["\n"],"=":["=","==","=>"],"+":["+","++","+="],"-":["-","--","-="],"*":["*","**","*="],"/":["/","//","/="],".":["."],"?":["?"],"!":["!="],":":[":"],",":[","],">":[">",">="],"<":["<","<=","<>"],"(":["("],")":[")"],"{":["{"],"}":["}"],"[":["["],"]":["]"]},zt=['"',"'","\\"],Ut=["async","def","for","while","if","return","in"],yt=function(){function n(){this._startLine=1,this._startColumn=1,this._currentLine=1,this._currentColumn=1,this._tokenText="",this._cursor=0,this._script=""}return Object.defineProperty(n.prototype,"tokenText",{get:function(){return this._tokenText},set:function(e){!this._tokenText&&e&&(this._startLine=this._currentLine,this._startColumn=this._currentColumn),this._tokenText=e},enumerable:!1,configurable:!0}),n.prototype.tokenize=function(e){if(!e||!e.length)return[];e=e.replace(new RegExp("\t","g"),"  ").replace(new RegExp("\r","g"),""),this._script=e,this._cursor=0,this._startLine=1,this._startColumn=1,this._currentLine=1,this._currentColumn=1;for(var t=[],s=!0;"\n"===e[this._cursor];)this.incrementCursor(),s&&(this._currentLine++,s=!1),this._currentColumn=1;do{var l=e[this._cursor];if(" "!=l||0===this.tokenText.length)if(void 0===en[l]||this.isPartOfNumber(l,t))if("#"===l){for(var h=!0;"\n"!==e[this.incrementCursor()]&&(this.tokenText+=e[this._cursor],h&&(h=!1,this._startColumn=this._startColumn-1),!(this._cursor+1>=e.length)););this.tokenText=this.processToken(this.tokenText,t,!0,ee.Comment)}else if('"'===l||"'"===l){var d=l;if(this.tokenText=this.processToken(this.tokenText,t),e[this._cursor+1]===d&&e[this._cursor+2]===d){var y=this._currentLine,p=this._currentColumn;for(this.incrementCursor(2);this.tokenText+=e[this.incrementCursor()],!(this._cursor+3>=e.length||e[this._cursor+1]===d&&e[this._cursor+2]===d&&e[this._cursor+3]===d););this._startLine=y,this._startColumn=p,this.incrementCursor(3)}else{for(;e[this.incrementCursor()]!==d;)if("\\"===e[this._cursor]&&zt.indexOf(e[this._cursor+1])>=0&&this._cursor++,this.tokenText+=e[this._cursor],this._cursor+1>=e.length)throw new Error("Line ".concat(this._startLine,": End of string missing."));this._startColumn--}0===this.tokenText.length&&(this._startLine=this._currentLine,this._startColumn=this._currentColumn),this.tokenText=this.processToken(this.tokenText,t,!0,ee.LiteralString)}else" "!=l&&(this.tokenText+=l);else{this.tokenText=this.processToken(this.tokenText,t),this.tokenText=l;var u=en[l];if(u.length>=1)for(;u.includes(this.tokenText+e[this._cursor+1]);)this.tokenText+=e[this.incrementCursor()];this.tokenText=this.processToken(this.tokenText,t,!1,ee.Operator)}else this.tokenText=this.processToken(this.tokenText,t)}while(this.incrementCursor()<e.length);return this.processToken(this.tokenText,t),t},n.prototype.incrementCursor=function(e){void 0===e&&(e=1);for(var t=0;t<e;t++)this._cursor=this._cursor+1,"\n"===this._script[this._cursor]?(this._currentLine++,this._currentColumn=0):this._currentColumn++;return this._cursor},n.prototype.recognizeToken=function(e,t){void 0===t&&(t=null);var s=e;return null===t&&("null"===e?(t=ee.LiteralNull,s=null):"true"===e||"false"===e?(t=ee.LiteralBool,s="true"===e):null!==this.parseNumberOrNull(e)?(t=ee.LiteralNumber,s=this.parseNumberOrNull(e)):t=Ut.indexOf(e)>=0?ee.Keyword:ee.Identifier),{value:s,type:t}},n.prototype.processToken=function(e,t,s,l){if(void 0===s&&(s=!1),void 0===l&&(l=null),!e.length&&!s||"\n"===e)return"";var u=this.recognizeToken(e,l);return t.push([u.value,Uint16Array.of(u.type,this._startLine,this._startColumn,this._currentLine,this._currentColumn)]),""},n.prototype.parseNumberOrNull=function(e){if("number"==typeof e)return e;if(!e||"string"!=typeof e)return null;for(var t=(e=e.trim()).length-1;t>=0;t--){var s=e.charCodeAt(t);if((s<48||s>57)&&46!==s&&44!==s&&(45!==s||0!==t))return null}var l=parseFloat(e);return isNaN(l)?null:l},n.prototype.isPartOfNumber=function(e,t){if("-"===e&&!this.tokenText.length){var s=0!==t.length?t[t.length-1]:null;return null===s||Ze(s)===ee.Operator&&")"!==E(s)}return"."===e&&null!==this.parseNumberOrNull(this.tokenText)},n}();function vn(){return pn.create()}var pn=function(){function n(){this.initialScope=K({},Ot),this._lastExecutionContext=null}return n.create=function(){return new n},Object.defineProperty(n.prototype,"initialExecutionContext",{get:function(){return this.initialScope},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"lastExecutionContext",{get:function(){return this._lastExecutionContext},enumerable:!1,configurable:!0}),n.prototype.cleanUp=function(){this._lastExecutionContext=null},n.prototype.jsPythonInfo=function(){return Ot.jsPython()},n.prototype.tokenize=function(e){return(new yt).tokenize(e)},n.prototype.parse=function(e,t){void 0===t&&(t="main.jspy");var s=new yt;return(new dn).parse(s.tokenize(e),t)},n.prototype.eval=function(e,t,s,l){void 0===t&&(t={}),void 0===s&&(s=""),void 0===l&&(l="main.jspy");var u="string"==typeof e?this.parse(e,l):e,h={moduleName:l,cancellationToken:{cancel:!1},blockScope:new Dt(t)};h.blockScope.set("printExecutionContext",function(){return console.log(h.blockScope.getScope())}),h.blockScope.set("getExecutionContext",function(){return h.blockScope.getScope()}),this._lastExecutionContext=h.blockScope.getScope();var d=(new pt).evalBlock(u,h);if(!s||!s.length)return d;var y=Array.isArray(s)?s[0]:s,p=Array.isArray(s)?s.slice(1):[],N=h.blockScope.get(y);if("function"!=typeof N)throw Error("Function ".concat(s," does not exists or not a function"));return N.apply(void 0,p)},n.prototype.evalAsync=function(e,t,s,l,u){return void 0===t&&(t={}),void 0===s&&(s=""),void 0===l&&(l="main.jspy"),D(this,void 0,void 0,function(){var h,d,y,p,N,A,j,S=this;return U(this,function(L){switch(L.label){case 0:return h="string"==typeof e?this.parse(e,l):e,d=new qt,y={moduleName:l,cancellationToken:{cancel:!1},blockScope:new Dt(t)},"function"==typeof u&&u(y),y.blockScope.set("printExecutionContext",function(){return console.log(y.blockScope.getScope())}),y.blockScope.set("getExecutionContext",function(){return y.blockScope.getScope()}),this._lastExecutionContext=y.blockScope.getScope(),[4,d.registerJsonFileLoader(function(M){return D(S,void 0,void 0,function(){return U(this,function(O){switch(O.label){case 0:return[4,this.moduleLoader?this.moduleLoader(M):Promise.reject("ModuleLoader is not registered")];case 1:return[2,O.sent()]}})})}).registerModuleParser(function(M){return D(S,void 0,void 0,function(){return U(this,function(O){switch(O.label){case 0:return[4,this.moduleParser(M)];case 1:return[2,O.sent()]}})})}).registerBlockContextFactory(function(M,O){var W=S.assignImportContext(O,t),V={moduleName:M,blockScope:new Dt(W),cancellationToken:y.cancellationToken};return V.blockScope.set("printExecutionContext",function(){return console.log(V.blockScope.getScope())}),V.blockScope.set("getExecutionContext",function(){return V.blockScope.getScope()}),V}).evalBlockAsync(h,y)];case 1:return p=L.sent(),s&&s.length?[3,2]:[2,p];case 2:if(N=Array.isArray(s)?s[0]:s,A=Array.isArray(s)?s.slice(1):[],"function"!=typeof(j=y.blockScope.get(N)))throw Error("Function ".concat(s," does not exists or not a function"));return[4,j.apply(void 0,A)];case 3:return[2,L.sent()]}})})},n.prototype.evaluate=function(e,t,s,l,u){return void 0===t&&(t={}),void 0===s&&(s=""),void 0===l&&(l="main.jspy"),D(this,void 0,void 0,function(){var h,d;return U(this,function(y){switch(y.label){case 0:return e&&e.length?(h=this.parse(e,l),t=this.assignImportContext(h,t=t&&"object"==typeof t?t:{}),d=K(K({},this.initialScope),t),[4,this.evalAsync(h,d,s,l,u)]):[2,null];case 1:return[2,y.sent()]}})})},n.prototype.registerPackagesLoader=function(e){if("function"!=typeof e)throw Error("PackagesLoader");return this.packageLoader=e,this},n.prototype.registerModuleLoader=function(e){if("function"!=typeof e)throw Error("ModuleLoader should be a function");return this.moduleLoader=e,this},n.prototype.addFunction=function(e,t){return this.initialScope[e]=t,this},n.prototype.assignGlobalContext=function(e){return Object.assign(this.initialScope,e),this},n.prototype.hasFunction=function(e,t){return void 0===e&&(e=""),e.indexOf("def ".concat(t))>-1},n.prototype.assignImportContext=function(e,t){var u=e.body.filter(function(d){return"import"===d.type}).filter(function(d){return"jsPackage"===Ie(d.module.name)}).map(function(d){return function(d){var y;return{name:d.module.name,as:d.module.alias,properties:null===(y=d.parts)||void 0===y?void 0:y.map(function(p){return{name:p.name,as:p.alias}})}}(d)});if(u.length&&this.packageLoader){var h=this.packageResolver(u);t=K(K({},t),h)}return t},n.prototype.moduleParser=function(e){return D(this,void 0,void 0,function(){var t;return U(this,function(s){switch(s.label){case 0:if(!this.moduleLoader)throw new Error("Module Loader is not registered");return[4,this.moduleLoader(e)];case 1:return t=s.sent(),[2,this.parse(t,e)]}})})},n.prototype.packageResolver=function(e){var t=this;if(!this.packageLoader)throw Error("Package loader not provided.");var s={};return e.forEach(function(l){var u=l.name,h=l.as,d=l.properties,y=t.packageLoader&&t.packageLoader(u)||{};d?.length?d.forEach(function(p){s[p.as||p.name]=y[p.name]}):h?s[h]=y:s[u]=y,h&&(s[h]=y)}),s},n}()},1519:(ot,Ne,m)=>{function le(F,K,D){if(!K.has(F))throw new TypeError("attempted to "+D+" private field on non-instance");return K.get(F)}m.d(Ne,{Z:()=>le})},18916:(ot,Ne,m)=>{m.d(Ne,{Z:()=>K});var le=m(26983),F=m(1519);function K(D,U){var q=(0,F.Z)(D,U,"get");return(0,le.Z)(D,q)}},85926:(ot,Ne,m)=>{function F(K,D,U){(function le(K,D){if(D.has(K))throw new TypeError("Cannot initialize the same private elements twice on an object")})(K,D),D.set(K,U)}m.d(Ne,{Z:()=>F})},42793:(ot,Ne,m)=>{m.d(Ne,{Z:()=>K});var le=m(86011),F=m(1519);function K(D,U,q){var H=(0,F.Z)(D,U,"set");return(0,le.Z)(D,H,q),q}}}]);