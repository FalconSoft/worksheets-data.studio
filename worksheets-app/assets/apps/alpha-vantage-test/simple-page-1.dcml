<dcml>
<script>

async def showPage(page):
  app.showPage(page)

def logPageContext():
  print('page context: ', dataContext)

def onInit():
  dataContext.uiValueChanged$.subscribe(
    x => print('page ui value changed: ', x)
  )

def setValue(val):
  setUIValue('val', val)

def setCmpAValue():
  setUIValue('cmpA', { value: 'PageA1' })

def setCmpBValue():
  setUIValue('cmpB', { val: 'PageB1' })

  </script>

  <template>

		<div class="h-100 w-100">
			<div class="container my-2 p-2 h-100 w-100 bg-main overflow-auto">
        <div class="d-flex flex-column h-100">
          <div class="py-2 d-flex">
            <button class="btn btn-outline-primary mr-2" onClick="showPage('simple-chart.dcml')">Chart</button>
            <button class="btn btn-outline-primary mr-2" onClick="showPage('simple-page-2.dcml')">Page 2</button>
            <button class="btn btn-primary mr-2" onClick="setValue('Page Value')">Set Page Value</button>
            <button class="btn btn-primary mr-2" onClick="setCmpBValue()">Set Page B1</button>
            <button class="btn btn-primary mr-2" onClick="setCmpAValue()">Set Page A2</button>
          </div>
          <h1 class="m-0">Page - 1 No layout</h1>
          <text binding="$.val" />
          <text binding="$.cmpA.value" />
          <text binding="$.cmpB.val" />
          <button class="btn btn-secondary" onClick="logPageContext()">Log page context</button>
          <load-component path="components/component-a.dcml" dataContext="$.cmpA"/>
          <load-component path="components/component-b.dcml" dataContext="$.cmpB"/>
        </div>
			</div>
		</div>

  </template>
</dcml>
